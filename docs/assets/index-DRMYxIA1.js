var W=Object.defineProperty;var H=(e,t,r)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var V=(e,t,r)=>H(e,typeof t!="symbol"?t+"":t,r);import{L as defineStore,b as ref,B as computed,M as defineComponent,N as watchEffect,O as h,R as RouterView,P as useRouter,Q as useI18n,S as storeToRefs,U as useRoute,w as watch,i as resolveDirective,l as withDirectives,e as onMounted,V as onUnmounted,C as reactive,W as getCurrentScope,X as onScopeDispose,n as nextTick,Y as createRouter,Z as createWebHashHistory,_ as createPinia,$ as createI18n,a0 as createApp}from"./vue-VsIqK9es.js";import{a as axios,D as Dexie,l as localforage,b as liveQuery}from"./tools2-3RHzM5xT.js";import{l as lib$1,c as clipboard,a as lib$2,m as md5,n as nanoid,p as pako,F as FileSaver_minExports,Y as YAML,z as zipson}from"./tools1-BQ13fk8h.js";import{j as jschardet}from"./jschardet-768ere47.js";import{R}from"./lodash-hWwoBv_4.js";import{s as script,a as script$1,b as script$2,d as definePreset,c as script$3,e as script$4,f as script$5,g as script$6,h as script$7,i as script$8,j as script$9,k as script$a,l as script$b,u as useToast,m as script$c,n as script$d,o as script$e,p as script$f,q as script$g,r as script$h,t as useConfirm,v as script$i,w as script$j,x as script$k,y as script$l,P as PrimeVue,T as ToastService,D as DialogService,C as ConfirmationService,z as Tooltip}from"./primevue-DvS3xdDE.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const darkModeClassName="my-app-dark",useDarkModeStore=defineStore("darkMode",()=>{const e=ref(darkModeClassName),t=ref(!1),r=computed(()=>`.${e.value}`),o=computed(()=>document.documentElement.classList.contains(darkModeClassName)),n=()=>{document.documentElement.classList.add(e.value),t.value=!0},a=()=>{document.documentElement.classList.remove(e.value),t.value=!1};return{className:e,isOn:t,darkModeClass:r,isDarkMode:o,turnOn:n,turnOff:a,toggle:()=>{document.documentElement.classList.toggle(e.value),t.value=!t.value},turn:()=>{t.value?n():a()}}},{persist:{serializer:{deserialize:lib$1.parse,serialize:lib$1.stringify},pick:["isOn"]}}),defaultState={locale:"en",fallbackLocale:"en",availableLocales:["en","zh"]},systemSettingsDefinition={state:()=>R.cloneDeep(defaultState),getters:{},actions:{setLocale(e,t){var r;e=(e??"").toLowerCase(),(r=this.availableLocales)!=null&&r.includes(e)||(e=this.locale),t!=null&&(t.value=e),this.locale=e}},persist:{serializer:{deserialize:lib$1.parse,serialize:lib$1.stringify}}},useSystemSettingsStore=defineStore("systemSettingsStore",systemSettingsDefinition),RootLayout=defineComponent({setup(){const e=useDarkModeStore(),{turn:t}=e,r=useSystemSettingsStore(),{setLocale:o}=r;return watchEffect(()=>{t(),o()}),()=>[h(RouterView),h(script),h(script$1),h(script$2)]}});window.toolPack={_:R,axios,clipboard,Dexie,jschardet,json5:lib$2,JSON5:lib$2,localforage,lodash:R,Lodash:R,md5,nanoid,pako,saveAs:FileSaver_minExports.saveAs,yaml:YAML,zipson};window._=R;window.axios=axios;window.clipboard=clipboard;window.Dexie=Dexie;window.jschardet=jschardet;window.json5=lib$2;window.JSON5=lib$2;window.localforage=localforage;window.lodash=R;window.Lodash=R;window.md5=md5;window.nanoid=nanoid;window.pako=pako;window.saveAs=FileSaver_minExports.saveAs;window.yaml=YAML;window.zipson=zipson;const App=defineComponent({setup(){return()=>h(RootLayout)}});var index$1p={root:{transitionDuration:"{transition.duration}"},panel:{borderWidth:"0 0 1px 0",borderColor:"{content.border.color}"},header:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{text.color}",padding:"1.125rem",fontWeight:"600",borderRadius:"0",borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",hoverBackground:"{content.background}",activeBackground:"{content.background}",activeHoverBackground:"{content.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},toggleIcon:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{text.color}",activeHoverColor:"{text.color}"},first:{topBorderRadius:"{content.border.radius}",borderWidth:"0"},last:{bottomBorderRadius:"{content.border.radius}",activeBottomBorderRadius:"0"}},content:{borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",color:"{text.color}",padding:"0 1.125rem 1.125rem 1.125rem"}},index$1o={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}"},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},dropdown:{width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},chip:{borderRadius:"{border.radius.sm}"},emptyMessage:{padding:"{list.option.padding}"},colorScheme:{light:{chip:{focusBackground:"{surface.200}",focusColor:"{surface.800}"},dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.700}",focusColor:"{surface.0}"},dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"}}}},index$1n={root:{width:"2rem",height:"2rem",fontSize:"1rem",background:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},icon:{size:"1rem"},group:{borderColor:"{content.background}",offset:"-0.75rem"},lg:{width:"3rem",height:"3rem",fontSize:"1.5rem",icon:{size:"1.5rem"},group:{offset:"-1rem"}},xl:{width:"4rem",height:"4rem",fontSize:"2rem",icon:{size:"2rem"},group:{offset:"-1.5rem"}}},index$1m={root:{borderRadius:"{border.radius.md}",padding:"0 0.5rem",fontSize:"0.75rem",fontWeight:"700",minWidth:"1.5rem",height:"1.5rem"},dot:{size:"0.5rem"},sm:{fontSize:"0.625rem",minWidth:"1.25rem",height:"1.25rem"},lg:{fontSize:"0.875rem",minWidth:"1.75rem",height:"1.75rem"},xl:{fontSize:"1rem",minWidth:"2rem",height:"2rem"},colorScheme:{light:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.500}",color:"{surface.0}"},info:{background:"{sky.500}",color:"{surface.0}"},warn:{background:"{orange.500}",color:"{surface.0}"},danger:{background:"{red.500}",color:"{surface.0}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"{green.400}",color:"{green.950}"},info:{background:"{sky.400}",color:"{sky.950}"},warn:{background:"{orange.400}",color:"{orange.950}"},danger:{background:"{red.400}",color:"{red.950}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}}},index$1l={primitive:{borderRadius:{none:"0",xs:"2px",sm:"4px",md:"6px",lg:"8px",xl:"12px"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"}},semantic:{transitionDuration:"0.2s",focusRing:{width:"1px",style:"solid",color:"{primary.color}",offset:"2px",shadow:"none"},disabledOpacity:"0.6",iconSize:"1rem",anchorGutter:"2px",primary:{50:"{emerald.50}",100:"{emerald.100}",200:"{emerald.200}",300:"{emerald.300}",400:"{emerald.400}",500:"{emerald.500}",600:"{emerald.600}",700:"{emerald.700}",800:"{emerald.800}",900:"{emerald.900}",950:"{emerald.950}"},formField:{paddingX:"0.75rem",paddingY:"0.5rem",sm:{fontSize:"0.875rem",paddingX:"0.625rem",paddingY:"0.375rem"},lg:{fontSize:"1.125rem",paddingX:"0.875rem",paddingY:"0.625rem"},borderRadius:"{border.radius.md}",focusRing:{width:"0",style:"none",color:"transparent",offset:"0",shadow:"none"},transitionDuration:"{transition.duration}"},list:{padding:"0.25rem 0.25rem",gap:"2px",header:{padding:"0.5rem 1rem 0.25rem 1rem"},option:{padding:"0.5rem 0.75rem",borderRadius:"{border.radius.sm}"},optionGroup:{padding:"0.5rem 0.75rem",fontWeight:"600"}},content:{borderRadius:"{border.radius.md}"},mask:{transitionDuration:"0.15s"},navigation:{list:{padding:"0.25rem 0.25rem",gap:"2px"},item:{padding:"0.5rem 0.75rem",borderRadius:"{border.radius.sm}",gap:"0.5rem"},submenuLabel:{padding:"0.5rem 0.75rem",fontWeight:"600"},submenuIcon:{size:"0.875rem"}},overlay:{select:{borderRadius:"{border.radius.md}",shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"},popover:{borderRadius:"{border.radius.md}",padding:"0.75rem",shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"},modal:{borderRadius:"{border.radius.xl}",padding:"1.25rem",shadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)"},navigation:{shadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)"}},colorScheme:{light:{surface:{0:"#ffffff",50:"{slate.50}",100:"{slate.100}",200:"{slate.200}",300:"{slate.300}",400:"{slate.400}",500:"{slate.500}",600:"{slate.600}",700:"{slate.700}",800:"{slate.800}",900:"{slate.900}",950:"{slate.950}"},primary:{color:"{primary.500}",contrastColor:"#ffffff",hoverColor:"{primary.600}",activeColor:"{primary.700}"},highlight:{background:"{primary.50}",focusBackground:"{primary.100}",color:"{primary.700}",focusColor:"{primary.800}"},mask:{background:"rgba(0,0,0,0.4)",color:"{surface.200}"},formField:{background:"{surface.0}",disabledBackground:"{surface.200}",filledBackground:"{surface.50}",filledHoverBackground:"{surface.50}",filledFocusBackground:"{surface.50}",borderColor:"{surface.300}",hoverBorderColor:"{surface.400}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.400}",color:"{surface.700}",disabledColor:"{surface.500}",placeholderColor:"{surface.500}",invalidPlaceholderColor:"{red.600}",floatLabelColor:"{surface.500}",floatLabelFocusColor:"{primary.600}",floatLabelActiveColor:"{surface.500}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.400}",shadow:"0 0 #0000, 0 0 #0000, 0 1px 2px 0 rgba(18, 18, 23, 0.05)"},text:{color:"{surface.700}",hoverColor:"{surface.800}",mutedColor:"{surface.500}",hoverMutedColor:"{surface.600}"},content:{background:"{surface.0}",hoverBackground:"{surface.100}",borderColor:"{surface.200}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"},popover:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"},modal:{background:"{surface.0}",borderColor:"{surface.200}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.100}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.400}",focusColor:"{surface.500}"}},optionGroup:{background:"transparent",color:"{text.muted.color}"}},navigation:{item:{focusBackground:"{surface.100}",activeBackground:"{surface.100}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.400}",focusColor:"{surface.500}",activeColor:"{surface.500}"}},submenuLabel:{background:"transparent",color:"{text.muted.color}"},submenuIcon:{color:"{surface.400}",focusColor:"{surface.500}",activeColor:"{surface.500}"}}},dark:{surface:{0:"#ffffff",50:"{zinc.50}",100:"{zinc.100}",200:"{zinc.200}",300:"{zinc.300}",400:"{zinc.400}",500:"{zinc.500}",600:"{zinc.600}",700:"{zinc.700}",800:"{zinc.800}",900:"{zinc.900}",950:"{zinc.950}"},primary:{color:"{primary.400}",contrastColor:"{surface.900}",hoverColor:"{primary.300}",activeColor:"{primary.200}"},highlight:{background:"color-mix(in srgb, {primary.400}, transparent 84%)",focusBackground:"color-mix(in srgb, {primary.400}, transparent 76%)",color:"rgba(255,255,255,.87)",focusColor:"rgba(255,255,255,.87)"},mask:{background:"rgba(0,0,0,0.6)",color:"{surface.200}"},formField:{background:"{surface.950}",disabledBackground:"{surface.700}",filledBackground:"{surface.800}",filledHoverBackground:"{surface.800}",filledFocusBackground:"{surface.800}",borderColor:"{surface.600}",hoverBorderColor:"{surface.500}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.300}",color:"{surface.0}",disabledColor:"{surface.400}",placeholderColor:"{surface.400}",invalidPlaceholderColor:"{red.400}",floatLabelColor:"{surface.400}",floatLabelFocusColor:"{primary.color}",floatLabelActiveColor:"{surface.400}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.400}",shadow:"0 0 #0000, 0 0 #0000, 0 1px 2px 0 rgba(18, 18, 23, 0.05)"},text:{color:"{surface.0}",hoverColor:"{surface.0}",mutedColor:"{surface.400}",hoverMutedColor:"{surface.300}"},content:{background:"{surface.900}",hoverBackground:"{surface.800}",borderColor:"{surface.700}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"},popover:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"},modal:{background:"{surface.900}",borderColor:"{surface.700}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.800}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.500}",focusColor:"{surface.400}"}},optionGroup:{background:"transparent",color:"{text.muted.color}"}},navigation:{item:{focusBackground:"{surface.800}",activeBackground:"{surface.800}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.500}",focusColor:"{surface.400}",activeColor:"{surface.400}"}},submenuLabel:{background:"transparent",color:"{text.muted.color}"},submenuIcon:{color:"{surface.500}",focusColor:"{surface.400}",activeColor:"{surface.400}"}}}}}},index$1k={root:{borderRadius:"{content.border.radius}"}},index$1j={root:{padding:"1rem",background:"{content.background}",gap:"0.5rem",transitionDuration:"{transition.duration}"},item:{color:"{text.muted.color}",hoverColor:"{text.color}",borderRadius:"{content.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",hoverColor:"{navigation.item.icon.focus.color}"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},separator:{color:"{navigation.item.icon.color}"}},index$1i={root:{borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",gap:"0.5rem",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",iconOnlyWidth:"2.5rem",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"},label:{fontWeight:"500"},raisedShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"},badgeSize:"1rem",transitionDuration:"{form.field.transition.duration}"},colorScheme:{light:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",borderColor:"{surface.100}",hoverBorderColor:"{surface.200}",activeBorderColor:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}",focusRing:{color:"{surface.600}",shadow:"none"}},info:{background:"{sky.500}",hoverBackground:"{sky.600}",activeBackground:"{sky.700}",borderColor:"{sky.500}",hoverBorderColor:"{sky.600}",activeBorderColor:"{sky.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{sky.500}",shadow:"none"}},success:{background:"{green.500}",hoverBackground:"{green.600}",activeBackground:"{green.700}",borderColor:"{green.500}",hoverBorderColor:"{green.600}",activeBorderColor:"{green.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{green.500}",shadow:"none"}},warn:{background:"{orange.500}",hoverBackground:"{orange.600}",activeBackground:"{orange.700}",borderColor:"{orange.500}",hoverBorderColor:"{orange.600}",activeBorderColor:"{orange.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{orange.500}",shadow:"none"}},help:{background:"{purple.500}",hoverBackground:"{purple.600}",activeBackground:"{purple.700}",borderColor:"{purple.500}",hoverBorderColor:"{purple.600}",activeBorderColor:"{purple.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{purple.500}",shadow:"none"}},danger:{background:"{red.500}",hoverBackground:"{red.600}",activeBackground:"{red.700}",borderColor:"{red.500}",hoverBorderColor:"{red.600}",activeBorderColor:"{red.700}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{red.500}",shadow:"none"}},contrast:{background:"{surface.950}",hoverBackground:"{surface.900}",activeBackground:"{surface.800}",borderColor:"{surface.950}",hoverBorderColor:"{surface.900}",activeBorderColor:"{surface.800}",color:"{surface.0}",hoverColor:"{surface.0}",activeColor:"{surface.0}",focusRing:{color:"{surface.950}",shadow:"none"}}},outlined:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",borderColor:"{primary.200}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.200}",color:"{surface.500}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",borderColor:"{green.200}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",borderColor:"{sky.200}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",borderColor:"{orange.200}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",borderColor:"{purple.200}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",borderColor:"{red.200}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.700}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.200}",color:"{surface.700}"}},text:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.500}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.700}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}},dark:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",borderColor:"{surface.800}",hoverBorderColor:"{surface.700}",activeBorderColor:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}",focusRing:{color:"{surface.300}",shadow:"none"}},info:{background:"{sky.400}",hoverBackground:"{sky.300}",activeBackground:"{sky.200}",borderColor:"{sky.400}",hoverBorderColor:"{sky.300}",activeBorderColor:"{sky.200}",color:"{sky.950}",hoverColor:"{sky.950}",activeColor:"{sky.950}",focusRing:{color:"{sky.400}",shadow:"none"}},success:{background:"{green.400}",hoverBackground:"{green.300}",activeBackground:"{green.200}",borderColor:"{green.400}",hoverBorderColor:"{green.300}",activeBorderColor:"{green.200}",color:"{green.950}",hoverColor:"{green.950}",activeColor:"{green.950}",focusRing:{color:"{green.400}",shadow:"none"}},warn:{background:"{orange.400}",hoverBackground:"{orange.300}",activeBackground:"{orange.200}",borderColor:"{orange.400}",hoverBorderColor:"{orange.300}",activeBorderColor:"{orange.200}",color:"{orange.950}",hoverColor:"{orange.950}",activeColor:"{orange.950}",focusRing:{color:"{orange.400}",shadow:"none"}},help:{background:"{purple.400}",hoverBackground:"{purple.300}",activeBackground:"{purple.200}",borderColor:"{purple.400}",hoverBorderColor:"{purple.300}",activeBorderColor:"{purple.200}",color:"{purple.950}",hoverColor:"{purple.950}",activeColor:"{purple.950}",focusRing:{color:"{purple.400}",shadow:"none"}},danger:{background:"{red.400}",hoverBackground:"{red.300}",activeBackground:"{red.200}",borderColor:"{red.400}",hoverBorderColor:"{red.300}",activeBorderColor:"{red.200}",color:"{red.950}",hoverColor:"{red.950}",activeColor:"{red.950}",focusRing:{color:"{red.400}",shadow:"none"}},contrast:{background:"{surface.0}",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{surface.0}",hoverBorderColor:"{surface.100}",activeBorderColor:"{surface.200}",color:"{surface.950}",hoverColor:"{surface.950}",activeColor:"{surface.950}",focusRing:{color:"{surface.0}",shadow:"none"}}},outlined:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",borderColor:"{primary.700}",color:"{primary.color}"},secondary:{hoverBackground:"rgba(255,255,255,0.04)",activeBackground:"rgba(255,255,255,0.16)",borderColor:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",borderColor:"{green.700}",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",borderColor:"{sky.700}",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",borderColor:"{orange.700}",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",borderColor:"{purple.700}",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",borderColor:"{red.700}",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.500}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.600}",color:"{surface.0}"}},text:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",color:"{primary.color}"},secondary:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}}}},index$1h={root:{background:"{content.background}",borderRadius:"{border.radius.xl}",color:"{content.color}",shadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)"},body:{padding:"1.25rem",gap:"0.5rem"},caption:{gap:"0.5rem"},title:{fontSize:"1.25rem",fontWeight:"500"},subtitle:{color:"{text.muted.color}"}},index$1g={root:{transitionDuration:"{transition.duration}"},content:{gap:"0.25rem"},indicatorList:{padding:"1rem",gap:"0.5rem"},indicator:{width:"2rem",height:"0.5rem",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},colorScheme:{light:{indicator:{background:"{surface.200}",hoverBackground:"{surface.300}",activeBackground:"{primary.color}"}},dark:{indicator:{background:"{surface.700}",hoverBackground:"{surface.600}",activeBackground:"{primary.color}"}}}},index$1f={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",mobileIndent:"1rem"},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",icon:{color:"{list.option.icon.color}",focusColor:"{list.option.icon.focus.color}",size:"0.875rem"}},clearIcon:{color:"{form.field.icon.color}"}},index$1e={root:{borderRadius:"{border.radius.sm}",width:"1.25rem",height:"1.25rem",background:"{form.field.background}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.hover.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{width:"1rem",height:"1rem"},lg:{width:"1.5rem",height:"1.5rem"}},icon:{size:"0.875rem",color:"{form.field.color}",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"0.75rem"},lg:{size:"1rem"}}},index$1d={root:{borderRadius:"16px",paddingX:"0.75rem",paddingY:"0.5rem",gap:"0.5rem",transitionDuration:"{transition.duration}"},image:{width:"2rem",height:"2rem"},icon:{size:"1rem"},removeIcon:{size:"1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"}},colorScheme:{light:{root:{background:"{surface.100}",color:"{surface.800}"},icon:{color:"{surface.800}"},removeIcon:{color:"{surface.800}"}},dark:{root:{background:"{surface.800}",color:"{surface.0}"},icon:{color:"{surface.0}"},removeIcon:{color:"{surface.0}"}}}},index$1c={root:{transitionDuration:"{transition.duration}"},preview:{width:"1.5rem",height:"1.5rem",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},panel:{shadow:"{overlay.popover.shadow}",borderRadius:"{overlay.popover.borderRadius}"},colorScheme:{light:{panel:{background:"{surface.800}",borderColor:"{surface.900}"},handle:{color:"{surface.0}"}},dark:{panel:{background:"{surface.900}",borderColor:"{surface.700}"},handle:{color:"{surface.0}"}}}},index$1b={icon:{size:"2rem",color:"{overlay.modal.color}"},content:{gap:"1rem"}},index$1a={root:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},content:{padding:"{overlay.popover.padding}",gap:"1rem"},icon:{size:"1.5rem",color:"{overlay.popover.color}"},footer:{gap:"0.5rem",padding:"0 {overlay.popover.padding} {overlay.popover.padding} {overlay.popover.padding}"}},index$19={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{mobileIndent:"1rem"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"}},index$18={root:{transitionDuration:"{transition.duration}"},header:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},headerCell:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{datatable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},columnTitle:{fontWeight:"600"},row:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},bodyCell:{borderColor:"{datatable.border.color}",padding:"0.75rem 1rem"},footerCell:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",padding:"0.75rem 1rem"},columnFooter:{fontWeight:"600"},footer:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},dropPoint:{color:"{primary.color}"},columnResizerWidth:"0.5rem",resizeIndicator:{width:"1px",color:"{primary.color}"},sortIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},loadingIcon:{size:"2rem"},rowToggleButton:{hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},filter:{inlineGap:"0.5rem",overlaySelect:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},overlayPopover:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",shadow:"{overlay.popover.shadow}",padding:"{overlay.popover.padding}",gap:"0.5rem"},rule:{borderColor:"{content.border.color}"},constraintList:{padding:"{list.padding}",gap:"{list.gap}"},constraint:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",separator:{borderColor:"{content.border.color}"},padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"}},paginatorTop:{borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},colorScheme:{light:{root:{borderColor:"{content.border.color}"},row:{stripedBackground:"{surface.50}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},row:{stripedBackground:"{surface.950}"},bodyCell:{selectedBorderColor:"{primary.900}"}}}},index$17={root:{borderColor:"transparent",borderWidth:"0",borderRadius:"0",padding:"0"},header:{background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem",borderRadius:"0"},content:{background:"{content.background}",color:"{content.color}",borderColor:"transparent",borderWidth:"0",padding:"0",borderRadius:"0"},footer:{background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"1px 0 0 0",padding:"0.75rem 1rem",borderRadius:"0"},paginatorTop:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{content.border.color}",borderWidth:"1px 0 0 0"}},index$16={root:{transitionDuration:"{transition.duration}"},panel:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.popover.shadow}",padding:"{overlay.popover.padding}"},header:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",padding:"0 0 0.5rem 0"},title:{gap:"0.5rem",fontWeight:"500"},dropdown:{width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},inputIcon:{color:"{form.field.icon.color}"},selectMonth:{hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}"},selectYear:{hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}"},group:{borderColor:"{content.border.color}",gap:"{overlay.popover.padding}"},dayView:{margin:"0.5rem 0 0 0"},weekDay:{padding:"0.25rem",fontWeight:"500",color:"{content.color}"},date:{hoverBackground:"{content.hover.background}",selectedBackground:"{primary.color}",rangeSelectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{primary.contrast.color}",rangeSelectedColor:"{highlight.color}",width:"2rem",height:"2rem",borderRadius:"50%",padding:"0.25rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},monthView:{margin:"0.5rem 0 0 0"},month:{padding:"0.375rem",borderRadius:"{content.border.radius}"},yearView:{margin:"0.5rem 0 0 0"},year:{padding:"0.375rem",borderRadius:"{content.border.radius}"},buttonbar:{padding:"0.5rem 0 0 0",borderColor:"{content.border.color}"},timePicker:{padding:"0.5rem 0 0 0",borderColor:"{content.border.color}",gap:"0.5rem",buttonGap:"0.25rem"},colorScheme:{light:{dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"},today:{background:"{surface.200}",color:"{surface.900}"}},dark:{dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"},today:{background:"{surface.700}",color:"{surface.0}"}}}},index$15={root:{background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",borderRadius:"{overlay.modal.border.radius}",shadow:"{overlay.modal.shadow}"},header:{padding:"{overlay.modal.padding}",gap:"0.5rem"},title:{fontSize:"1.25rem",fontWeight:"600"},content:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},footer:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}",gap:"0.5rem"}},index$14={root:{borderColor:"{content.border.color}"},content:{background:"{content.background}",color:"{text.color}"},horizontal:{margin:"1rem 0",padding:"0 1rem",content:{padding:"0 0.5rem"}},vertical:{margin:"0 1rem",padding:"0.5rem 0",content:{padding:"0.5rem 0"}}},index$13={root:{background:"rgba(255, 255, 255, 0.1)",borderColor:"rgba(255, 255, 255, 0.2)",padding:"0.5rem",borderRadius:"{border.radius.xl}"},item:{borderRadius:"{content.border.radius}",padding:"0.5rem",size:"3rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},index$12={root:{background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",shadow:"{overlay.modal.shadow}"},header:{padding:"{overlay.modal.padding}"},title:{fontSize:"1.5rem",fontWeight:"600"},content:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},footer:{padding:"{overlay.modal.padding}"}},index$11={toolbar:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}"},toolbarItem:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}",padding:"{list.padding}"},overlayOption:{focusBackground:"{list.option.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},content:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"}},index$10={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",padding:"0 1.125rem 1.125rem 1.125rem",transitionDuration:"{transition.duration}"},legend:{background:"{content.background}",hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",borderRadius:"{content.border.radius}",borderWidth:"1px",borderColor:"transparent",padding:"0.5rem 0.75rem",gap:"0.5rem",fontWeight:"600",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},toggleIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}"},content:{padding:"0"}},index$$={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},header:{background:"transparent",color:"{text.color}",padding:"1.125rem",borderColor:"unset",borderWidth:"0",borderRadius:"0",gap:"0.5rem"},content:{highlightBorderColor:"{primary.color}",padding:"0 1.125rem 1.125rem 1.125rem",gap:"1rem"},file:{padding:"1rem",gap:"1rem",borderColor:"{content.border.color}",info:{gap:"0.5rem"}},fileList:{gap:"0.5rem"},progressbar:{height:"0.25rem"},basic:{gap:"0.5rem"}},index$_={root:{color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",activeColor:"{form.field.float.label.active.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",positionY:"{form.field.padding.y}",fontWeight:"500",active:{fontSize:"0.75rem",fontWeight:"400"}},over:{active:{top:"-1.25rem"}},in:{input:{paddingTop:"1.5rem",paddingBottom:"{form.field.padding.y}"},active:{top:"{form.field.padding.y}"}},on:{borderRadius:"{border.radius.xs}",active:{background:"{form.field.background}",padding:"0 0.125rem"}}},index$Z={root:{borderWidth:"1px",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},navButton:{background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.100}",hoverColor:"{surface.0}",size:"3rem",gutter:"0.5rem",prev:{borderRadius:"50%"},next:{borderRadius:"50%"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},navIcon:{size:"1.5rem"},thumbnailsContent:{background:"{content.background}",padding:"1rem 0.25rem"},thumbnailNavButton:{size:"2rem",borderRadius:"{content.border.radius}",gutter:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},thumbnailNavButtonIcon:{size:"1rem"},caption:{background:"rgba(0, 0, 0, 0.5)",color:"{surface.100}",padding:"1rem"},indicatorList:{gap:"0.5rem",padding:"1rem"},indicatorButton:{width:"1rem",height:"1rem",activeBackground:"{primary.color}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},insetIndicatorList:{background:"rgba(0, 0, 0, 0.5)"},insetIndicatorButton:{background:"rgba(255, 255, 255, 0.4)",hoverBackground:"rgba(255, 255, 255, 0.6)",activeBackground:"rgba(255, 255, 255, 0.9)"},closeButton:{size:"3rem",gutter:"0.5rem",background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.50}",hoverColor:"{surface.0}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},closeButtonIcon:{size:"1.5rem"},colorScheme:{light:{thumbnailNavButton:{hoverBackground:"{surface.100}",color:"{surface.600}",hoverColor:"{surface.700}"},indicatorButton:{background:"{surface.200}",hoverBackground:"{surface.300}"}},dark:{thumbnailNavButton:{hoverBackground:"{surface.700}",color:"{surface.400}",hoverColor:"{surface.0}"},indicatorButton:{background:"{surface.700}",hoverBackground:"{surface.600}"}}}},index$Y={icon:{color:"{form.field.icon.color}"}},index$X={root:{color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",top:"{form.field.padding.y}",fontSize:"0.75rem",fontWeight:"400"},input:{paddingTop:"1.5rem",paddingBottom:"{form.field.padding.y}"}},index$W={root:{transitionDuration:"{transition.duration}"},preview:{icon:{size:"1.5rem"},mask:{background:"{mask.background}",color:"{mask.color}"}},toolbar:{position:{left:"auto",right:"1rem",top:"1rem",bottom:"auto"},blur:"8px",background:"rgba(255,255,255,0.1)",borderColor:"rgba(255,255,255,0.2)",borderWidth:"1px",borderRadius:"30px",padding:".5rem",gap:"0.5rem"},action:{hoverBackground:"rgba(255,255,255,0.1)",color:"{surface.50}",hoverColor:"{surface.0}",size:"3rem",iconSize:"1.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},index$V={handle:{size:"15px",hoverSize:"30px",background:"rgba(255,255,255,0.3)",hoverBackground:"rgba(255,255,255,0.3)",borderColor:"unset",hoverBorderColor:"unset",borderWidth:"0",borderRadius:"50%",transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"rgba(255,255,255,0.3)",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},index$U={root:{padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",gap:"0.5rem"},text:{fontWeight:"500"},icon:{size:"1rem"},colorScheme:{light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}}}},index$T={root:{padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{transition.duration}"},display:{hoverBackground:"{content.hover.background}",hoverColor:"{content.hover.color}"}},index$S={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},chip:{borderRadius:"{border.radius.sm}"},colorScheme:{light:{chip:{focusBackground:"{surface.200}",color:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.700}",color:"{surface.0}"}}}},index$R={addon:{background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.icon.color}",borderRadius:"{form.field.border.radius}",padding:"0.5rem",minWidth:"2.5rem"}},index$Q={root:{transitionDuration:"{transition.duration}"},button:{width:"2.5rem",borderRadius:"{form.field.border.radius}",verticalPadding:"{form.field.padding.y}"},colorScheme:{light:{button:{background:"transparent",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.500}",activeColor:"{surface.600}"}},dark:{button:{background:"transparent",hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.300}",activeColor:"{surface.200}"}}}},index$P={root:{gap:"0.5rem"},input:{width:"2.5rem",sm:{width:"2rem"},lg:{width:"3rem"}}},index$O={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}}},index$N={root:{transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},value:{background:"{primary.color}"},range:{background:"{content.border.color}"},text:{color:"{text.muted.color}"}},index$M={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",borderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",shadow:"{form.field.shadow}",borderRadius:"{form.field.border.radius}",transitionDuration:"{form.field.transition.duration}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},checkmark:{color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},emptyMessage:{padding:"{list.option.padding}"},colorScheme:{light:{option:{stripedBackground:"{surface.50}"}},dark:{option:{stripedBackground:"{surface.900}"}}}},index$L={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",verticalOrientation:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},horizontalOrientation:{padding:"0.5rem 0.75rem",gap:"0.5rem"},transitionDuration:"{transition.duration}"},baseItem:{borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},overlay:{padding:"0",background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",shadow:"{overlay.navigation.shadow}",gap:"0.5rem"},submenu:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},submenuLabel:{padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background.}",color:"{navigation.submenu.label.color}"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"},mobileButton:{borderRadius:"50%",size:"1.75rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},index$K={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},submenuLabel:{padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background}",color:"{navigation.submenu.label.color}"},separator:{borderColor:"{content.border.color}"}},index$J={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",padding:"0.5rem 0.75rem",transitionDuration:"{transition.duration}"},baseItem:{borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}",background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",mobileIndent:"1rem",icon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"}},separator:{borderColor:"{content.border.color}"},mobileButton:{borderRadius:"50%",size:"1.75rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},index$I={root:{borderRadius:"{content.border.radius}",borderWidth:"1px",transitionDuration:"{transition.duration}"},content:{padding:"0.5rem 0.75rem",gap:"0.5rem",sm:{padding:"0.375rem 0.625rem"},lg:{padding:"0.625rem 0.875rem"}},text:{fontSize:"1rem",fontWeight:"500",sm:{fontSize:"0.875rem"},lg:{fontSize:"1.125rem"}},icon:{size:"1.125rem",sm:{size:"1rem"},lg:{size:"1.25rem"}},closeButton:{width:"1.75rem",height:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},closeIcon:{size:"1rem",sm:{size:"0.875rem"},lg:{size:"1.125rem"}},outlined:{root:{borderWidth:"1px"}},simple:{content:{padding:"0"}},colorScheme:{light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}},outlined:{color:"{blue.600}",borderColor:"{blue.600}"},simple:{color:"{blue.600}"}},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}},outlined:{color:"{green.600}",borderColor:"{green.600}"},simple:{color:"{green.600}"}},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}},outlined:{color:"{yellow.600}",borderColor:"{yellow.600}"},simple:{color:"{yellow.600}"}},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}},outlined:{color:"{red.600}",borderColor:"{red.600}"},simple:{color:"{red.600}"}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}},outlined:{color:"{surface.500}",borderColor:"{surface.500}"},simple:{color:"{surface.500}"}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}},outlined:{color:"{surface.950}",borderColor:"{surface.950}"},simple:{color:"{surface.950}"}}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}},outlined:{color:"{blue.500}",borderColor:"{blue.500}"},simple:{color:"{blue.500}"}},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}},outlined:{color:"{green.500}",borderColor:"{green.500}"},simple:{color:"{green.500}"}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}},outlined:{color:"{yellow.500}",borderColor:"{yellow.500}"},simple:{color:"{yellow.500}"}},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}},outlined:{color:"{red.500}",borderColor:"{red.500}"},simple:{color:"{red.500}"}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}},outlined:{color:"{surface.400}",borderColor:"{surface.400}"},simple:{color:"{surface.400}"}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}},outlined:{color:"{surface.0}",borderColor:"{surface.0}"},simple:{color:"{surface.0}"}}}}},index$H={root:{borderRadius:"{content.border.radius}",gap:"1rem"},meters:{background:"{content.border.color}",size:"0.5rem"},label:{gap:"0.5rem"},labelMarker:{size:"0.5rem"},labelIcon:{size:"1rem"},labelList:{verticalGap:"0.5rem",horizontalGap:"1rem"}},index$G={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",gap:"0.5rem"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},clearIcon:{color:"{form.field.icon.color}"},chip:{borderRadius:"{border.radius.sm}"},emptyMessage:{padding:"{list.option.padding}"}},index$F={root:{gap:"1.125rem"},controls:{gap:"0.5rem"}},index$E={root:{gutter:"0.75rem",transitionDuration:"{transition.duration}"},node:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{content.border.color}",color:"{content.color}",selectedColor:"{highlight.color}",hoverColor:"{content.hover.color}",padding:"0.75rem 1rem",toggleablePadding:"0.75rem 1rem 1.25rem 1rem",borderRadius:"{content.border.radius}"},nodeToggleButton:{background:"{content.background}",hoverBackground:"{content.hover.background}",borderColor:"{content.border.color}",color:"{text.muted.color}",hoverColor:"{text.color}",size:"1.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},connector:{color:"{content.border.color}",borderRadius:"{content.border.radius}",height:"24px"}},index$D={root:{outline:{width:"2px",color:"{content.background}"}}},index$C={root:{padding:"0.5rem 1rem",gap:"0.25rem",borderRadius:"{content.border.radius}",background:"{content.background}",color:"{content.color}",transitionDuration:"{transition.duration}"},navButton:{background:"transparent",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}",width:"2.5rem",height:"2.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},currentPageReport:{color:"{text.muted.color}"},jumpToPageInput:{maxWidth:"2.5rem"}},index$B={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},header:{background:"transparent",color:"{text.color}",padding:"1.125rem",borderColor:"{content.border.color}",borderWidth:"0",borderRadius:"0"},toggleableHeader:{padding:"0.375rem 1.125rem"},title:{fontWeight:"600"},content:{padding:"0 1.125rem 1.125rem 1.125rem"},footer:{padding:"0 1.125rem 1.125rem 1.125rem"}},index$A={root:{gap:"0.5rem",transitionDuration:"{transition.duration}"},panel:{background:"{content.background}",borderColor:"{content.border.color}",borderWidth:"1px",color:"{content.color}",padding:"0.25rem 0.25rem",borderRadius:"{content.border.radius}",first:{borderWidth:"1px",topBorderRadius:"{content.border.radius}"},last:{borderWidth:"1px",bottomBorderRadius:"{content.border.radius}"}},item:{focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",gap:"0.5rem",padding:"{navigation.item.padding}",borderRadius:"{content.border.radius}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},submenu:{indent:"1rem"},submenuIcon:{color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}"}},index$z={meter:{background:"{content.border.color}",borderRadius:"{content.border.radius}",height:".75rem"},icon:{color:"{form.field.icon.color}"},overlay:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",padding:"{overlay.popover.padding}",shadow:"{overlay.popover.shadow}"},content:{gap:"0.5rem"},colorScheme:{light:{strength:{weakBackground:"{red.500}",mediumBackground:"{amber.500}",strongBackground:"{green.500}"}},dark:{strength:{weakBackground:"{red.400}",mediumBackground:"{amber.400}",strongBackground:"{green.400}"}}}},index$y={root:{gap:"1.125rem"},controls:{gap:"0.5rem"}},index$x={root:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},content:{padding:"{overlay.popover.padding}"}},index$w={root:{background:"{content.border.color}",borderRadius:"{content.border.radius}",height:"1.25rem"},value:{background:"{primary.color}"},label:{color:"{primary.contrast.color}",fontSize:"0.75rem",fontWeight:"600"}},index$v={colorScheme:{light:{root:{"color.1":"{red.500}","color.2":"{blue.500}","color.3":"{green.500}","color.4":"{yellow.500}"}},dark:{root:{"color.1":"{red.400}","color.2":"{blue.400}","color.3":"{green.400}","color.4":"{yellow.400}"}}}},index$u={root:{width:"1.25rem",height:"1.25rem",background:"{form.field.background}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.hover.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{width:"1rem",height:"1rem"},lg:{width:"1.5rem",height:"1.5rem"}},icon:{size:"0.75rem",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"0.5rem"},lg:{size:"1rem"}}},index$t={root:{gap:"0.25rem",transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},icon:{size:"1rem",color:"{text.muted.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}},index$s={colorScheme:{light:{root:{background:"rgba(0,0,0,0.1)"}},dark:{root:{background:"rgba(255,255,255,0.3)"}}}},index$r={root:{transitionDuration:"{transition.duration}"},bar:{size:"9px",borderRadius:"{border.radius.sm}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},colorScheme:{light:{bar:{background:"{surface.100}"}},dark:{bar:{background:"{surface.800}"}}}},index$q={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},clearIcon:{color:"{form.field.icon.color}"},checkmark:{color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},emptyMessage:{padding:"{list.option.padding}"}},index$p={root:{borderRadius:"{form.field.border.radius}"},colorScheme:{light:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}},dark:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}}}},index$o={root:{borderRadius:"{content.border.radius}"},colorScheme:{light:{root:{background:"{surface.200}",animationBackground:"rgba(255,255,255,0.4)"}},dark:{root:{background:"rgba(255, 255, 255, 0.06)",animationBackground:"rgba(255, 255, 255, 0.04)"}}}},index$n={root:{transitionDuration:"{transition.duration}"},track:{background:"{content.border.color}",borderRadius:"{content.border.radius}",size:"3px"},range:{background:"{primary.color}"},handle:{width:"20px",height:"20px",borderRadius:"50%",background:"{content.border.color}",hoverBackground:"{content.border.color}",content:{borderRadius:"50%",hoverBackground:"{content.background}",width:"16px",height:"16px",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.08), 0px 1px 1px 0px rgba(0, 0, 0, 0.14)"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},colorScheme:{light:{handle:{contentBackground:"{surface.0}"}},dark:{handle:{contentBackground:"{surface.950}"}}}},index$m={root:{gap:"0.5rem",transitionDuration:"{transition.duration}"}},index$l={root:{borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",raisedShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"}},index$k={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",transitionDuration:"{transition.duration}"},gutter:{background:"{content.border.color}"},handle:{size:"24px",background:"transparent",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}}},index$j={root:{transitionDuration:"{transition.duration}"},separator:{background:"{content.border.color}",activeBackground:"{primary.color}",margin:"0 0 0 1.625rem",size:"2px"},step:{padding:"0.5rem",gap:"1rem"},stepHeader:{padding:"0",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},stepTitle:{color:"{text.muted.color}",activeColor:"{primary.color}",fontWeight:"500"},stepNumber:{background:"{content.background}",activeBackground:"{content.background}",borderColor:"{content.border.color}",activeBorderColor:"{content.border.color}",color:"{text.muted.color}",activeColor:"{primary.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"},steppanels:{padding:"0.875rem 0.5rem 1.125rem 0.5rem"},steppanel:{background:"{content.background}",color:"{content.color}",padding:"0",indent:"1rem"}},index$i={root:{transitionDuration:"{transition.duration}"},separator:{background:"{content.border.color}"},itemLink:{borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},itemLabel:{color:"{text.muted.color}",activeColor:"{primary.color}",fontWeight:"500"},itemNumber:{background:"{content.background}",activeBackground:"{content.background}",borderColor:"{content.border.color}",activeBorderColor:"{content.border.color}",color:"{text.muted.color}",activeColor:"{primary.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"}},index$h={root:{transitionDuration:"{transition.duration}"},tablist:{borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},item:{background:"transparent",hoverBackground:"transparent",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.125rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},itemIcon:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},activeBar:{height:"1px",bottom:"-1px",background:"{primary.color}"}},index$g={root:{transitionDuration:"{transition.duration}"},tablist:{borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},tab:{background:"transparent",hoverBackground:"transparent",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.125rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},tabpanel:{background:"{content.background}",color:"{content.color}",padding:"0.875rem 1.125rem 1.125rem 1.125rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"inset {focus.ring.shadow}"}},navButton:{background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",width:"2.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},activeBar:{height:"1px",bottom:"-1px",background:"{primary.color}"},colorScheme:{light:{navButton:{shadow:"0px 0px 10px 50px rgba(255, 255, 255, 0.6)"}},dark:{navButton:{shadow:"0px 0px 10px 50px color-mix(in srgb, {content.background}, transparent 50%)"}}}},index$f={root:{transitionDuration:"{transition.duration}"},tabList:{background:"{content.background}",borderColor:"{content.border.color}"},tab:{borderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},tabPanel:{background:"{content.background}",color:"{content.color}"},navButton:{background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}"},colorScheme:{light:{navButton:{shadow:"0px 0px 10px 50px rgba(255, 255, 255, 0.6)"}},dark:{navButton:{shadow:"0px 0px 10px 50px color-mix(in srgb, {content.background}, transparent 50%)"}}}},index$e={root:{fontSize:"0.875rem",fontWeight:"700",padding:"0.25rem 0.5rem",gap:"0.25rem",borderRadius:"{content.border.radius}",roundedBorderRadius:"{border.radius.xl}"},icon:{size:"0.75rem"},colorScheme:{light:{primary:{background:"{primary.100}",color:"{primary.700}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.100}",color:"{green.700}"},info:{background:"{sky.100}",color:"{sky.700}"},warn:{background:"{orange.100}",color:"{orange.700}"},danger:{background:"{red.100}",color:"{red.700}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"color-mix(in srgb, {primary.500}, transparent 84%)",color:"{primary.300}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",color:"{green.300}"},info:{background:"color-mix(in srgb, {sky.500}, transparent 84%)",color:"{sky.300}"},warn:{background:"color-mix(in srgb, {orange.500}, transparent 84%)",color:"{orange.300}"},danger:{background:"color-mix(in srgb, {red.500}, transparent 84%)",color:"{red.300}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}}},index$d={root:{background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.color}",height:"18rem",padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{form.field.border.radius}"},prompt:{gap:"0.25rem"},commandResponse:{margin:"2px 0"}},index$c={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}}},index$b={root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{mobileIndent:"1rem"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"}},index$a={event:{minHeight:"5rem"},horizontal:{eventContent:{padding:"1rem 0"}},vertical:{eventContent:{padding:"0 1rem"}},eventMarker:{size:"1.125rem",borderRadius:"50%",borderWidth:"2px",background:"{content.background}",borderColor:"{content.border.color}",content:{borderRadius:"50%",size:"0.375rem",background:"{primary.color}",insetShadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"}},eventConnector:{color:"{content.border.color}",size:"2px"}},index$9={root:{width:"25rem",borderRadius:"{content.border.radius}",borderWidth:"1px",transitionDuration:"{transition.duration}"},icon:{size:"1.125rem"},content:{padding:"{overlay.popover.padding}",gap:"0.5rem"},text:{gap:"0.5rem"},summary:{fontWeight:"500",fontSize:"1rem"},detail:{fontWeight:"500",fontSize:"0.875rem"},closeButton:{width:"1.75rem",height:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},closeIcon:{size:"1rem"},colorScheme:{light:{blur:"1.5px",info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}}},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}}},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}}},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",detailColor:"{surface.700}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}}}},dark:{blur:"10px",info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}}},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}}},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",detailColor:"{surface.0}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",detailColor:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}}}}}},index$8={root:{padding:"0.5rem 1rem",borderRadius:"{content.border.radius}",gap:"0.5rem",fontWeight:"500",disabledBackground:"{form.field.disabled.background}",disabledBorderColor:"{form.field.disabled.background}",disabledColor:"{form.field.disabled.color}",invalidBorderColor:"{form.field.invalid.border.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",padding:"0.375rem 0.75rem"},lg:{fontSize:"{form.field.lg.font.size}",padding:"0.625rem 1.25rem"}},icon:{disabledColor:"{form.field.disabled.color}"},content:{left:"0.25rem",top:"0.25rem",checkedShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.02), 0px 1px 2px 0px rgba(0, 0, 0, 0.04)"},colorScheme:{light:{root:{background:"{surface.100}",checkedBackground:"{surface.100}",hoverBackground:"{surface.100}",borderColor:"{surface.100}",color:"{surface.500}",hoverColor:"{surface.700}",checkedColor:"{surface.900}",checkedBorderColor:"{surface.100}"},content:{checkedBackground:"{surface.0}"},icon:{color:"{surface.500}",hoverColor:"{surface.700}",checkedColor:"{surface.900}"}},dark:{root:{background:"{surface.950}",checkedBackground:"{surface.950}",hoverBackground:"{surface.950}",borderColor:"{surface.950}",color:"{surface.400}",hoverColor:"{surface.300}",checkedColor:"{surface.0}",checkedBorderColor:"{surface.950}"},content:{checkedBackground:"{surface.800}"},icon:{color:"{surface.400}",hoverColor:"{surface.300}",checkedColor:"{surface.0}"}}}},index$7={root:{width:"2.5rem",height:"1.5rem",borderRadius:"30px",gap:"0.25rem",shadow:"{form.field.shadow}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},borderWidth:"1px",borderColor:"transparent",hoverBorderColor:"transparent",checkedBorderColor:"transparent",checkedHoverBorderColor:"transparent",invalidBorderColor:"{form.field.invalid.border.color}",transitionDuration:"{form.field.transition.duration}",slideDuration:"0.2s"},handle:{borderRadius:"50%",size:"1rem"},colorScheme:{light:{root:{background:"{surface.300}",disabledBackground:"{form.field.disabled.background}",hoverBackground:"{surface.400}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}"},handle:{background:"{surface.0}",disabledBackground:"{form.field.disabled.color}",hoverBackground:"{surface.0}",checkedBackground:"{surface.0}",checkedHoverBackground:"{surface.0}",color:"{text.muted.color}",hoverColor:"{text.color}",checkedColor:"{primary.color}",checkedHoverColor:"{primary.hover.color}"}},dark:{root:{background:"{surface.700}",disabledBackground:"{surface.600}",hoverBackground:"{surface.600}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.hover.color}"},handle:{background:"{surface.400}",disabledBackground:"{surface.900}",hoverBackground:"{surface.300}",checkedBackground:"{surface.900}",checkedHoverBackground:"{surface.900}",color:"{surface.900}",hoverColor:"{surface.800}",checkedColor:"{primary.color}",checkedHoverColor:"{primary.hover.color}"}}}},index$6={root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",padding:"0.75rem"}},index$5={root:{maxWidth:"12.5rem",gutter:"0.25rem",shadow:"{overlay.popover.shadow}",padding:"0.5rem 0.75rem",borderRadius:"{overlay.popover.border.radius}"},colorScheme:{light:{root:{background:"{surface.700}",color:"{surface.0}"}},dark:{root:{background:"{surface.700}",color:"{surface.0}"}}}},index$4={root:{background:"{content.background}",color:"{content.color}",padding:"1rem",gap:"2px",indent:"1rem",transitionDuration:"{transition.duration}"},node:{padding:"0.25rem 0.5rem",borderRadius:"{content.border.radius}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.color}",hoverColor:"{text.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},gap:"0.25rem"},nodeIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}"},nodeToggleButton:{borderRadius:"50%",size:"1.75rem",hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedHoverColor:"{primary.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},loadingIcon:{size:"2rem"},filter:{margin:"0 0 0.5rem 0"}},index$3={root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},tree:{padding:"{list.padding}"},clearIcon:{color:"{form.field.icon.color}"},emptyMessage:{padding:"{list.option.padding}"},chip:{borderRadius:"{border.radius.sm}"}},index$2={root:{transitionDuration:"{transition.duration}"},header:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},headerCell:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{treetable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},columnTitle:{fontWeight:"600"},row:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},bodyCell:{borderColor:"{treetable.border.color}",padding:"0.75rem 1rem",gap:"0.5rem"},footerCell:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",padding:"0.75rem 1rem"},columnFooter:{fontWeight:"600"},footer:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},columnResizerWidth:"0.5rem",resizeIndicator:{width:"1px",color:"{primary.color}"},sortIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},loadingIcon:{size:"2rem"},nodeToggleButton:{hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},paginatorTop:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},colorScheme:{light:{root:{borderColor:"{content.border.color}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},bodyCell:{selectedBorderColor:"{primary.900}"}}}},index$1={loader:{mask:{background:"{content.background}",color:"{text.muted.color}"},icon:{size:"2rem"}}};function _typeof(e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(o){_defineProperty(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return _typeof(t)=="symbol"?t:t+""}function _toPrimitive(e,t){if(_typeof(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(_typeof(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var index=_objectSpread(_objectSpread({},index$1l),{},{components:{accordion:index$1p,autocomplete:index$1o,avatar:index$1n,badge:index$1m,blockui:index$1k,breadcrumb:index$1j,button:index$1i,datepicker:index$16,card:index$1h,carousel:index$1g,cascadeselect:index$1f,checkbox:index$1e,chip:index$1d,colorpicker:index$1c,confirmdialog:index$1b,confirmpopup:index$1a,contextmenu:index$19,dataview:index$17,datatable:index$18,dialog:index$15,divider:index$14,dock:index$13,drawer:index$12,editor:index$11,fieldset:index$10,fileupload:index$$,iftalabel:index$X,floatlabel:index$_,galleria:index$Z,iconfield:index$Y,image:index$W,imagecompare:index$V,inlinemessage:index$U,inplace:index$T,inputchips:index$S,inputgroup:index$R,inputnumber:index$Q,inputotp:index$P,inputtext:index$O,knob:index$N,listbox:index$M,megamenu:index$L,menu:index$K,menubar:index$J,message:index$I,metergroup:index$H,multiselect:index$G,orderlist:index$F,organizationchart:index$E,overlaybadge:index$D,popover:index$x,paginator:index$C,password:index$z,panel:index$B,panelmenu:index$A,picklist:index$y,progressbar:index$w,progressspinner:index$v,radiobutton:index$u,rating:index$t,scrollpanel:index$r,select:index$q,selectbutton:index$p,skeleton:index$o,slider:index$n,speeddial:index$m,splitter:index$k,splitbutton:index$l,stepper:index$j,steps:index$i,tabmenu:index$h,tabs:index$g,tabview:index$f,textarea:index$c,tieredmenu:index$b,tag:index$e,terminal:index$d,timeline:index$a,togglebutton:index$8,toggleswitch:index$7,tree:index$4,treeselect:index$3,treetable:index$2,toast:index$9,toolbar:index$6,virtualscroller:index$1},directives:{tooltip:index$5,ripple:index$s}});const IndigoThemePreset=definePreset(index,{semantic:{primary:{50:"{indigo.50}",100:"{indigo.100}",200:"{indigo.200}",300:"{indigo.300}",400:"{indigo.400}",500:"{indigo.500}",600:"{indigo.600}",700:"{indigo.700}",800:"{indigo.800}",900:"{indigo.900}",950:"{indigo.950}"}}}),NotFoundView=defineComponent({name:"NotFoundView",setup(){const e=useRouter();return()=>h("div",{class:"container"},[h("div",{class:["my-4rem"]}),h(script$3,{header:"404",toggleable:!0,class:"my-3"},{default:()=>[h("div",{class:["flex flex-row flex-items-center flex-wrap gap-2 flex-content-around flex-justify-around"]},[h(script$4,{label:"go app",onClick:()=>{e.push({name:"app"})}}),h(script$4,{label:"go home",onClick:()=>{e.push({name:"home"})}}),h(script$4,{label:"go root",onClick:()=>{e.push({name:"root"})}})])]})])}}),AppView=defineComponent({name:"AppView",setup(){const{locale:e}=useI18n({useScope:"global"});console.log({i18nLocale:e.value});const t=useDarkModeStore(),{toggle:r}=t,{isOn:o}=storeToRefs(t),n=ref([{label:"",name:"app-config",icon:"pi pi-cog"},{label:"Function Test",name:"app-func-test",icon:"pi pi-wrench"},{label:"Chat Test",name:"app-chat-test",icon:"pi pi-comments"},{label:"Tool Test",name:"app-tool-test",icon:"pi pi-hammer"},{label:"",name:"app-notes",icon:"pi pi-clipboard"}]),a=ref(n.value[0].label),s=useRouter(),u=useRoute();return watch(()=>u.name,()=>{a.value=`${String(u.name??"")}`},{immediate:!0}),()=>h("div",{class:["--bg-var-p-zinc-800 overflow-auto","md:px-0.5rem md:py-0.75rem h-100dvh w-100dvw","stack-v"]},[h(script$5,{class:["md:max-w-768px md:mx-auto w-100%","border-none! bg-transparent!"],breakpoint:"0px",model:[{label:"theme",icon:`pi pi-${o.value?"moon":"sun"}`,command:()=>{r()}},{label:"Dev Ref",icon:"pi pi-external-link",items:[{label:"Dexie",items:[{label:"Dexie",url:"https://dexie.org",target:"_blank"},{label:"Design",url:"https://dexie.org/docs/Tutorial/Design",target:"_blank"},{label:"Version.stores()",url:"https://dexie.org/docs/Version/Version.stores()",target:"_blank"},{label:"IDB",url:"https://juejin.cn/post/7025592963002531871",target:"_blank"},{label:"supported-operations",url:"https://github.com/dexie/Dexie.js#supported-operations",target:"_blank"},{label:"Tutorial/Vue",url:"https://dexie.org/docs/Tutorial/Vue",target:"_blank"},{label:"liveQuery()",url:"https://dexie.org/docs/liveQuery()",target:"_blank"},{label:"version()",url:"https://dexie.org/docs/Dexie/Dexie.version()",target:"_blank"}]},{label:"D3",items:[{label:"d3-dispatch",url:"https://d3js.org/d3-dispatch",target:"_blank"}]},{label:"vue-icons",url:"https://vue-icons.kalimah-apps.com/getting-started.html",target:"_blank"},{label:"Prime Icons",url:"https://primevue.org/icons/",target:"_blank"},{label:"UnoCSS",url:"https://unocss.dev/interactive/",target:"_blank"},{label:"Vue I18n",url:"https://vue-i18n.intlify.dev/guide/advanced/composition.html",target:"_blank"},{label:"VueUse",url:"https://vueuse.org/",target:"_blank"},{label:"Vue Router",url:"https://router.vuejs.org/zh/guide/",target:"_blank"},{label:"Pinia",url:"https://pinia.vuejs.org/zh/core-concepts/",target:"_blank"},{label:"Pinia Persisted",url:"https://prazdevs.github.io/pinia-plugin-persistedstate/guide/config.html",target:"_blank"},{label:"zipson",url:"https://jgranstrom.github.io/zipson/",target:"_blank"},{label:"vue render func",url:"https://cn.vuejs.org/guide/extras/render-function.html",target:"_blank"},{label:"vuejs.org",url:"https://vuejs.org/",target:"_blank"},{label:"vuejs.dev",url:"https://vuejs.dev/",target:"_blank"},{label:"Dexie.js",url:"https://dexie.org/docs/Tutorial/Vue",target:"_blank"},{label:"test",url:"#daf/ewf/2efw3?asd:df=w23?df"}]}],pt:{rootList:{class:"ml-auto!"}}},{start:()=>h("span",{class:"font-bold mx-0.5rem"},"JS AI Agent")}),h("div",{class:["--md:rounded-0.5rem --md:border-2 md:max-w-768px md:mx-auto","w-100% --p-0.75rem bg-var-p-panel-background border-var-p-panel-border-color","bg-transparent! [background:transparent]!"],style:{"--p-panel-background":"transparent","--p-tabs-tablist-background":"transparent"}},[h(script$6,{class:"bg-transparent!",value:a.value,scrollable:!0},{default:()=>h(script$7,{class:"bg-transparent!",pt:{tabList:{class:"bg-transparent! [background:transparent]!"}}},{default:()=>n.value.map(i=>h(script$8,{class:"bg-transparent!",key:i.label,value:i.name,onClick:()=>{s.hasRoute(i==null?void 0:i.name)&&s.push({name:i.name})}},{default:()=>h("span",{class:"inline-flex flex-row flex-items-center gap-2"},[h("i",{class:i.icon}),h("span",{},i.label)])}))})})]),h("div",{class:["md:rounded-0.5rem md:border-3 md:max-w-768px md:mx-auto","w-100% p-0.75rem bg-var-p-panel-background border-var-p-panel-border-color overflow-auto","grow-1"]},[h(RouterView)])])}}),ToolButton=defineComponent({name:"ToolButton",props:["label","tip","command","class","tooltipProps","direction","focus"],setup(e){const t=resolveDirective("tooltip");return()=>{const{label:r,tip:o,command:n,class:a,tooltipProps:s,direction:u,focus:i,...c}=e;return o!=null&&o.length?withDirectives(h(script$4,{label:r,severity:"secondary",onClick:n,outlined:!0,...c,class:["p-var-p-button-padding-y!",a]}),[[t,{value:o??r,showDelay:300,hideDelay:300,...s},u??"bottom",{[u??"bottom"]:!0,focus:i}]]):h(script$4,{label:r,severity:"secondary",onClick:n,outlined:!0,...c,class:["p-var-p-button-padding-y!",a]})}}});function isString$2(e){return typeof e=="string"}const useTypedEffect=(e,t,r,o)=>{const n=ref(""),a=ref(1),s=t&&isString$2(e);return watch(()=>e,i=>{n.value=i,!s&&isString$2(i)?a.value=i.length:isString$2(i)&&isString$2(n.value)&&i.indexOf(n.value)!==0&&(a.value=1)}),onMounted(()=>{let i;const c=()=>{s&&a.value<e.length&&(i=window.setTimeout(()=>{a.value+=r,c()},o))};c(),onUnmounted(()=>{clearTimeout(i)})}),[s?e.slice(0,a.value):e,s&&a.value<e.length]},Bubble=defineComponent({name:"MyBubble",props:["avatarProps","loadingProps","placement","typing","loading","onTypingComplete","messageRender","content","prefixCls"],setup(e,{slots:t}){var l,g,f;const[r,o,n,a]=e.typing?[!0,(l=e.typing)==null?void 0:l.step,(g=e.typing)==null?void 0:g.interval,((f=e.typing)==null?void 0:f.suffix)??"|"]:[!1,0,0,""],[s,u]=useTypedEffect(e.content,r,o,n),i=e.messageRender?e.messageRender(s):s,c=ref(null),d=ref(!1);return onMounted(()=>{var p;!u&&!e.loading?d.value||(d.value=!0,(p=e.onTypingComplete)==null||p.call(e)):d.value=!1}),()=>{var p,m,y;return h("div",{ref:c,class:["my-bubble","---overflow-x-auto","stack-h w-100% flex-nowrap!",e.placement=="end"?"justify-content-end! flex-row-reverse!":"justify-content-start",e!=null&&e.avatarProps?"mt-0.75rem":null]},[h("div",{class:["my-bubble--avatar-wrapper","flex-basis-auto",e.placement=="end"?"items-end!":"items-start!"]},[h(script$9,{size:"large",...e==null?void 0:e.avatarProps,class:["overflow-hidden",e!=null&&e.avatarProps?null:"opacity-0 pointer-events-none",(p=e==null?void 0:e.avatarProps)==null?void 0:p.class]})]),h("div",{class:["my-bubble--content-wrapper","stack-v my-0.25rem flex-basis-auto",e.placement=="end"?"items-end!":"items-start!"]},[t.header&&((m=t.header)==null?void 0:m.call(t)),e.loading?h(script$a,{strokeWidth:6,animationDuration:".25s",...e==null?void 0:e.loadingProps,class:"w-28px! h-28px!"}):h(script$b,{pt:{body:{class:"p-0.75rem!"}}},{content:()=>[h("div",{class:"markdown-body",innerHTML:i}),u&&a]}),t.footer&&((y=t.footer)==null?void 0:y.call(t))]),h("div",{class:["my-bubble--tail","w-16rem"]})])}}}),read=async e=>new Promise((t,r)=>{try{e==null?e=[]:e!=null&&!Array.isArray(e)&&(e=[e]),(e==null?void 0:e.length)>1&&(e=[e[0]]);const n=e[0];if(n==null)throw"file is null.";const a=new FileReader;a.onload=s=>{t({status:"success",event:s,response:{textContent:String(a.result)}})},a.onerror=s=>{console.log("fileReader onerror"),r({status:"fail",error:": fileReader onerror",event:s,response:{}})},a.onabort=s=>{console.log("fileReader onabort"),r({status:"fail",error:": fileReader onabort",event:s,response:{}})},a.readAsText(n)}catch(o){r({status:"fail",error:`: ${o}`,err:o,response:{}})}}),processJsonLines=async e=>{const t=e.split(`
`);if(t.length==1)return JSON.parse(e);const r=[];for(const o of t)r.push(JSON.parse(o));return r},extractJson=async e=>{var o;if(e.status=="fail")throw e.error;if(((o=e.response)==null?void 0:o.textContent)==null)throw"response.response?.textContent is null.";const t=e.response.textContent;return JSON.parse(t)},extractJsonLines=async e=>{var o;if(e.status=="fail")throw e.error;if(((o=e.response)==null?void 0:o.textContent)==null)throw"response.response?.textContent is null.";const t=e.response.textContent;return await processJsonLines(t)},extractText=async e=>{var r;if(e.status=="fail")throw e.error;if(((r=e.response)==null?void 0:r.textContent)==null)throw"response.response?.textContent is null.";return e.response.textContent??""},readJsonOrJsonLines=async e=>{const t=await read(e);try{return{status:"success",data:await extractJsonLines(t),type:"jsonlines"}}catch(r){try{return{status:"success",data:await extractJson(t),type:"json"}}catch(o){try{return{status:"success",data:await extractText(t),type:"text"}}catch(n){return{status:"fail",error:[r,o,n],data:null}}}}},sleep$1=async e=>new Promise(t=>{setTimeout(()=>{t({})},e)}),AppFileView=defineComponent({setup(){const e=useToast(),t=ref(),r=ref([]),o=async n=>{console.log({fileBox:t.value}),t.value.files=n.files;const a=n.files.length,s=1/a;let u=0;t.value.progress=0;for(const i of n.files){try{await sleep$1(500);const c=await readJsonOrJsonLines(i);console.log({response:c,file:i}),r.value.push({file:i,response:c}),t.value.progress=t.value.progress+s,u+=1,t.value.$emit("progress",{originalEvent:n,progress:t.value.progress})}catch(c){console.error({error:c,file:i}),t.value.$emit("error",{files:t.value.files})}console.log({loadedCount:u,fileCount:a,progress:t.value.progress,files_length:t.value.files.length})}u===a?(t.value.fileLimit&&(t.value.uploadedFileCount+=t.value.files.length),t.value.$emit("upload",n)):t.value.$emit("error",{files:t.value.files}),t.value.uploadedFiles.push(...t.value.files),t.value.clear()};return()=>h(script$3,{header:"",toggleable:!0,collapsed:!0,class:"my-3"},{default:()=>[h(script$c,{ref:t,multiple:!0,customUpload:!0,chooseLabel:"",uploadLabel:"",cancelLabel:"",onUploader:n=>{o(n)},onUpload:n=>{console.log({dd:n}),e.add({severity:"success",summary:"Success",detail:"",life:3e3})}},{empty:()=>h("div",{},[""])}),r.value.length>0&&h("div",{class:["p-panel-title","mt-2rem mb-1.5rem"]},""),h("div",{class:["app-file-cards-box"]},[r.value.map(n=>h(script$b,{class:"app-file-card"},{title:()=>n.file.name,subtitle:()=>{var a;return(a=n.response)==null?void 0:a.type},content:()=>{var a;return h("div",{class:["stack-v","text-sm","overflow-auto","max-h-8rem"]},[h("pre",{class:[""]},JSON.stringify((a=n.response)==null?void 0:a.data,null,2).slice(0,1024))])},footer:()=>h("div",{class:["stack-h"]},[h(ToolButton,{icon:"pi pi-trash",text:!0,onClick:()=>{r.value=r.value.filter(a=>a!==n)}}),h(ToolButton,{icon:"pi pi-arrow-circle-right",label:"",tip:"",text:!0,onClick:()=>{var i;const a=(i=n.response)==null?void 0:i.data;let s=[];R.isString(a)?s=a.split(/\n+/):s=JSON.stringify(a,null,2).split(/\n+/),s=s.filter(c=>c.trim().length>0);const u=s.map((c,d)=>({text:c,meta:{idx:d}}));console.log({dataList:u})}})])}))])]})}}),$1="\n js JsToolAPI\n\n- **** JsTool\n  - **** `JsToolUsed`\n  -  JsTool \n  -  JsTool \n-  JsTool `CallStart``CallEnd` 1  JsTool\n\n\n\n-  JsTool  import \n-  JsTool  `console.log`  `JsTool.log` \n-  JsTool  `JsTool.set(key, value)`  `JsTool.get(key)`\n\n-  JsTool  lodash `_`\n-  JsTool  id  `the-only-art-board-wrap`  div  div  canvas  svg \n- js\n-  JsTool \n\n- `ReturnStart``ReturnEnd` `JsTool.log` \n-  JsTool \n  \n\n`ResultStart``ResultEnd`",TemplateJsTool$1={__KV__:{},__History__:[],log(e){const t=JSON.stringify(e);this.__History__.push(t),console.log(t)},clear(){this.__KV__={},this.__History__=[]},set(e,t){this.__KV__[e]=t},get(e){return this.__KV__[e]},last(){return this.__History__[this.__History__.length-1]},history(){return this.__History__},runCode(code){const frags=code.split(/(CallStart|CallEnd)/g);for(;frags[0]!=="CallStart";)if(frags.shift(),frags.length===0)return this.log("Error Code block not found."),this.last();for(frags.shift();frags[frags.length-1]!=="CallEnd";)if(frags.pop(),frags.length===0)return this.log("Error Code block not found."),this.last();frags.pop(),code=frags.join("").trim(),code=code.replace(/^```([Jj](ava)?[Ss](cript)?)?/g,""),code=code.replace(/```$/g,""),code=code.trim();try{eval(code)}catch(e){this.log(String(e))}return this.last()}},AppRootView=defineComponent({setup(){const e=useToast(),t=ref(""),r=reactive(TemplateJsTool$1),o=reactive({url:"",key:"",model:""}),n=a=>r.runCode(a);return onMounted(()=>{window.JsTool=r}),onUnmounted(()=>{window.JsTool=void 0}),()=>[h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h("p",{},[""])])}),h(script$3,{header:"",toggleable:!0,collapsed:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h(ToolButton,{icon:"pi pi-copy",label:"",command:()=>{clipboard.copy($1),e.add({severity:"info",summary:"",detail:"",life:2e3})}}),h("pre",{class:"overflow-auto w-full"},[$1])])}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v",id:"the-only-art-board-wrap"},[])}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v max-w-640px mx-auto max-h-80vh overflow-auto"},[h(Bubble,{content:"",loading:!1,placement:"start",avatarProps:{icon:"pi pi-face-smile"}}),h(script$d,{severity:"secondary",size:"small",class:"max-w-80% mx-auto -outline-width-0!",pt:{text:{class:"-fw-400!"}}},{default:()=>[""]}),h(script$d,{severity:"secondary",size:"small",class:"max-w-80% mx-auto -outline-width-0!",pt:{text:{class:"-fw-400!"}}},{default:()=>[""]}),h(Bubble,{content:"",loading:!1,placement:"start",avatarProps:{image:"/js-ai/images/avatar-robot.png"}},{header:()=>h("div",{class:"stack-h fw-500 text-red"},[""])}),h(Bubble,{content:"",loading:!1,placement:"start",avatarProps:{image:"/js-ai/images/avatar-master.png"}},{header:()=>h("div",{class:"stack-h fw-500 text-green"},[""])}),h(Bubble,{content:"",loading:!1,placement:"end",avatarProps:{image:"/js-ai/images/avatar-mou.png"}},{header:()=>h("div",{class:"stack-h fw-500"},[""])}),h(Bubble,{content:"",loading:!1,placement:"end",avatarProps:{icon:"pi pi-user"}}),h(Bubble,{content:"",loading:!1,placement:"start",avatarProps:{icon:"pi pi-face-smile"}},{header:()=>h("div",{class:"stack-h"},["Assistant"])}),h(Bubble,{content:"",loading:!1,placement:"start"}),h(Bubble,{content:"",loading:!1,placement:"end",avatarProps:{icon:"pi pi-user"}},{header:()=>h("div",{class:"stack-h"},["User"])}),h(Bubble,{content:"",loading:!1,placement:"end"})])}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem!"},{default:()=>h("div",{class:"stack-v"},[h(script$e,{fluid:!0,modelValue:t.value,"onUpdate:modelValue":a=>{t.value=a}}),h("div",{class:"stack-h"},[h(ToolButton,{icon:"pi pi-send",label:"",class:"ml-auto",command:()=>{var a;t.value.trim()!==""&&(e.add({severity:"info",summary:"",detail:` ${(a=t.value)==null?void 0:a.length} `,life:2e3}),t.value="")}}),h(ToolButton,{icon:"pi pi-play",label:"",command:()=>{n(t.value)}}),h(ToolButton,{icon:"pi pi-copy",label:"",command:()=>{var a,s;clipboard.copy(t.value),e.add({severity:"info",summary:"",detail:`${(a=t.value)==null?void 0:a.length} 
${t.value.slice(0,20)}${((s=t.value)==null?void 0:s.length)<=20?"":"..."}`,life:2e3})}}),h(ToolButton,{icon:"pi pi-trash",label:"",command:()=>{t.value=""}})])])}),h("div",{class:"grid grid-cols-2 gap-4"},[h(script$3,{header:"JsTool ",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h(ToolButton,{icon:"pi pi-copy",label:"",command:()=>{var a;clipboard.copy(`ReturnStart${r.last()}ReturnEnd`),e.add({severity:"info",summary:"",detail:` ${(a=`${r.last()}`)==null?void 0:a.length} `,life:2e3})}}),JSON.stringify(r.history(),null,2)])}),h(script$3,{header:"JsTool ",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[JSON.stringify(r.__KV__,null,2)])})]),h(AppFileView,{class:"w-full"}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem!"},{default:()=>h("div",{class:"grid grid-cols-3 gap-4"},[["url","key","model"].map((a,s)=>h(script$f,{variant:"on",class:"col-span-3 lg-col-span-1"},{default:()=>[h(script$g,{id:`${a}Input`,fluid:!0,key:`[${s}]${a}`,modelValue:o[a],"onUpdate:modelValue":u=>{o[a]=u},...a==="key"?{type:"password"}:{}}),h("label",{for:`${a}Input`},a)]}))])})]}}),default_format="RFC3986",formatters={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},RFC1738="RFC1738",is_array$1=Array.isArray,hex_table=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),limit=1024,encode$2=(e,t,r,o,n)=>{if(e.length===0)return e;let a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),r==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});let s="";for(let u=0;u<a.length;u+=limit){const i=a.length>=limit?a.slice(u,u+limit):a,c=[];for(let d=0;d<i.length;++d){let l=i.charCodeAt(d);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||n===RFC1738&&(l===40||l===41)){c[c.length]=i.charAt(d);continue}if(l<128){c[c.length]=hex_table[l];continue}if(l<2048){c[c.length]=hex_table[192|l>>6]+hex_table[128|l&63];continue}if(l<55296||l>=57344){c[c.length]=hex_table[224|l>>12]+hex_table[128|l>>6&63]+hex_table[128|l&63];continue}d+=1,l=65536+((l&1023)<<10|i.charCodeAt(d)&1023),c[c.length]=hex_table[240|l>>18]+hex_table[128|l>>12&63]+hex_table[128|l>>6&63]+hex_table[128|l&63]}s+=c.join("")}return s};function is_buffer(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function maybe_map(e,t){if(is_array$1(e)){const r=[];for(let o=0;o<e.length;o+=1)r.push(t(e[o]));return r}return t(e)}const has$1=Object.prototype.hasOwnProperty,array_prefix_generators={brackets(e){return String(e)+"[]"},comma:"comma",indices(e,t){return String(e)+"["+t+"]"},repeat(e){return String(e)}},is_array=Array.isArray,push=Array.prototype.push,push_to_array=function(e,t){push.apply(e,is_array(t)?t:[t])},to_ISO=Date.prototype.toISOString,defaults={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:encode$2,encodeValuesOnly:!1,format:default_format,formatter:formatters[default_format],indices:!1,serializeDate(e){return to_ISO.call(e)},skipNulls:!1,strictNullHandling:!1};function is_non_nullish_primitive(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"}const sentinel={};function inner_stringify(e,t,r,o,n,a,s,u,i,c,d,l,g,f,p,m,y,_){let x=e,E=_,C=0,D=!1;for(;(E=E.get(sentinel))!==void 0&&!D;){const I=E.get(e);if(C+=1,typeof I<"u"){if(I===C)throw new RangeError("Cyclic object value");D=!0}typeof E.get(sentinel)>"u"&&(C=0)}if(typeof c=="function"?x=c(t,x):x instanceof Date?x=g==null?void 0:g(x):r==="comma"&&is_array(x)&&(x=maybe_map(x,function(I){return I instanceof Date?g==null?void 0:g(I):I})),x===null){if(a)return i&&!m?i(t,defaults.encoder,y,"key",f):t;x=""}if(is_non_nullish_primitive(x)||is_buffer(x)){if(i){const I=m?t:i(t,defaults.encoder,y,"key",f);return[(p==null?void 0:p(I))+"="+(p==null?void 0:p(i(x,defaults.encoder,y,"value",f)))]}return[(p==null?void 0:p(t))+"="+(p==null?void 0:p(String(x)))]}const $=[];if(typeof x>"u")return $;let B;if(r==="comma"&&is_array(x))m&&i&&(x=maybe_map(x,i)),B=[{value:x.length>0?x.join(",")||null:void 0}];else if(is_array(c))B=c;else{const I=Object.keys(x);B=d?I.sort(d):I}const T=u?String(t).replace(/\./g,"%2E"):String(t),F=o&&is_array(x)&&x.length===1?T+"[]":T;if(n&&is_array(x)&&x.length===0)return F+"[]";for(let I=0;I<B.length;++I){const z=B[I],q=typeof z=="object"&&typeof z.value<"u"?z.value:x[z];if(s&&q===null)continue;const j=l&&u?z.replace(/\./g,"%2E"):z,J=is_array(x)?typeof r=="function"?r(F,j):F:F+(l?"."+j:"["+j+"]");_.set(e,C);const U=new WeakMap;U.set(sentinel,_),push_to_array($,inner_stringify(q,J,r,o,n,a,s,u,r==="comma"&&m&&is_array(x)?null:i,c,d,l,g,f,p,m,y,U))}return $}function normalize_stringify_options(e=defaults){if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=e.charset||defaults.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=default_format;if(typeof e.format<"u"){if(!has$1.call(formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}const o=formatters[r];let n=defaults.filter;(typeof e.filter=="function"||is_array(e.filter))&&(n=e.filter);let a;if(e.arrayFormat&&e.arrayFormat in array_prefix_generators?a=e.arrayFormat:"indices"in e?a=e.indices?"indices":"repeat":a=defaults.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const s=typeof e.allowDots>"u"?e.encodeDotInKeys?!0:defaults.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:defaults.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:defaults.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:defaults.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?defaults.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:defaults.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:defaults.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:defaults.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:defaults.encodeValuesOnly,filter:n,format:r,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:defaults.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:defaults.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:defaults.strictNullHandling}}function stringify(e,t={}){let r=e;const o=normalize_stringify_options(t);let n,a;typeof o.filter=="function"?(a=o.filter,r=a("",r)):is_array(o.filter)&&(a=o.filter,n=a);const s=[];if(typeof r!="object"||r===null)return"";const u=array_prefix_generators[o.arrayFormat],i=u==="comma"&&o.commaRoundTrip;n||(n=Object.keys(r)),o.sort&&n.sort(o.sort);const c=new WeakMap;for(let g=0;g<n.length;++g){const f=n[g];o.skipNulls&&r[f]===null||push_to_array(s,inner_stringify(r[f],f,u,i,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,c))}const d=s.join(o.delimiter);let l=o.addQueryPrefix===!0?"?":"";return o.charsetSentinel&&(o.charset==="iso-8859-1"?l+="utf8=%26%2310003%3B&":l+="utf8=%E2%9C%93&"),d.length>0?l+d:""}const VERSION="4.85.2";let auto=!1,kind,fetch$1,FormData$1,File$1,ReadableStream$1,getMultipartRequestOptions,getDefaultAgent,fileFromPath,isFsReadStream;function setShims(e,t={auto:!1}){if(auto)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(kind)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${kind}'\``);auto=t.auto,kind=e.kind,fetch$1=e.fetch,FormData$1=e.FormData,File$1=e.File,ReadableStream$1=e.ReadableStream,getMultipartRequestOptions=e.getMultipartRequestOptions,getDefaultAgent=e.getDefaultAgent,fileFromPath=e.fileFromPath,isFsReadStream=e.isFsReadStream}class MultipartBody{constructor(t){this.body=t}get[Symbol.toStringTag](){return"MultipartBody"}}function getRuntime({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let r,o,n,a;try{r=fetch,o=Request,n=Response,a=Headers}catch(s){throw new Error(`this environment is missing the following Web Fetch API type: ${s.message}. ${t}`)}return{kind:"web",fetch:r,Request:o,Response:n,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(s,u)=>({...u,body:new MultipartBody(s)}),getDefaultAgent:s=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:s=>!1}}kind||setShims(getRuntime(),{auto:!0});class OpenAIError extends Error{}class APIError extends OpenAIError{constructor(t,r,o,n){super(`${APIError.makeMessage(t,r,o)}`),this.status=t,this.headers=n,this.request_id=n==null?void 0:n["x-request-id"],this.error=r;const a=r;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(t,r,o){const n=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):o;return t&&n?`${t} ${n}`:t?`${t} status code (no body)`:n||"(no status code or body)"}static generate(t,r,o,n){if(!t||!n)return new APIConnectionError({message:o,cause:castToError(r)});const a=r==null?void 0:r.error;return t===400?new BadRequestError(t,a,o,n):t===401?new AuthenticationError(t,a,o,n):t===403?new PermissionDeniedError(t,a,o,n):t===404?new NotFoundError(t,a,o,n):t===409?new ConflictError(t,a,o,n):t===422?new UnprocessableEntityError(t,a,o,n):t===429?new RateLimitError(t,a,o,n):t>=500?new InternalServerError(t,a,o,n):new APIError(t,a,o,n)}}class APIUserAbortError extends APIError{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class APIConnectionError extends APIError{constructor({message:t,cause:r}){super(void 0,void 0,t||"Connection error.",void 0),r&&(this.cause=r)}}class APIConnectionTimeoutError extends APIConnectionError{constructor({message:t}={}){super({message:t??"Request timed out."})}}class BadRequestError extends APIError{}class AuthenticationError extends APIError{}class PermissionDeniedError extends APIError{}class NotFoundError extends APIError{}class ConflictError extends APIError{}class UnprocessableEntityError extends APIError{}class RateLimitError extends APIError{}class InternalServerError extends APIError{}class LengthFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the length limit was reached")}}class ContentFilterFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var __classPrivateFieldSet$4=function(e,t,r,o,n){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},__classPrivateFieldGet$5=function(e,t,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(e):o?o.value:t.get(e)},_LineDecoder_carriageReturnIndex;class LineDecoder{constructor(){_LineDecoder_carriageReturnIndex.set(this,void 0),this.buffer=new Uint8Array,__classPrivateFieldSet$4(this,_LineDecoder_carriageReturnIndex,null,"f")}decode(t){if(t==null)return[];const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let o=new Uint8Array(this.buffer.length+r.length);o.set(this.buffer),o.set(r,this.buffer.length),this.buffer=o;const n=[];let a;for(;(a=findNewlineIndex(this.buffer,__classPrivateFieldGet$5(this,_LineDecoder_carriageReturnIndex,"f")))!=null;){if(a.carriage&&__classPrivateFieldGet$5(this,_LineDecoder_carriageReturnIndex,"f")==null){__classPrivateFieldSet$4(this,_LineDecoder_carriageReturnIndex,a.index,"f");continue}if(__classPrivateFieldGet$5(this,_LineDecoder_carriageReturnIndex,"f")!=null&&(a.index!==__classPrivateFieldGet$5(this,_LineDecoder_carriageReturnIndex,"f")+1||a.carriage)){n.push(this.decodeText(this.buffer.slice(0,__classPrivateFieldGet$5(this,_LineDecoder_carriageReturnIndex,"f")-1))),this.buffer=this.buffer.slice(__classPrivateFieldGet$5(this,_LineDecoder_carriageReturnIndex,"f")),__classPrivateFieldSet$4(this,_LineDecoder_carriageReturnIndex,null,"f");continue}const s=__classPrivateFieldGet$5(this,_LineDecoder_carriageReturnIndex,"f")!==null?a.preceding-1:a.preceding,u=this.decodeText(this.buffer.slice(0,s));n.push(u),this.buffer=this.buffer.slice(a.index),__classPrivateFieldSet$4(this,_LineDecoder_carriageReturnIndex,null,"f")}return n}decodeText(t){if(t==null)return"";if(typeof t=="string")return t;if(typeof Buffer<"u"){if(t instanceof Buffer)return t.toString();if(t instanceof Uint8Array)return Buffer.from(t).toString();throw new OpenAIError(`Unexpected: received non-Uint8Array (${t.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(t instanceof Uint8Array||t instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(t);throw new OpenAIError(`Unexpected: received non-Uint8Array/ArrayBuffer (${t.constructor.name}) in a web platform. Please report this error.`)}throw new OpenAIError("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}_LineDecoder_carriageReturnIndex=new WeakMap;LineDecoder.NEWLINE_CHARS=new Set([`
`,"\r"]);LineDecoder.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function findNewlineIndex(e,t){for(let n=t??0;n<e.length;n++){if(e[n]===10)return{preceding:n,index:n+1,carriage:!1};if(e[n]===13)return{preceding:n,index:n+1,carriage:!0}}return null}function findDoubleNewlineIndex(e){for(let o=0;o<e.length-1;o++){if(e[o]===10&&e[o+1]===10||e[o]===13&&e[o+1]===13)return o+2;if(e[o]===13&&e[o+1]===10&&o+3<e.length&&e[o+2]===13&&e[o+3]===10)return o+4}return-1}function ReadableStreamToAsyncIterable(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const r=await t.read();return r!=null&&r.done&&t.releaseLock(),r}catch(r){throw t.releaseLock(),r}},async return(){const r=t.cancel();return t.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Stream{constructor(t,r){this.iterator=t,this.controller=r}static fromSSEResponse(t,r){let o=!1;async function*n(){if(o)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let a=!1;try{for await(const s of _iterSSEMessages(t,r))if(!a){if(s.data.startsWith("[DONE]")){a=!0;continue}if(s.event===null){let u;try{u=JSON.parse(s.data)}catch(i){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),i}if(u&&u.error)throw new APIError(void 0,u.error,void 0,void 0);yield u}else{let u;try{u=JSON.parse(s.data)}catch(i){throw console.error("Could not parse message into JSON:",s.data),console.error("From chunk:",s.raw),i}if(s.event=="error")throw new APIError(void 0,u.error,u.message,void 0);yield{event:s.event,data:u}}}a=!0}catch(s){if(s instanceof Error&&s.name==="AbortError")return;throw s}finally{a||r.abort()}}return new Stream(n,r)}static fromReadableStream(t,r){let o=!1;async function*n(){const s=new LineDecoder,u=ReadableStreamToAsyncIterable(t);for await(const i of u)for(const c of s.decode(i))yield c;for(const i of s.flush())yield i}async function*a(){if(o)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let s=!1;try{for await(const u of n())s||u&&(yield JSON.parse(u));s=!0}catch(u){if(u instanceof Error&&u.name==="AbortError")return;throw u}finally{s||r.abort()}}return new Stream(a,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],r=[],o=this.iterator(),n=a=>({next:()=>{if(a.length===0){const s=o.next();t.push(s),r.push(s)}return a.shift()}});return[new Stream(()=>n(t),this.controller),new Stream(()=>n(r),this.controller)]}toReadableStream(){const t=this;let r;const o=new TextEncoder;return new ReadableStream$1({async start(){r=t[Symbol.asyncIterator]()},async pull(n){try{const{value:a,done:s}=await r.next();if(s)return n.close();const u=o.encode(JSON.stringify(a)+`
`);n.enqueue(u)}catch(a){n.error(a)}},async cancel(){var n;await((n=r.return)==null?void 0:n.call(r))}})}}async function*_iterSSEMessages(e,t){if(!e.body)throw t.abort(),new OpenAIError("Attempted to iterate over a response with no body");const r=new SSEDecoder,o=new LineDecoder,n=ReadableStreamToAsyncIterable(e.body);for await(const a of iterSSEChunks(n))for(const s of o.decode(a)){const u=r.decode(s);u&&(yield u)}for(const a of o.flush()){const s=r.decode(a);s&&(yield s)}}async function*iterSSEChunks(e){let t=new Uint8Array;for await(const r of e){if(r==null)continue;const o=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?new TextEncoder().encode(r):r;let n=new Uint8Array(t.length+o.length);n.set(t),n.set(o,t.length),t=n;let a;for(;(a=findDoubleNewlineIndex(t))!==-1;)yield t.slice(0,a),t=t.slice(a)}t.length>0&&(yield t)}class SSEDecoder{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(t),t.startsWith(":"))return null;let[r,o,n]=partition(t,":");return n.startsWith(" ")&&(n=n.substring(1)),r==="event"?this.event=n:r==="data"&&this.data.push(n),null}}function partition(e,t){const r=e.indexOf(t);return r!==-1?[e.substring(0,r),t,e.substring(r+t.length)]:[e,"",""]}const isResponseLike=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function",isFileLike=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&isBlobLike(e),isBlobLike=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",isUploadable=e=>isFileLike(e)||isResponseLike(e)||isFsReadStream(e);async function toFile(e,t,r){var n;if(e=await e,isFileLike(e))return e;if(isResponseLike(e)){const a=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const s=isBlobLike(a)?[await a.arrayBuffer()]:[a];return new File$1(s,t,r)}const o=await getBytes(e);if(t||(t=getName(e)??"unknown_file"),!(r!=null&&r.type)){const a=(n=o[0])==null?void 0:n.type;typeof a=="string"&&(r={...r,type:a})}return new File$1(o,t,r)}async function getBytes(e){var r;let t=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(isBlobLike(e))t.push(await e.arrayBuffer());else if(isAsyncIterableIterator(e))for await(const o of e)t.push(o);else throw new Error(`Unexpected data type: ${typeof e}; constructor: ${(r=e==null?void 0:e.constructor)==null?void 0:r.name}; props: ${propsForError(e)}`);return t}function propsForError(e){return`[${Object.getOwnPropertyNames(e).map(r=>`"${r}"`).join(", ")}]`}function getName(e){var t;return getStringFromMaybeBuffer(e.name)||getStringFromMaybeBuffer(e.filename)||((t=getStringFromMaybeBuffer(e.path))==null?void 0:t.split(/[\\/]/).pop())}const getStringFromMaybeBuffer=e=>{if(typeof e=="string")return e;if(typeof Buffer<"u"&&e instanceof Buffer)return String(e)},isAsyncIterableIterator=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function",isMultipartBody=e=>e&&typeof e=="object"&&e.body&&e[Symbol.toStringTag]==="MultipartBody",multipartFormRequestOptions=async e=>{const t=await createForm(e.body);return getMultipartRequestOptions(t,e)},createForm=async e=>{const t=new FormData$1;return await Promise.all(Object.entries(e||{}).map(([r,o])=>addFormValue(t,r,o))),t},addFormValue=async(e,t,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")e.append(t,String(r));else if(isUploadable(r)){const o=await toFile(r);e.append(t,o)}else if(Array.isArray(r))await Promise.all(r.map(o=>addFormValue(e,t+"[]",o)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([o,n])=>addFormValue(e,`${t}[${o}]`,n)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var define_process_env_default={},__classPrivateFieldSet$3=function(e,t,r,o,n){if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r},__classPrivateFieldGet$4=function(e,t,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(e):o?o.value:t.get(e)},_AbstractPage_client;async function defaultParseResponse(e){const{response:t}=e;if(e.options.stream)return debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):Stream.fromSSEResponse(t,e.controller);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const r=t.headers.get("content-type");if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.includes("application/vnd.api+json"))){const a=await t.json();return debug("response",t.status,t.url,t.headers,a),_addRequestID(a,t)}const n=await t.text();return debug("response",t.status,t.url,t.headers,n),n}function _addRequestID(e,t){return!e||typeof e!="object"||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}class APIPromise extends Promise{constructor(t,r=defaultParseResponse){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=r}_thenUnwrap(t){return new APIPromise(this.responsePromise,async r=>_addRequestID(t(await this.parseResponse(r),r),r.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(t,r){return this.parse().then(t,r)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}class APIClient{constructor({baseURL:t,maxRetries:r=2,timeout:o=6e5,httpAgent:n,fetch:a}){this.baseURL=t,this.maxRetries=validatePositiveInteger("maxRetries",r),this.timeout=validatePositiveInteger("timeout",o),this.httpAgent=n,this.fetch=a??fetch$1}authHeaders(t){return{}}defaultHeaders(t){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...getPlatformHeaders(),...this.authHeaders(t)}}validateHeaders(t,r){}defaultIdempotencyKey(){return`stainless-node-retry-${uuid4()}`}get(t,r){return this.methodRequest("get",t,r)}post(t,r){return this.methodRequest("post",t,r)}patch(t,r){return this.methodRequest("patch",t,r)}put(t,r){return this.methodRequest("put",t,r)}delete(t,r){return this.methodRequest("delete",t,r)}methodRequest(t,r,o){return this.request(Promise.resolve(o).then(async n=>{const a=n&&isBlobLike(n==null?void 0:n.body)?new DataView(await n.body.arrayBuffer()):(n==null?void 0:n.body)instanceof DataView?n.body:(n==null?void 0:n.body)instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n==null?void 0:n.body)?new DataView(n.body.buffer):n==null?void 0:n.body;return{method:t,path:r,...n,body:a}}))}getAPIList(t,r,o){return this.requestAPIList(r,{method:"get",path:t,...o})}calculateContentLength(t){if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.byteLength(t,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(t).length.toString()}else if(ArrayBuffer.isView(t))return t.byteLength.toString();return null}buildRequest(t,{retryCount:r=0}={}){var p;t={...t};const{method:o,path:n,query:a,headers:s={}}=t,u=ArrayBuffer.isView(t.body)||t.__binaryRequest&&typeof t.body=="string"?t.body:isMultipartBody(t.body)?t.body.body:t.body?JSON.stringify(t.body,null,2):null,i=this.calculateContentLength(u),c=this.buildURL(n,a);"timeout"in t&&validatePositiveInteger("timeout",t.timeout),t.timeout=t.timeout??this.timeout;const d=t.httpAgent??this.httpAgent??getDefaultAgent(c),l=t.timeout+1e3;typeof((p=d==null?void 0:d.options)==null?void 0:p.timeout)=="number"&&l>(d.options.timeout??0)&&(d.options.timeout=l),this.idempotencyHeader&&o!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=t.idempotencyKey);const g=this.buildHeaders({options:t,headers:s,contentLength:i,retryCount:r});return{req:{method:o,...u&&{body:u},headers:g,...d&&{agent:d},signal:t.signal??null},url:c,timeout:t.timeout}}buildHeaders({options:t,headers:r,contentLength:o,retryCount:n}){const a={};o&&(a["content-length"]=o);const s=this.defaultHeaders(t);return applyHeadersMut(a,s),applyHeadersMut(a,r),isMultipartBody(t.body)&&kind!=="node"&&delete a["content-type"],getHeader(s,"x-stainless-retry-count")===void 0&&getHeader(r,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(n)),getHeader(s,"x-stainless-timeout")===void 0&&getHeader(r,"x-stainless-timeout")===void 0&&t.timeout&&(a["x-stainless-timeout"]=String(t.timeout)),this.validateHeaders(a,r),a}async prepareOptions(t){}async prepareRequest(t,{url:r,options:o}){}parseHeaders(t){return t?Symbol.iterator in t?Object.fromEntries(Array.from(t).map(r=>[...r])):{...t}:{}}makeStatusError(t,r,o,n){return APIError.generate(t,r,o,n)}request(t,r=null){return new APIPromise(this.makeRequest(t,r))}async makeRequest(t,r){var l,g;const o=await t,n=o.maxRetries??this.maxRetries;r==null&&(r=n),await this.prepareOptions(o);const{req:a,url:s,timeout:u}=this.buildRequest(o,{retryCount:n-r});if(await this.prepareRequest(a,{url:s,options:o}),debug("request",s,o,a.headers),(l=o.signal)!=null&&l.aborted)throw new APIUserAbortError;const i=new AbortController,c=await this.fetchWithTimeout(s,a,u,i).catch(castToError);if(c instanceof Error){if((g=o.signal)!=null&&g.aborted)throw new APIUserAbortError;if(r)return this.retryRequest(o,r);throw c.name==="AbortError"?new APIConnectionTimeoutError:new APIConnectionError({cause:c})}const d=createResponseHeaders(c.headers);if(!c.ok){if(r&&this.shouldRetry(c)){const x=`retrying, ${r} attempts remaining`;return debug(`response (error; ${x})`,c.status,s,d),this.retryRequest(o,r,d)}const f=await c.text().catch(x=>castToError(x).message),p=safeJSON(f),m=p?void 0:f;throw debug(`response (error; ${r?"(error; no more retries left)":"(error; not retryable)"})`,c.status,s,d,m),this.makeStatusError(c.status,p,m,d)}return{response:c,options:o,controller:i}}requestAPIList(t,r){const o=this.makeRequest(r,null);return new PagePromise(this,o,t)}buildURL(t,r){const o=isAbsoluteURL(t)?new URL(t):new URL(this.baseURL+(this.baseURL.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),n=this.defaultQuery();return isEmptyObj(n)||(r={...n,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(o.search=this.stringifyQuery(r)),o.toString()}stringifyQuery(t){return Object.entries(t).filter(([r,o])=>typeof o<"u").map(([r,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(r)}=`;throw new OpenAIError(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(t,r,o,n){const{signal:a,...s}=r||{};a&&a.addEventListener("abort",()=>n.abort());const u=setTimeout(()=>n.abort(),o),i={signal:n.signal,...s};return i.method&&(i.method=i.method.toUpperCase()),this.fetch.call(void 0,t,i).finally(()=>{clearTimeout(u)})}shouldRetry(t){const r=t.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,r,o){let n;const a=o==null?void 0:o["retry-after-ms"];if(a){const u=parseFloat(a);Number.isNaN(u)||(n=u)}const s=o==null?void 0:o["retry-after"];if(s&&!n){const u=parseFloat(s);Number.isNaN(u)?n=Date.parse(s)-Date.now():n=u*1e3}if(!(n&&0<=n&&n<60*1e3)){const u=t.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(r,u)}return await sleep(n),this.makeRequest(t,r-1)}calculateDefaultRetryTimeoutMillis(t,r){const a=r-t,s=Math.min(.5*Math.pow(2,a),8),u=1-Math.random()*.25;return s*u*1e3}getUserAgent(){return`${this.constructor.name}/JS ${VERSION}`}}class AbstractPage{constructor(t,r,o,n){_AbstractPage_client.set(this,void 0),__classPrivateFieldSet$3(this,_AbstractPage_client,t),this.options=n,this.response=r,this.body=o}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const t=this.nextPageInfo();if(!t)throw new OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const r={...this.options};if("params"in t&&typeof r.query=="object")r.query={...r.query,...t.params};else if("url"in t){const o=[...Object.entries(r.query||{}),...t.url.searchParams.entries()];for(const[n,a]of o)t.url.searchParams.set(n,a);r.query=void 0,r.path=t.url.toString()}return await __classPrivateFieldGet$4(this,_AbstractPage_client,"f").requestAPIList(this.constructor,r)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(_AbstractPage_client=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const r of t.getPaginatedItems())yield r}}class PagePromise extends APIPromise{constructor(t,r,o){super(r,async n=>new o(t,n.response,await defaultParseResponse(n),n.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const r of t)yield r}}const createResponseHeaders=e=>new Proxy(Object.fromEntries(e.entries()),{get(t,r){const o=r.toString();return t[o.toLowerCase()]||t[o]}}),requestOptionsKeys={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},isRequestOptions=e=>typeof e=="object"&&e!==null&&!isEmptyObj(e)&&Object.keys(e).every(t=>hasOwn(requestOptionsKeys,t)),getPlatformProperties=()=>{var t;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(Deno.build.os),"X-Stainless-Arch":normalizeArch(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((t=Deno.version)==null?void 0:t.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(process.platform),"X-Stainless-Arch":normalizeArch(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=getBrowserInfo();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function getBrowserInfo(){if(typeof navigator>"u"||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:r}of e){const o=r.exec(navigator.userAgent);if(o){const n=o[1]||0,a=o[2]||0,s=o[3]||0;return{browser:t,version:`${n}.${a}.${s}`}}}return null}const normalizeArch=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",normalizePlatform=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown");let _platformHeaders;const getPlatformHeaders=()=>_platformHeaders??(_platformHeaders=getPlatformProperties()),safeJSON=e=>{try{return JSON.parse(e)}catch{return}},startsWithSchemeRegexp=/^[a-z][a-z0-9+.-]*:/i,isAbsoluteURL=e=>startsWithSchemeRegexp.test(e),sleep=e=>new Promise(t=>setTimeout(t,e)),validatePositiveInteger=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new OpenAIError(`${e} must be an integer`);if(t<0)throw new OpenAIError(`${e} must be a positive integer`);return t},castToError=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},readEnv=e=>{var t,r,o,n;if(typeof process<"u")return((t=define_process_env_default==null?void 0:define_process_env_default[e])==null?void 0:t.trim())??void 0;if(typeof Deno<"u")return(n=(o=(r=Deno.env)==null?void 0:r.get)==null?void 0:o.call(r,e))==null?void 0:n.trim()};function isEmptyObj(e){if(!e)return!0;for(const t in e)return!1;return!0}function hasOwn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function applyHeadersMut(e,t){for(const r in t){if(!hasOwn(t,r))continue;const o=r.toLowerCase();if(!o)continue;const n=t[r];n===null?delete e[o]:n!==void 0&&(e[o]=n)}}const SENSITIVE_HEADERS=new Set(["authorization","api-key"]);function debug(e,...t){if(typeof process<"u"&&(define_process_env_default==null?void 0:define_process_env_default.DEBUG)==="true"){const r=t.map(o=>{if(!o)return o;if(o.headers){const a={...o,headers:{...o.headers}};for(const s in o.headers)SENSITIVE_HEADERS.has(s.toLowerCase())&&(a.headers[s]="REDACTED");return a}let n=null;for(const a in o)SENSITIVE_HEADERS.has(a.toLowerCase())&&(n??(n={...o}),n[a]="REDACTED");return n??o});console.log(`OpenAI:DEBUG:${e}`,...r)}}const uuid4=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)}),isRunningInBrowser=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",isHeadersProtocol=e=>typeof(e==null?void 0:e.get)=="function",getHeader=(e,t)=>{var o;const r=t.toLowerCase();if(isHeadersProtocol(e)){const n=((o=t[0])==null?void 0:o.toUpperCase())+t.substring(1).replace(/([^\w])(\w)/g,(a,s,u)=>s+u.toUpperCase());for(const a of[t,r,t.toUpperCase(),n]){const s=e.get(a);if(s)return s}}for(const[n,a]of Object.entries(e))if(n.toLowerCase()===r)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${t} header, using the first entry.`),a[0]):a};function isObj(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}class Page extends AbstractPage{constructor(t,r,o,n){super(t,r,o,n),this.data=o.data||[],this.object=o.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class CursorPage extends AbstractPage{constructor(t,r,o,n){super(t,r,o,n),this.data=o.data||[],this.has_more=o.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const t=this.nextPageInfo();if(!t)return null;if("params"in t)return t.params;const r=Object.fromEntries(t.url.searchParams);return Object.keys(r).length?r:null}nextPageInfo(){var o;const t=this.getPaginatedItems();if(!t.length)return null;const r=(o=t[t.length-1])==null?void 0:o.id;return r?{params:{after:r}}:null}}class APIResource{constructor(t){this._client=t}}let Messages$1=class extends APIResource{list(t,r={},o){return isRequestOptions(r)?this.list(t,{},r):this._client.getAPIList(`/chat/completions/${t}/messages`,ChatCompletionStoreMessagesPage,{query:r,...o})}},Completions$2=class extends APIResource{constructor(){super(...arguments),this.messages=new Messages$1(this._client)}create(t,r){return this._client.post("/chat/completions",{body:t,...r,stream:t.stream??!1})}retrieve(t,r){return this._client.get(`/chat/completions/${t}`,r)}update(t,r,o){return this._client.post(`/chat/completions/${t}`,{body:r,...o})}list(t={},r){return isRequestOptions(t)?this.list({},t):this._client.getAPIList("/chat/completions",ChatCompletionsPage,{query:t,...r})}del(t,r){return this._client.delete(`/chat/completions/${t}`,r)}};class ChatCompletionsPage extends CursorPage{}class ChatCompletionStoreMessagesPage extends CursorPage{}Completions$2.ChatCompletionsPage=ChatCompletionsPage;Completions$2.Messages=Messages$1;let Chat$1=class extends APIResource{constructor(){super(...arguments),this.completions=new Completions$2(this._client)}};Chat$1.Completions=Completions$2;Chat$1.ChatCompletionsPage=ChatCompletionsPage;class Speech extends APIResource{create(t,r){return this._client.post("/audio/speech",{body:t,...r,headers:{Accept:"application/octet-stream",...r==null?void 0:r.headers},__binaryResponse:!0})}}class Transcriptions extends APIResource{create(t,r){return this._client.post("/audio/transcriptions",multipartFormRequestOptions({body:t,...r,__metadata:{model:t.model}}))}}class Translations extends APIResource{create(t,r){return this._client.post("/audio/translations",multipartFormRequestOptions({body:t,...r,__metadata:{model:t.model}}))}}class Audio extends APIResource{constructor(){super(...arguments),this.transcriptions=new Transcriptions(this._client),this.translations=new Translations(this._client),this.speech=new Speech(this._client)}}Audio.Transcriptions=Transcriptions;Audio.Translations=Translations;Audio.Speech=Speech;class Batches extends APIResource{create(t,r){return this._client.post("/batches",{body:t,...r})}retrieve(t,r){return this._client.get(`/batches/${t}`,r)}list(t={},r){return isRequestOptions(t)?this.list({},t):this._client.getAPIList("/batches",BatchesPage,{query:t,...r})}cancel(t,r){return this._client.post(`/batches/${t}/cancel`,r)}}class BatchesPage extends CursorPage{}Batches.BatchesPage=BatchesPage;class Assistants extends APIResource{create(t,r){return this._client.post("/assistants",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,r){return this._client.get(`/assistants/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,r,o){return this._client.post(`/assistants/${t}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(t={},r){return isRequestOptions(t)?this.list({},t):this._client.getAPIList("/assistants",AssistantsPage,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,r){return this._client.delete(`/assistants/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class AssistantsPage extends CursorPage{}Assistants.AssistantsPage=AssistantsPage;function isRunnableFunctionWithParse(e){return typeof e.parse=="function"}const isAssistantMessage=e=>(e==null?void 0:e.role)==="assistant",isFunctionMessage=e=>(e==null?void 0:e.role)==="function",isToolMessage=e=>(e==null?void 0:e.role)==="tool";var __classPrivateFieldSet$2=function(e,t,r,o,n){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},__classPrivateFieldGet$3=function(e,t,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(e):o?o.value:t.get(e)},_EventStream_instances,_EventStream_connectedPromise,_EventStream_resolveConnectedPromise,_EventStream_rejectConnectedPromise,_EventStream_endPromise,_EventStream_resolveEndPromise,_EventStream_rejectEndPromise,_EventStream_listeners,_EventStream_ended,_EventStream_errored,_EventStream_aborted,_EventStream_catchingPromiseCreated,_EventStream_handleError;class EventStream{constructor(){_EventStream_instances.add(this),this.controller=new AbortController,_EventStream_connectedPromise.set(this,void 0),_EventStream_resolveConnectedPromise.set(this,()=>{}),_EventStream_rejectConnectedPromise.set(this,()=>{}),_EventStream_endPromise.set(this,void 0),_EventStream_resolveEndPromise.set(this,()=>{}),_EventStream_rejectEndPromise.set(this,()=>{}),_EventStream_listeners.set(this,{}),_EventStream_ended.set(this,!1),_EventStream_errored.set(this,!1),_EventStream_aborted.set(this,!1),_EventStream_catchingPromiseCreated.set(this,!1),__classPrivateFieldSet$2(this,_EventStream_connectedPromise,new Promise((t,r)=>{__classPrivateFieldSet$2(this,_EventStream_resolveConnectedPromise,t,"f"),__classPrivateFieldSet$2(this,_EventStream_rejectConnectedPromise,r,"f")}),"f"),__classPrivateFieldSet$2(this,_EventStream_endPromise,new Promise((t,r)=>{__classPrivateFieldSet$2(this,_EventStream_resolveEndPromise,t,"f"),__classPrivateFieldSet$2(this,_EventStream_rejectEndPromise,r,"f")}),"f"),__classPrivateFieldGet$3(this,_EventStream_connectedPromise,"f").catch(()=>{}),__classPrivateFieldGet$3(this,_EventStream_endPromise,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},__classPrivateFieldGet$3(this,_EventStream_instances,"m",_EventStream_handleError).bind(this))},0)}_connected(){this.ended||(__classPrivateFieldGet$3(this,_EventStream_resolveConnectedPromise,"f").call(this),this._emit("connect"))}get ended(){return __classPrivateFieldGet$3(this,_EventStream_ended,"f")}get errored(){return __classPrivateFieldGet$3(this,_EventStream_errored,"f")}get aborted(){return __classPrivateFieldGet$3(this,_EventStream_aborted,"f")}abort(){this.controller.abort()}on(t,r){return(__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[t]||(__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[t]=[])).push({listener:r}),this}off(t,r){const o=__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[t];if(!o)return this;const n=o.findIndex(a=>a.listener===r);return n>=0&&o.splice(n,1),this}once(t,r){return(__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[t]||(__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[t]=[])).push({listener:r,once:!0}),this}emitted(t){return new Promise((r,o)=>{__classPrivateFieldSet$2(this,_EventStream_catchingPromiseCreated,!0,"f"),t!=="error"&&this.once("error",o),this.once(t,r)})}async done(){__classPrivateFieldSet$2(this,_EventStream_catchingPromiseCreated,!0,"f"),await __classPrivateFieldGet$3(this,_EventStream_endPromise,"f")}_emit(t,...r){if(__classPrivateFieldGet$3(this,_EventStream_ended,"f"))return;t==="end"&&(__classPrivateFieldSet$2(this,_EventStream_ended,!0,"f"),__classPrivateFieldGet$3(this,_EventStream_resolveEndPromise,"f").call(this));const o=__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[t];if(o&&(__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[t]=o.filter(n=>!n.once),o.forEach(({listener:n})=>n(...r))),t==="abort"){const n=r[0];!__classPrivateFieldGet$3(this,_EventStream_catchingPromiseCreated,"f")&&!(o!=null&&o.length)&&Promise.reject(n),__classPrivateFieldGet$3(this,_EventStream_rejectConnectedPromise,"f").call(this,n),__classPrivateFieldGet$3(this,_EventStream_rejectEndPromise,"f").call(this,n),this._emit("end");return}if(t==="error"){const n=r[0];!__classPrivateFieldGet$3(this,_EventStream_catchingPromiseCreated,"f")&&!(o!=null&&o.length)&&Promise.reject(n),__classPrivateFieldGet$3(this,_EventStream_rejectConnectedPromise,"f").call(this,n),__classPrivateFieldGet$3(this,_EventStream_rejectEndPromise,"f").call(this,n),this._emit("end")}}_emitFinal(){}}_EventStream_connectedPromise=new WeakMap,_EventStream_resolveConnectedPromise=new WeakMap,_EventStream_rejectConnectedPromise=new WeakMap,_EventStream_endPromise=new WeakMap,_EventStream_resolveEndPromise=new WeakMap,_EventStream_rejectEndPromise=new WeakMap,_EventStream_listeners=new WeakMap,_EventStream_ended=new WeakMap,_EventStream_errored=new WeakMap,_EventStream_aborted=new WeakMap,_EventStream_catchingPromiseCreated=new WeakMap,_EventStream_instances=new WeakSet,_EventStream_handleError=function e(t){if(__classPrivateFieldSet$2(this,_EventStream_errored,!0,"f"),t instanceof Error&&t.name==="AbortError"&&(t=new APIUserAbortError),t instanceof APIUserAbortError)return __classPrivateFieldSet$2(this,_EventStream_aborted,!0,"f"),this._emit("abort",t);if(t instanceof OpenAIError)return this._emit("error",t);if(t instanceof Error){const r=new OpenAIError(t.message);return r.cause=t,this._emit("error",r)}return this._emit("error",new OpenAIError(String(t)))};function isAutoParsableResponseFormat(e){return(e==null?void 0:e.$brand)==="auto-parseable-response-format"}function isAutoParsableTool(e){return(e==null?void 0:e.$brand)==="auto-parseable-tool"}function maybeParseChatCompletion(e,t){return!t||!hasAutoParseableInput(t)?{...e,choices:e.choices.map(r=>({...r,message:{...r.message,parsed:null,tool_calls:r.message.tool_calls??[]}}))}:parseChatCompletion(e,t)}function parseChatCompletion(e,t){const r=e.choices.map(o=>{var n;if(o.finish_reason==="length")throw new LengthFinishReasonError;if(o.finish_reason==="content_filter")throw new ContentFilterFinishReasonError;return{...o,message:{...o.message,tool_calls:((n=o.message.tool_calls)==null?void 0:n.map(a=>parseToolCall(t,a)))??[],parsed:o.message.content&&!o.message.refusal?parseResponseFormat(t,o.message.content):null}}});return{...e,choices:r}}function parseResponseFormat(e,t){var r,o;return((r=e.response_format)==null?void 0:r.type)!=="json_schema"?null:((o=e.response_format)==null?void 0:o.type)==="json_schema"?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function parseToolCall(e,t){var o;const r=(o=e.tools)==null?void 0:o.find(n=>{var a;return((a=n.function)==null?void 0:a.name)===t.function.name});return{...t,function:{...t.function,parsed_arguments:isAutoParsableTool(r)?r.$parseRaw(t.function.arguments):r!=null&&r.function.strict?JSON.parse(t.function.arguments):null}}}function shouldParseToolCall(e,t){var o;if(!e)return!1;const r=(o=e.tools)==null?void 0:o.find(n=>{var a;return((a=n.function)==null?void 0:a.name)===t.function.name});return isAutoParsableTool(r)||(r==null?void 0:r.function.strict)||!1}function hasAutoParseableInput(e){var t;return isAutoParsableResponseFormat(e.response_format)?!0:((t=e.tools)==null?void 0:t.some(r=>isAutoParsableTool(r)||r.type==="function"&&r.function.strict===!0))??!1}function validateInputTools(e){for(const t of e??[]){if(t.type!=="function")throw new OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new OpenAIError(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var __classPrivateFieldGet$2=function(e,t,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(e):o?o.value:t.get(e)},_AbstractChatCompletionRunner_instances,_AbstractChatCompletionRunner_getFinalContent,_AbstractChatCompletionRunner_getFinalMessage,_AbstractChatCompletionRunner_getFinalFunctionCall,_AbstractChatCompletionRunner_getFinalFunctionCallResult,_AbstractChatCompletionRunner_calculateTotalUsage,_AbstractChatCompletionRunner_validateParams,_AbstractChatCompletionRunner_stringifyFunctionCallResult;const DEFAULT_MAX_CHAT_COMPLETIONS=10;class AbstractChatCompletionRunner extends EventStream{constructor(){super(...arguments),_AbstractChatCompletionRunner_instances.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){var o;this._chatCompletions.push(t),this._emit("chatCompletion",t);const r=(o=t.choices[0])==null?void 0:o.message;return r&&this._addMessage(r),t}_addMessage(t,r=!0){if("content"in t||(t.content=null),this.messages.push(t),r){if(this._emit("message",t),(isFunctionMessage(t)||isToolMessage(t))&&t.content)this._emit("functionCallResult",t.content);else if(isAssistantMessage(t)&&t.function_call)this._emit("functionCall",t.function_call);else if(isAssistantMessage(t)&&t.tool_calls)for(const o of t.tool_calls)o.type==="function"&&this._emit("functionCall",o.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new OpenAIError("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this)}async finalMessage(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this)}async finalFunctionCall(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCall).call(this)}async finalFunctionCallResult(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this)}async totalUsage(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const r=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this);r&&this._emit("finalMessage",r);const o=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this);o&&this._emit("finalContent",o);const n=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCall).call(this);n&&this._emit("finalFunctionCall",n);const a=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(s=>s.usage)&&this._emit("totalUsage",__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this))}async _createChatCompletion(t,r,o){const n=o==null?void 0:o.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_validateParams).call(this,r);const a=await t.chat.completions.create({...r,stream:!1},{...o,signal:this.controller.signal});return this._connected(),this._addChatCompletion(parseChatCompletion(a,r))}async _runChatCompletion(t,r,o){for(const n of r.messages)this._addMessage(n,!1);return await this._createChatCompletion(t,r,o)}async _runFunctions(t,r,o){var g;const n="function",{function_call:a="auto",stream:s,...u}=r,i=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:c=DEFAULT_MAX_CHAT_COMPLETIONS}=o||{},d={};for(const f of r.functions)d[f.name||f.function.name]=f;const l=r.functions.map(f=>({name:f.name||f.function.name,parameters:f.parameters,description:f.description}));for(const f of r.messages)this._addMessage(f,!1);for(let f=0;f<c;++f){const m=(g=(await this._createChatCompletion(t,{...u,function_call:a,functions:l,messages:[...this.messages]},o)).choices[0])==null?void 0:g.message;if(!m)throw new OpenAIError("missing message in ChatCompletion response");if(!m.function_call)return;const{name:y,arguments:_}=m.function_call,x=d[y];if(x){if(i&&i!==y){const $=`Invalid function_call: ${JSON.stringify(y)}. ${JSON.stringify(i)} requested. Please try again`;this._addMessage({role:n,name:y,content:$});continue}}else{const $=`Invalid function_call: ${JSON.stringify(y)}. Available options are: ${l.map(B=>JSON.stringify(B.name)).join(", ")}. Please try again`;this._addMessage({role:n,name:y,content:$});continue}let E;try{E=isRunnableFunctionWithParse(x)?await x.parse(_):_}catch($){this._addMessage({role:n,name:y,content:$ instanceof Error?$.message:String($)});continue}const C=await x.function(E,this),D=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,C);if(this._addMessage({role:n,name:y,content:D}),i)return}}async _runTools(t,r,o){var f,p,m;const n="tool",{tool_choice:a="auto",stream:s,...u}=r,i=typeof a!="string"&&((f=a==null?void 0:a.function)==null?void 0:f.name),{maxChatCompletions:c=DEFAULT_MAX_CHAT_COMPLETIONS}=o||{},d=r.tools.map(y=>{if(isAutoParsableTool(y)){if(!y.$callback)throw new OpenAIError("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:y.$callback,name:y.function.name,description:y.function.description||"",parameters:y.function.parameters,parse:y.$parseRaw,strict:!0}}}return y}),l={};for(const y of d)y.type==="function"&&(l[y.function.name||y.function.function.name]=y.function);const g="tools"in r?d.map(y=>y.type==="function"?{type:"function",function:{name:y.function.name||y.function.function.name,parameters:y.function.parameters,description:y.function.description,strict:y.function.strict}}:y):void 0;for(const y of r.messages)this._addMessage(y,!1);for(let y=0;y<c;++y){const x=(p=(await this._createChatCompletion(t,{...u,tool_choice:a,tools:g,messages:[...this.messages]},o)).choices[0])==null?void 0:p.message;if(!x)throw new OpenAIError("missing message in ChatCompletion response");if(!((m=x.tool_calls)!=null&&m.length))return;for(const E of x.tool_calls){if(E.type!=="function")continue;const C=E.id,{name:D,arguments:$}=E.function,B=l[D];if(B){if(i&&i!==D){const z=`Invalid tool_call: ${JSON.stringify(D)}. ${JSON.stringify(i)} requested. Please try again`;this._addMessage({role:n,tool_call_id:C,content:z});continue}}else{const z=`Invalid tool_call: ${JSON.stringify(D)}. Available options are: ${Object.keys(l).map(q=>JSON.stringify(q)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:C,content:z});continue}let T;try{T=isRunnableFunctionWithParse(B)?await B.parse($):$}catch(z){const q=z instanceof Error?z.message:String(z);this._addMessage({role:n,tool_call_id:C,content:q});continue}const F=await B.function(T,this),I=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,F);if(this._addMessage({role:n,tool_call_id:C,content:I}),i)return}}}}_AbstractChatCompletionRunner_instances=new WeakSet,_AbstractChatCompletionRunner_getFinalContent=function e(){return __classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this).content??null},_AbstractChatCompletionRunner_getFinalMessage=function e(){let t=this.messages.length;for(;t-- >0;){const r=this.messages[t];if(isAssistantMessage(r)){const{function_call:o,...n}=r,a={...n,content:r.content??null,refusal:r.refusal??null};return o&&(a.function_call=o),a}}throw new OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},_AbstractChatCompletionRunner_getFinalFunctionCall=function e(){var t,r;for(let o=this.messages.length-1;o>=0;o--){const n=this.messages[o];if(isAssistantMessage(n)&&(n!=null&&n.function_call))return n.function_call;if(isAssistantMessage(n)&&((t=n==null?void 0:n.tool_calls)!=null&&t.length))return(r=n.tool_calls.at(-1))==null?void 0:r.function}},_AbstractChatCompletionRunner_getFinalFunctionCallResult=function e(){for(let t=this.messages.length-1;t>=0;t--){const r=this.messages[t];if(isFunctionMessage(r)&&r.content!=null||isToolMessage(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(o=>{var n;return o.role==="assistant"&&((n=o.tool_calls)==null?void 0:n.some(a=>a.type==="function"&&a.id===r.tool_call_id))}))return r.content}},_AbstractChatCompletionRunner_calculateTotalUsage=function e(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(t.completion_tokens+=r.completion_tokens,t.prompt_tokens+=r.prompt_tokens,t.total_tokens+=r.total_tokens);return t},_AbstractChatCompletionRunner_validateParams=function e(t){if(t.n!=null&&t.n>1)throw new OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},_AbstractChatCompletionRunner_stringifyFunctionCallResult=function e(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class ChatCompletionRunner extends AbstractChatCompletionRunner{static runFunctions(t,r,o){const n=new ChatCompletionRunner,a={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(t,r,a)),n}static runTools(t,r,o){const n=new ChatCompletionRunner,a={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(t,r,a)),n}_addMessage(t,r=!0){super._addMessage(t,r),isAssistantMessage(t)&&t.content&&this._emit("content",t.content)}}const STR=1,NUM=2,ARR=4,OBJ=8,NULL=16,BOOL=32,NAN=64,INFINITY=128,MINUS_INFINITY=256,INF=INFINITY|MINUS_INFINITY,SPECIAL=NULL|BOOL|INF|NAN,ATOM=STR|NUM|SPECIAL,COLLECTION=ARR|OBJ,ALL=ATOM|COLLECTION,Allow={STR,NUM,ARR,OBJ,NULL,BOOL,NAN,INFINITY,MINUS_INFINITY,INF,SPECIAL,ATOM,COLLECTION,ALL};class PartialJSON extends Error{}class MalformedJSON extends Error{}function parseJSON(e,t=Allow.ALL){if(typeof e!="string")throw new TypeError(`expecting str, got ${typeof e}`);if(!e.trim())throw new Error(`${e} is empty`);return _parseJSON(e.trim(),t)}const _parseJSON=(e,t)=>{const r=e.length;let o=0;const n=g=>{throw new PartialJSON(`${g} at position ${o}`)},a=g=>{throw new MalformedJSON(`${g} at position ${o}`)},s=()=>(l(),o>=r&&n("Unexpected end of input"),e[o]==='"'?u():e[o]==="{"?i():e[o]==="["?c():e.substring(o,o+4)==="null"||Allow.NULL&t&&r-o<4&&"null".startsWith(e.substring(o))?(o+=4,null):e.substring(o,o+4)==="true"||Allow.BOOL&t&&r-o<4&&"true".startsWith(e.substring(o))?(o+=4,!0):e.substring(o,o+5)==="false"||Allow.BOOL&t&&r-o<5&&"false".startsWith(e.substring(o))?(o+=5,!1):e.substring(o,o+8)==="Infinity"||Allow.INFINITY&t&&r-o<8&&"Infinity".startsWith(e.substring(o))?(o+=8,1/0):e.substring(o,o+9)==="-Infinity"||Allow.MINUS_INFINITY&t&&1<r-o&&r-o<9&&"-Infinity".startsWith(e.substring(o))?(o+=9,-1/0):e.substring(o,o+3)==="NaN"||Allow.NAN&t&&r-o<3&&"NaN".startsWith(e.substring(o))?(o+=3,NaN):d()),u=()=>{const g=o;let f=!1;for(o++;o<r&&(e[o]!=='"'||f&&e[o-1]==="\\");)f=e[o]==="\\"?!f:!1,o++;if(e.charAt(o)=='"')try{return JSON.parse(e.substring(g,++o-Number(f)))}catch(p){a(String(p))}else if(Allow.STR&t)try{return JSON.parse(e.substring(g,o-Number(f))+'"')}catch{return JSON.parse(e.substring(g,e.lastIndexOf("\\"))+'"')}n("Unterminated string literal")},i=()=>{o++,l();const g={};try{for(;e[o]!=="}";){if(l(),o>=r&&Allow.OBJ&t)return g;const f=u();l(),o++;try{const p=s();Object.defineProperty(g,f,{value:p,writable:!0,enumerable:!0,configurable:!0})}catch(p){if(Allow.OBJ&t)return g;throw p}l(),e[o]===","&&o++}}catch{if(Allow.OBJ&t)return g;n("Expected '}' at end of object")}return o++,g},c=()=>{o++;const g=[];try{for(;e[o]!=="]";)g.push(s()),l(),e[o]===","&&o++}catch{if(Allow.ARR&t)return g;n("Expected ']' at end of array")}return o++,g},d=()=>{if(o===0){e==="-"&&Allow.NUM&t&&n("Not sure what '-' is");try{return JSON.parse(e)}catch(f){if(Allow.NUM&t)try{return e[e.length-1]==="."?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch{}a(String(f))}}const g=o;for(e[o]==="-"&&o++;e[o]&&!",]}".includes(e[o]);)o++;o==r&&!(Allow.NUM&t)&&n("Unterminated number literal");try{return JSON.parse(e.substring(g,o))}catch{e.substring(g,o)==="-"&&Allow.NUM&t&&n("Not sure what '-' is");try{return JSON.parse(e.substring(g,e.lastIndexOf("e")))}catch(p){a(String(p))}}},l=()=>{for(;o<r&&` 
\r	`.includes(e[o]);)o++};return s()},partialParse=e=>parseJSON(e,Allow.ALL^Allow.NUM);var __classPrivateFieldSet$1=function(e,t,r,o,n){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},__classPrivateFieldGet$1=function(e,t,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(e):o?o.value:t.get(e)},_ChatCompletionStream_instances,_ChatCompletionStream_params,_ChatCompletionStream_choiceEventStates,_ChatCompletionStream_currentChatCompletionSnapshot,_ChatCompletionStream_beginRequest,_ChatCompletionStream_getChoiceEventState,_ChatCompletionStream_addChunk,_ChatCompletionStream_emitToolCallDoneEvent,_ChatCompletionStream_emitContentDoneEvents,_ChatCompletionStream_endRequest,_ChatCompletionStream_getAutoParseableResponseFormat,_ChatCompletionStream_accumulateChatCompletion;class ChatCompletionStream extends AbstractChatCompletionRunner{constructor(t){super(),_ChatCompletionStream_instances.add(this),_ChatCompletionStream_params.set(this,void 0),_ChatCompletionStream_choiceEventStates.set(this,void 0),_ChatCompletionStream_currentChatCompletionSnapshot.set(this,void 0),__classPrivateFieldSet$1(this,_ChatCompletionStream_params,t,"f"),__classPrivateFieldSet$1(this,_ChatCompletionStream_choiceEventStates,[],"f")}get currentChatCompletionSnapshot(){return __classPrivateFieldGet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f")}static fromReadableStream(t){const r=new ChatCompletionStream(null);return r._run(()=>r._fromReadableStream(t)),r}static createChatCompletion(t,r,o){const n=new ChatCompletionStream(r);return n._run(()=>n._runChatCompletion(t,{...r,stream:!0},{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(t,r,o){var s;super._createChatCompletion;const n=o==null?void 0:o.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this);const a=await t.chat.completions.create({...r,stream:!0},{...o,signal:this.controller.signal});this._connected();for await(const u of a)__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,u);if((s=a.controller.signal)!=null&&s.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}async _fromReadableStream(t,r){var s;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this),this._connected();const n=Stream.fromReadableStream(t,this.controller);let a;for await(const u of n)a&&a!==u.id&&this._addChatCompletion(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this)),__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,u),a=u.id;if((s=n.controller.signal)!=null&&s.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}[(_ChatCompletionStream_params=new WeakMap,_ChatCompletionStream_choiceEventStates=new WeakMap,_ChatCompletionStream_currentChatCompletionSnapshot=new WeakMap,_ChatCompletionStream_instances=new WeakSet,_ChatCompletionStream_beginRequest=function(){this.ended||__classPrivateFieldSet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0,"f")},_ChatCompletionStream_getChoiceEventState=function(r){let o=__classPrivateFieldGet$1(this,_ChatCompletionStream_choiceEventStates,"f")[r.index];return o||(o={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},__classPrivateFieldGet$1(this,_ChatCompletionStream_choiceEventStates,"f")[r.index]=o,o)},_ChatCompletionStream_addChunk=function(r){var n,a,s,u,i,c,d,l,g,f,p,m,y,_,x;if(this.ended)return;const o=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_accumulateChatCompletion).call(this,r);this._emit("chunk",r,o);for(const E of r.choices){const C=o.choices[E.index];E.delta.content!=null&&((n=C.message)==null?void 0:n.role)==="assistant"&&((a=C.message)!=null&&a.content)&&(this._emit("content",E.delta.content,C.message.content),this._emit("content.delta",{delta:E.delta.content,snapshot:C.message.content,parsed:C.message.parsed})),E.delta.refusal!=null&&((s=C.message)==null?void 0:s.role)==="assistant"&&((u=C.message)!=null&&u.refusal)&&this._emit("refusal.delta",{delta:E.delta.refusal,snapshot:C.message.refusal}),((i=E.logprobs)==null?void 0:i.content)!=null&&((c=C.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(d=E.logprobs)==null?void 0:d.content,snapshot:((l=C.logprobs)==null?void 0:l.content)??[]}),((g=E.logprobs)==null?void 0:g.refusal)!=null&&((f=C.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(p=E.logprobs)==null?void 0:p.refusal,snapshot:((m=C.logprobs)==null?void 0:m.refusal)??[]});const D=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,C);C.finish_reason&&(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,C),D.current_tool_call_index!=null&&__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,C,D.current_tool_call_index));for(const $ of E.delta.tool_calls??[])D.current_tool_call_index!==$.index&&(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,C),D.current_tool_call_index!=null&&__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,C,D.current_tool_call_index)),D.current_tool_call_index=$.index;for(const $ of E.delta.tool_calls??[]){const B=(y=C.message.tool_calls)==null?void 0:y[$.index];B!=null&&B.type&&((B==null?void 0:B.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(_=B.function)==null?void 0:_.name,index:$.index,arguments:B.function.arguments,parsed_arguments:B.function.parsed_arguments,arguments_delta:((x=$.function)==null?void 0:x.arguments)??""}):(B==null||B.type,void 0))}}},_ChatCompletionStream_emitToolCallDoneEvent=function(r,o){var s,u,i;if(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,r).done_tool_calls.has(o))return;const a=(s=r.message.tool_calls)==null?void 0:s[o];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const c=(i=(u=__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"))==null?void 0:u.tools)==null?void 0:i.find(d=>d.type==="function"&&d.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:o,arguments:a.function.arguments,parsed_arguments:isAutoParsableTool(c)?c.$parseRaw(a.function.arguments):c!=null&&c.function.strict?JSON.parse(a.function.arguments):null})}else a.type},_ChatCompletionStream_emitContentDoneEvents=function(r){var n,a;const o=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,r);if(r.message.content&&!o.content_done){o.content_done=!0;const s=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this);this._emit("content.done",{content:r.message.content,parsed:s?s.$parseRaw(r.message.content):null})}r.message.refusal&&!o.refusal_done&&(o.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),(n=r.logprobs)!=null&&n.content&&!o.logprobs_content_done&&(o.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),(a=r.logprobs)!=null&&a.refusal&&!o.logprobs_refusal_done&&(o.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},_ChatCompletionStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const r=__classPrivateFieldGet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");if(!r)throw new OpenAIError("request ended without sending any chunks");return __classPrivateFieldSet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0,"f"),__classPrivateFieldSet$1(this,_ChatCompletionStream_choiceEventStates,[],"f"),finalizeChatCompletion(r,__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"))},_ChatCompletionStream_getAutoParseableResponseFormat=function(){var o;const r=(o=__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"))==null?void 0:o.response_format;return isAutoParsableResponseFormat(r)?r:null},_ChatCompletionStream_accumulateChatCompletion=function(r){var o,n,a,s;let u=__classPrivateFieldGet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");const{choices:i,...c}=r;u?Object.assign(u,c):u=__classPrivateFieldSet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,{...c,choices:[]},"f");for(const{delta:d,finish_reason:l,index:g,logprobs:f=null,...p}of r.choices){let m=u.choices[g];if(m||(m=u.choices[g]={finish_reason:l,index:g,message:{},logprobs:f,...p}),f)if(!m.logprobs)m.logprobs=Object.assign({},f);else{const{content:$,refusal:B,...T}=f;Object.assign(m.logprobs,T),$&&((o=m.logprobs).content??(o.content=[]),m.logprobs.content.push(...$)),B&&((n=m.logprobs).refusal??(n.refusal=[]),m.logprobs.refusal.push(...B))}if(l&&(m.finish_reason=l,__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f")&&hasAutoParseableInput(__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f")))){if(l==="length")throw new LengthFinishReasonError;if(l==="content_filter")throw new ContentFilterFinishReasonError}if(Object.assign(m,p),!d)continue;const{content:y,refusal:_,function_call:x,role:E,tool_calls:C,...D}=d;if(Object.assign(m.message,D),_&&(m.message.refusal=(m.message.refusal||"")+_),E&&(m.message.role=E),x&&(m.message.function_call?(x.name&&(m.message.function_call.name=x.name),x.arguments&&((a=m.message.function_call).arguments??(a.arguments=""),m.message.function_call.arguments+=x.arguments)):m.message.function_call=x),y&&(m.message.content=(m.message.content||"")+y,!m.message.refusal&&__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this)&&(m.message.parsed=partialParse(m.message.content))),C){m.message.tool_calls||(m.message.tool_calls=[]);for(const{index:$,id:B,type:T,function:F,...I}of C){const z=(s=m.message.tool_calls)[$]??(s[$]={});Object.assign(z,I),B&&(z.id=B),T&&(z.type=T),F&&(z.function??(z.function={name:F.name??"",arguments:""})),F!=null&&F.name&&(z.function.name=F.name),F!=null&&F.arguments&&(z.function.arguments+=F.arguments,shouldParseToolCall(__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"),z)&&(z.function.parsed_arguments=partialParse(z.function.arguments)))}}}return u},Symbol.asyncIterator)](){const t=[],r=[];let o=!1;return this.on("chunk",n=>{const a=r.shift();a?a.resolve(n):t.push(n)}),this.on("end",()=>{o=!0;for(const n of r)n.resolve(void 0);r.length=0}),this.on("abort",n=>{o=!0;for(const a of r)a.reject(n);r.length=0}),this.on("error",n=>{o=!0;for(const a of r)a.reject(n);r.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((a,s)=>r.push({resolve:a,reject:s})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function finalizeChatCompletion(e,t){const{id:r,choices:o,created:n,model:a,system_fingerprint:s,...u}=e,i={...u,id:r,choices:o.map(({message:c,finish_reason:d,index:l,logprobs:g,...f})=>{if(!d)throw new OpenAIError(`missing finish_reason for choice ${l}`);const{content:p=null,function_call:m,tool_calls:y,..._}=c,x=c.role;if(!x)throw new OpenAIError(`missing role for choice ${l}`);if(m){const{arguments:E,name:C}=m;if(E==null)throw new OpenAIError(`missing function_call.arguments for choice ${l}`);if(!C)throw new OpenAIError(`missing function_call.name for choice ${l}`);return{...f,message:{content:p,function_call:{arguments:E,name:C},role:x,refusal:c.refusal??null},finish_reason:d,index:l,logprobs:g}}return y?{...f,index:l,finish_reason:d,logprobs:g,message:{..._,role:x,content:p,refusal:c.refusal??null,tool_calls:y.map((E,C)=>{const{function:D,type:$,id:B,...T}=E,{arguments:F,name:I,...z}=D||{};if(B==null)throw new OpenAIError(`missing choices[${l}].tool_calls[${C}].id
${str(e)}`);if($==null)throw new OpenAIError(`missing choices[${l}].tool_calls[${C}].type
${str(e)}`);if(I==null)throw new OpenAIError(`missing choices[${l}].tool_calls[${C}].function.name
${str(e)}`);if(F==null)throw new OpenAIError(`missing choices[${l}].tool_calls[${C}].function.arguments
${str(e)}`);return{...T,id:B,type:$,function:{...z,name:I,arguments:F}}})}}:{...f,message:{..._,content:p,role:x,refusal:c.refusal??null},finish_reason:d,index:l,logprobs:g}}),created:n,model:a,object:"chat.completion",...s?{system_fingerprint:s}:{}};return maybeParseChatCompletion(i,t)}function str(e){return JSON.stringify(e)}function assertNever(e){}class ChatCompletionStreamingRunner extends ChatCompletionStream{static fromReadableStream(t){const r=new ChatCompletionStreamingRunner(null);return r._run(()=>r._fromReadableStream(t)),r}static runFunctions(t,r,o){const n=new ChatCompletionStreamingRunner(null),a={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(t,r,a)),n}static runTools(t,r,o){const n=new ChatCompletionStreamingRunner(r),a={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(t,r,a)),n}}let Completions$1=class extends APIResource{parse(t,r){return validateInputTools(t.tools),this._client.chat.completions.create(t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(o=>parseChatCompletion(o,t))}runFunctions(t,r){return t.stream?ChatCompletionStreamingRunner.runFunctions(this._client,t,r):ChatCompletionRunner.runFunctions(this._client,t,r)}runTools(t,r){return t.stream?ChatCompletionStreamingRunner.runTools(this._client,t,r):ChatCompletionRunner.runTools(this._client,t,r)}stream(t,r){return ChatCompletionStream.createChatCompletion(this._client,t,r)}};class Chat extends APIResource{constructor(){super(...arguments),this.completions=new Completions$1(this._client)}}(function(e){e.Completions=Completions$1})(Chat||(Chat={}));class Sessions extends APIResource{create(t,r){return this._client.post("/realtime/sessions",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Realtime extends APIResource{constructor(){super(...arguments),this.sessions=new Sessions(this._client)}}Realtime.Sessions=Sessions;var __classPrivateFieldGet=function(e,t,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(e):o?o.value:t.get(e)},__classPrivateFieldSet=function(e,t,r,o,n){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r},_AssistantStream_instances,_AssistantStream_events,_AssistantStream_runStepSnapshots,_AssistantStream_messageSnapshots,_AssistantStream_messageSnapshot,_AssistantStream_finalRun,_AssistantStream_currentContentIndex,_AssistantStream_currentContent,_AssistantStream_currentToolCallIndex,_AssistantStream_currentToolCall,_AssistantStream_currentEvent,_AssistantStream_currentRunSnapshot,_AssistantStream_currentRunStepSnapshot,_AssistantStream_addEvent,_AssistantStream_endRequest,_AssistantStream_handleMessage,_AssistantStream_handleRunStep,_AssistantStream_handleEvent,_AssistantStream_accumulateRunStep,_AssistantStream_accumulateMessage,_AssistantStream_accumulateContent,_AssistantStream_handleRun;class AssistantStream extends EventStream{constructor(){super(...arguments),_AssistantStream_instances.add(this),_AssistantStream_events.set(this,[]),_AssistantStream_runStepSnapshots.set(this,{}),_AssistantStream_messageSnapshots.set(this,{}),_AssistantStream_messageSnapshot.set(this,void 0),_AssistantStream_finalRun.set(this,void 0),_AssistantStream_currentContentIndex.set(this,void 0),_AssistantStream_currentContent.set(this,void 0),_AssistantStream_currentToolCallIndex.set(this,void 0),_AssistantStream_currentToolCall.set(this,void 0),_AssistantStream_currentEvent.set(this,void 0),_AssistantStream_currentRunSnapshot.set(this,void 0),_AssistantStream_currentRunStepSnapshot.set(this,void 0)}[(_AssistantStream_events=new WeakMap,_AssistantStream_runStepSnapshots=new WeakMap,_AssistantStream_messageSnapshots=new WeakMap,_AssistantStream_messageSnapshot=new WeakMap,_AssistantStream_finalRun=new WeakMap,_AssistantStream_currentContentIndex=new WeakMap,_AssistantStream_currentContent=new WeakMap,_AssistantStream_currentToolCallIndex=new WeakMap,_AssistantStream_currentToolCall=new WeakMap,_AssistantStream_currentEvent=new WeakMap,_AssistantStream_currentRunSnapshot=new WeakMap,_AssistantStream_currentRunStepSnapshot=new WeakMap,_AssistantStream_instances=new WeakSet,Symbol.asyncIterator)](){const t=[],r=[];let o=!1;return this.on("event",n=>{const a=r.shift();a?a.resolve(n):t.push(n)}),this.on("end",()=>{o=!0;for(const n of r)n.resolve(void 0);r.length=0}),this.on("abort",n=>{o=!0;for(const a of r)a.reject(n);r.length=0}),this.on("error",n=>{o=!0;for(const a of r)a.reject(n);r.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((a,s)=>r.push({resolve:a,reject:s})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const r=new AssistantStream;return r._run(()=>r._fromReadableStream(t)),r}async _fromReadableStream(t,r){var a;const o=r==null?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),this._connected();const n=Stream.fromReadableStream(t,this.controller);for await(const s of n)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,s);if((a=n.controller.signal)!=null&&a.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,r,o,n,a){const s=new AssistantStream;return s._run(()=>s._runToolAssistantStream(t,r,o,n,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(t,r,o,n,a){var c;const s=a==null?void 0:a.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const u={...n,stream:!0},i=await t.submitToolOutputs(r,o,u,{...a,signal:this.controller.signal});this._connected();for await(const d of i)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,d);if((c=i.controller.signal)!=null&&c.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static createThreadAssistantStream(t,r,o){const n=new AssistantStream;return n._run(()=>n._threadAssistantStream(t,r,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(t,r,o,n){const a=new AssistantStream;return a._run(()=>a._runAssistantStream(t,r,o,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return __classPrivateFieldGet(this,_AssistantStream_currentEvent,"f")}currentRun(){return __classPrivateFieldGet(this,_AssistantStream_currentRunSnapshot,"f")}currentMessageSnapshot(){return __classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f")}currentRunStepSnapshot(){return __classPrivateFieldGet(this,_AssistantStream_currentRunStepSnapshot,"f")}async finalRunSteps(){return await this.done(),Object.values(__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f"))}async finalMessages(){return await this.done(),Object.values(__classPrivateFieldGet(this,_AssistantStream_messageSnapshots,"f"))}async finalRun(){if(await this.done(),!__classPrivateFieldGet(this,_AssistantStream_finalRun,"f"))throw Error("Final run was not received.");return __classPrivateFieldGet(this,_AssistantStream_finalRun,"f")}async _createThreadAssistantStream(t,r,o){var u;const n=o==null?void 0:o.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},s=await t.createAndRun(a,{...o,signal:this.controller.signal});this._connected();for await(const i of s)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,i);if((u=s.controller.signal)!=null&&u.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}async _createAssistantStream(t,r,o,n){var i;const a=n==null?void 0:n.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const s={...o,stream:!0},u=await t.create(r,s,{...n,signal:this.controller.signal});this._connected();for await(const c of u)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,c);if((i=u.controller.signal)!=null&&i.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static accumulateDelta(t,r){for(const[o,n]of Object.entries(r)){if(!t.hasOwnProperty(o)){t[o]=n;continue}let a=t[o];if(a==null){t[o]=n;continue}if(o==="index"||o==="type"){t[o]=n;continue}if(typeof a=="string"&&typeof n=="string")a+=n;else if(typeof a=="number"&&typeof n=="number")a+=n;else if(isObj(a)&&isObj(n))a=this.accumulateDelta(a,n);else if(Array.isArray(a)&&Array.isArray(n)){if(a.every(s=>typeof s=="string"||typeof s=="number")){a.push(...n);continue}for(const s of n){if(!isObj(s))throw new Error(`Expected array delta entry to be an object but got: ${s}`);const u=s.index;if(u==null)throw console.error(s),new Error("Expected array delta entry to have an `index` property");if(typeof u!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${u}`);const i=a[u];i==null?a.push(s):a[u]=this.accumulateDelta(i,s)}continue}else throw Error(`Unhandled record type: ${o}, deltaValue: ${n}, accValue: ${a}`);t[o]=a}return t}_addRun(t){return t}async _threadAssistantStream(t,r,o){return await this._createThreadAssistantStream(r,t,o)}async _runAssistantStream(t,r,o,n){return await this._createAssistantStream(r,t,o,n)}async _runToolAssistantStream(t,r,o,n,a){return await this._createToolAssistantStream(o,t,r,n,a)}}_AssistantStream_addEvent=function e(t){if(!this.ended)switch(__classPrivateFieldSet(this,_AssistantStream_currentEvent,t,"f"),__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleEvent).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleRun).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleRunStep).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleMessage).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},_AssistantStream_endRequest=function e(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");if(!__classPrivateFieldGet(this,_AssistantStream_finalRun,"f"))throw Error("Final run has not been received");return __classPrivateFieldGet(this,_AssistantStream_finalRun,"f")},_AssistantStream_handleMessage=function e(t){const[r,o]=__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_accumulateMessage).call(this,t,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));__classPrivateFieldSet(this,_AssistantStream_messageSnapshot,r,"f"),__classPrivateFieldGet(this,_AssistantStream_messageSnapshots,"f")[r.id]=r;for(const n of o){const a=r.content[n.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,r),t.data.delta.content)for(const n of t.data.delta.content){if(n.type=="text"&&n.text){let a=n.text,s=r.content[n.index];if(s&&s.type=="text")this._emit("textDelta",a,s.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(n.index!=__classPrivateFieldGet(this,_AssistantStream_currentContentIndex,"f")){if(__classPrivateFieldGet(this,_AssistantStream_currentContent,"f"))switch(__classPrivateFieldGet(this,_AssistantStream_currentContent,"f").type){case"text":this._emit("textDone",__classPrivateFieldGet(this,_AssistantStream_currentContent,"f").text,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break;case"image_file":this._emit("imageFileDone",__classPrivateFieldGet(this,_AssistantStream_currentContent,"f").image_file,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break}__classPrivateFieldSet(this,_AssistantStream_currentContentIndex,n.index,"f")}__classPrivateFieldSet(this,_AssistantStream_currentContent,r.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(__classPrivateFieldGet(this,_AssistantStream_currentContentIndex,"f")!==void 0){const n=t.data.content[__classPrivateFieldGet(this,_AssistantStream_currentContentIndex,"f")];if(n)switch(n.type){case"image_file":this._emit("imageFileDone",n.image_file,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break;case"text":this._emit("textDone",n.text,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break}}__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f")&&this._emit("messageDone",t.data),__classPrivateFieldSet(this,_AssistantStream_messageSnapshot,void 0,"f")}},_AssistantStream_handleRunStep=function e(t){const r=__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_accumulateRunStep).call(this,t);switch(__classPrivateFieldSet(this,_AssistantStream_currentRunStepSnapshot,r,"f"),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const o=t.data.delta;if(o.step_details&&o.step_details.type=="tool_calls"&&o.step_details.tool_calls&&r.step_details.type=="tool_calls")for(const a of o.step_details.tool_calls)a.index==__classPrivateFieldGet(this,_AssistantStream_currentToolCallIndex,"f")?this._emit("toolCallDelta",a,r.step_details.tool_calls[a.index]):(__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallDone",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet(this,_AssistantStream_currentToolCallIndex,a.index,"f"),__classPrivateFieldSet(this,_AssistantStream_currentToolCall,r.step_details.tool_calls[a.index],"f"),__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallCreated",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")));this._emit("runStepDelta",t.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldSet(this,_AssistantStream_currentRunStepSnapshot,void 0,"f"),t.data.step_details.type=="tool_calls"&&__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet(this,_AssistantStream_currentToolCall,void 0,"f")),this._emit("runStepDone",t.data,r);break}},_AssistantStream_handleEvent=function e(t){__classPrivateFieldGet(this,_AssistantStream_events,"f").push(t),this._emit("event",t)},_AssistantStream_accumulateRunStep=function e(t){switch(t.event){case"thread.run.step.created":return __classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let r=__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[t.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let o=t.data;if(o.delta){const n=AssistantStream.accumulateDelta(r,o.delta);__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[t.data.id]=n}return __classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[t.data.id]=t.data;break}if(__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[t.data.id])return __classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[t.data.id];throw new Error("No snapshot available")},_AssistantStream_accumulateMessage=function e(t,r){let o=[];switch(t.event){case"thread.message.created":return[t.data,o];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let n=t.data;if(n.delta.content)for(const a of n.delta.content)if(a.index in r.content){let s=r.content[a.index];r.content[a.index]=__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_accumulateContent).call(this,a,s)}else r.content[a.index]=a,o.push(a);return[r,o];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,o];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},_AssistantStream_accumulateContent=function e(t,r){return AssistantStream.accumulateDelta(r,t)},_AssistantStream_handleRun=function e(t){switch(__classPrivateFieldSet(this,_AssistantStream_currentRunSnapshot,t.data,"f"),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":__classPrivateFieldSet(this,_AssistantStream_finalRun,t.data,"f"),__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet(this,_AssistantStream_currentToolCall,void 0,"f"));break}};class Messages extends APIResource{create(t,r,o){return this._client.post(`/threads/${t}/messages`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}retrieve(t,r,o){return this._client.get(`/threads/${t}/messages/${r}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}update(t,r,o,n){return this._client.post(`/threads/${t}/messages/${r}`,{body:o,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(t,r={},o){return isRequestOptions(r)?this.list(t,{},r):this._client.getAPIList(`/threads/${t}/messages`,MessagesPage,{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}del(t,r,o){return this._client.delete(`/threads/${t}/messages/${r}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}}class MessagesPage extends CursorPage{}Messages.MessagesPage=MessagesPage;class Steps extends APIResource{retrieve(t,r,o,n={},a){return isRequestOptions(n)?this.retrieve(t,r,o,{},n):this._client.get(`/threads/${t}/runs/${r}/steps/${o}`,{query:n,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(t,r,o={},n){return isRequestOptions(o)?this.list(t,r,{},o):this._client.getAPIList(`/threads/${t}/runs/${r}/steps`,RunStepsPage,{query:o,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class RunStepsPage extends CursorPage{}Steps.RunStepsPage=RunStepsPage;class Runs extends APIResource{constructor(){super(...arguments),this.steps=new Steps(this._client)}create(t,r,o){const{include:n,...a}=r;return this._client.post(`/threads/${t}/runs`,{query:{include:n},body:a,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers},stream:r.stream??!1})}retrieve(t,r,o){return this._client.get(`/threads/${t}/runs/${r}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}update(t,r,o,n){return this._client.post(`/threads/${t}/runs/${r}`,{body:o,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(t,r={},o){return isRequestOptions(r)?this.list(t,{},r):this._client.getAPIList(`/threads/${t}/runs`,RunsPage,{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}cancel(t,r,o){return this._client.post(`/threads/${t}/runs/${r}/cancel`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}async createAndPoll(t,r,o){const n=await this.create(t,r,o);return await this.poll(t,n.id,o)}createAndStream(t,r,o){return AssistantStream.createAssistantStream(t,this._client.beta.threads.runs,r,o)}async poll(t,r,o){const n={...o==null?void 0:o.headers,"X-Stainless-Poll-Helper":"true"};for(o!=null&&o.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=o.pollIntervalMs.toString());;){const{data:a,response:s}=await this.retrieve(t,r,{...o,headers:{...o==null?void 0:o.headers,...n}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let u=5e3;if(o!=null&&o.pollIntervalMs)u=o.pollIntervalMs;else{const i=s.headers.get("openai-poll-after-ms");if(i){const c=parseInt(i);isNaN(c)||(u=c)}}await sleep(u);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(t,r,o){return AssistantStream.createAssistantStream(t,this._client.beta.threads.runs,r,o)}submitToolOutputs(t,r,o,n){return this._client.post(`/threads/${t}/runs/${r}/submit_tool_outputs`,{body:o,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:o.stream??!1})}async submitToolOutputsAndPoll(t,r,o,n){const a=await this.submitToolOutputs(t,r,o,n);return await this.poll(t,a.id,n)}submitToolOutputsStream(t,r,o,n){return AssistantStream.createToolAssistantStream(t,r,this._client.beta.threads.runs,o,n)}}class RunsPage extends CursorPage{}Runs.RunsPage=RunsPage;Runs.Steps=Steps;Runs.RunStepsPage=RunStepsPage;class Threads extends APIResource{constructor(){super(...arguments),this.runs=new Runs(this._client),this.messages=new Messages(this._client)}create(t={},r){return isRequestOptions(t)?this.create({},t):this._client.post("/threads",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,r){return this._client.get(`/threads/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,r,o){return this._client.post(`/threads/${t}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}del(t,r){return this._client.delete(`/threads/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}createAndRun(t,r){return this._client.post("/threads/runs",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:t.stream??!1})}async createAndRunPoll(t,r){const o=await this.createAndRun(t,r);return await this.runs.poll(o.thread_id,o.id,r)}createAndRunStream(t,r){return AssistantStream.createThreadAssistantStream(t,this._client.beta.threads,r)}}Threads.Runs=Runs;Threads.RunsPage=RunsPage;Threads.Messages=Messages;Threads.MessagesPage=MessagesPage;const allSettledWithThrow=async e=>{const t=await Promise.allSettled(e),r=t.filter(n=>n.status==="rejected");if(r.length){for(const n of r)console.error(n.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const o=[];for(const n of t)n.status==="fulfilled"&&o.push(n.value);return o};let Files$1=class extends APIResource{create(t,r,o){return this._client.post(`/vector_stores/${t}/files`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}retrieve(t,r,o){return this._client.get(`/vector_stores/${t}/files/${r}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(t,r={},o){return isRequestOptions(r)?this.list(t,{},r):this._client.getAPIList(`/vector_stores/${t}/files`,VectorStoreFilesPage,{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}del(t,r,o){return this._client.delete(`/vector_stores/${t}/files/${r}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}async createAndPoll(t,r,o){const n=await this.create(t,r,o);return await this.poll(t,n.id,o)}async poll(t,r,o){const n={...o==null?void 0:o.headers,"X-Stainless-Poll-Helper":"true"};for(o!=null&&o.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=o.pollIntervalMs.toString());;){const a=await this.retrieve(t,r,{...o,headers:n}).withResponse(),s=a.data;switch(s.status){case"in_progress":let u=5e3;if(o!=null&&o.pollIntervalMs)u=o.pollIntervalMs;else{const i=a.response.headers.get("openai-poll-after-ms");if(i){const c=parseInt(i);isNaN(c)||(u=c)}}await sleep(u);break;case"failed":case"completed":return s}}}async upload(t,r,o){const n=await this._client.files.create({file:r,purpose:"assistants"},o);return this.create(t,{file_id:n.id},o)}async uploadAndPoll(t,r,o){const n=await this.upload(t,r,o);return await this.poll(t,n.id,o)}};class VectorStoreFilesPage extends CursorPage{}Files$1.VectorStoreFilesPage=VectorStoreFilesPage;class FileBatches extends APIResource{create(t,r,o){return this._client.post(`/vector_stores/${t}/file_batches`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}retrieve(t,r,o){return this._client.get(`/vector_stores/${t}/file_batches/${r}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}cancel(t,r,o){return this._client.post(`/vector_stores/${t}/file_batches/${r}/cancel`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}async createAndPoll(t,r,o){const n=await this.create(t,r);return await this.poll(t,n.id,o)}listFiles(t,r,o={},n){return isRequestOptions(o)?this.listFiles(t,r,{},o):this._client.getAPIList(`/vector_stores/${t}/file_batches/${r}/files`,VectorStoreFilesPage,{query:o,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async poll(t,r,o){const n={...o==null?void 0:o.headers,"X-Stainless-Poll-Helper":"true"};for(o!=null&&o.pollIntervalMs&&(n["X-Stainless-Custom-Poll-Interval"]=o.pollIntervalMs.toString());;){const{data:a,response:s}=await this.retrieve(t,r,{...o,headers:n}).withResponse();switch(a.status){case"in_progress":let u=5e3;if(o!=null&&o.pollIntervalMs)u=o.pollIntervalMs;else{const i=s.headers.get("openai-poll-after-ms");if(i){const c=parseInt(i);isNaN(c)||(u=c)}}await sleep(u);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(t,{files:r,fileIds:o=[]},n){if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(n==null?void 0:n.maxConcurrency)??5,s=Math.min(a,r.length),u=this._client,i=r.values(),c=[...o];async function d(g){for(let f of g){const p=await u.files.create({file:f,purpose:"assistants"},n);c.push(p.id)}}const l=Array(s).fill(i).map(d);return await allSettledWithThrow(l),await this.createAndPoll(t,{file_ids:c})}}class VectorStores extends APIResource{constructor(){super(...arguments),this.files=new Files$1(this._client),this.fileBatches=new FileBatches(this._client)}create(t,r){return this._client.post("/vector_stores",{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(t,r){return this._client.get(`/vector_stores/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(t,r,o){return this._client.post(`/vector_stores/${t}`,{body:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(t={},r){return isRequestOptions(t)?this.list({},t):this._client.getAPIList("/vector_stores",VectorStoresPage,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(t,r){return this._client.delete(`/vector_stores/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class VectorStoresPage extends CursorPage{}VectorStores.VectorStoresPage=VectorStoresPage;VectorStores.Files=Files$1;VectorStores.VectorStoreFilesPage=VectorStoreFilesPage;VectorStores.FileBatches=FileBatches;class Beta extends APIResource{constructor(){super(...arguments),this.realtime=new Realtime(this._client),this.vectorStores=new VectorStores(this._client),this.chat=new Chat(this._client),this.assistants=new Assistants(this._client),this.threads=new Threads(this._client)}}Beta.Realtime=Realtime;Beta.VectorStores=VectorStores;Beta.VectorStoresPage=VectorStoresPage;Beta.Assistants=Assistants;Beta.AssistantsPage=AssistantsPage;Beta.Threads=Threads;class Completions extends APIResource{create(t,r){return this._client.post("/completions",{body:t,...r,stream:t.stream??!1})}}class Embeddings extends APIResource{create(t,r){return this._client.post("/embeddings",{body:t,...r})}}class Files extends APIResource{create(t,r){return this._client.post("/files",multipartFormRequestOptions({body:t,...r}))}retrieve(t,r){return this._client.get(`/files/${t}`,r)}list(t={},r){return isRequestOptions(t)?this.list({},t):this._client.getAPIList("/files",FileObjectsPage,{query:t,...r})}del(t,r){return this._client.delete(`/files/${t}`,r)}content(t,r){return this._client.get(`/files/${t}/content`,{...r,headers:{Accept:"application/binary",...r==null?void 0:r.headers},__binaryResponse:!0})}retrieveContent(t,r){return this._client.get(`/files/${t}/content`,r)}async waitForProcessing(t,{pollInterval:r=5e3,maxWait:o=30*60*1e3}={}){const n=new Set(["processed","error","deleted"]),a=Date.now();let s=await this.retrieve(t);for(;!s.status||!n.has(s.status);)if(await sleep(r),s=await this.retrieve(t),Date.now()-a>o)throw new APIConnectionTimeoutError({message:`Giving up on waiting for file ${t} to finish processing after ${o} milliseconds.`});return s}}class FileObjectsPage extends CursorPage{}Files.FileObjectsPage=FileObjectsPage;class Checkpoints extends APIResource{list(t,r={},o){return isRequestOptions(r)?this.list(t,{},r):this._client.getAPIList(`/fine_tuning/jobs/${t}/checkpoints`,FineTuningJobCheckpointsPage,{query:r,...o})}}class FineTuningJobCheckpointsPage extends CursorPage{}Checkpoints.FineTuningJobCheckpointsPage=FineTuningJobCheckpointsPage;class Jobs extends APIResource{constructor(){super(...arguments),this.checkpoints=new Checkpoints(this._client)}create(t,r){return this._client.post("/fine_tuning/jobs",{body:t,...r})}retrieve(t,r){return this._client.get(`/fine_tuning/jobs/${t}`,r)}list(t={},r){return isRequestOptions(t)?this.list({},t):this._client.getAPIList("/fine_tuning/jobs",FineTuningJobsPage,{query:t,...r})}cancel(t,r){return this._client.post(`/fine_tuning/jobs/${t}/cancel`,r)}listEvents(t,r={},o){return isRequestOptions(r)?this.listEvents(t,{},r):this._client.getAPIList(`/fine_tuning/jobs/${t}/events`,FineTuningJobEventsPage,{query:r,...o})}}class FineTuningJobsPage extends CursorPage{}class FineTuningJobEventsPage extends CursorPage{}Jobs.FineTuningJobsPage=FineTuningJobsPage;Jobs.FineTuningJobEventsPage=FineTuningJobEventsPage;Jobs.Checkpoints=Checkpoints;Jobs.FineTuningJobCheckpointsPage=FineTuningJobCheckpointsPage;class FineTuning extends APIResource{constructor(){super(...arguments),this.jobs=new Jobs(this._client)}}FineTuning.Jobs=Jobs;FineTuning.FineTuningJobsPage=FineTuningJobsPage;FineTuning.FineTuningJobEventsPage=FineTuningJobEventsPage;class Images extends APIResource{createVariation(t,r){return this._client.post("/images/variations",multipartFormRequestOptions({body:t,...r}))}edit(t,r){return this._client.post("/images/edits",multipartFormRequestOptions({body:t,...r}))}generate(t,r){return this._client.post("/images/generations",{body:t,...r})}}class Models extends APIResource{retrieve(t,r){return this._client.get(`/models/${t}`,r)}list(t){return this._client.getAPIList("/models",ModelsPage,t)}del(t,r){return this._client.delete(`/models/${t}`,r)}}class ModelsPage extends Page{}Models.ModelsPage=ModelsPage;class Moderations extends APIResource{create(t,r){return this._client.post("/moderations",{body:t,...r})}}class Parts extends APIResource{create(t,r,o){return this._client.post(`/uploads/${t}/parts`,multipartFormRequestOptions({body:r,...o}))}}class Uploads extends APIResource{constructor(){super(...arguments),this.parts=new Parts(this._client)}create(t,r){return this._client.post("/uploads",{body:t,...r})}cancel(t,r){return this._client.post(`/uploads/${t}/cancel`,r)}complete(t,r,o){return this._client.post(`/uploads/${t}/complete`,{body:r,...o})}}Uploads.Parts=Parts;var _a$1;class OpenAI extends APIClient{constructor({baseURL:t=readEnv("OPENAI_BASE_URL"),apiKey:r=readEnv("OPENAI_API_KEY"),organization:o=readEnv("OPENAI_ORG_ID")??null,project:n=readEnv("OPENAI_PROJECT_ID")??null,...a}={}){if(r===void 0)throw new OpenAIError("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:r,organization:o,project:n,...a,baseURL:t||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&isRunningInBrowser())throw new OpenAIError(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new Completions(this),this.chat=new Chat$1(this),this.embeddings=new Embeddings(this),this.files=new Files(this),this.images=new Images(this),this.audio=new Audio(this),this.moderations=new Moderations(this),this.models=new Models(this),this.fineTuning=new FineTuning(this),this.beta=new Beta(this),this.batches=new Batches(this),this.uploads=new Uploads(this),this._options=s,this.apiKey=r,this.organization=o,this.project=n}defaultQuery(){return this._options.defaultQuery}defaultHeaders(t){return{...super.defaultHeaders(t),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(t){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(t){return stringify(t,{arrayFormat:"brackets"})}}_a$1=OpenAI;OpenAI.OpenAI=_a$1;OpenAI.DEFAULT_TIMEOUT=6e5;OpenAI.OpenAIError=OpenAIError;OpenAI.APIError=APIError;OpenAI.APIConnectionError=APIConnectionError;OpenAI.APIConnectionTimeoutError=APIConnectionTimeoutError;OpenAI.APIUserAbortError=APIUserAbortError;OpenAI.NotFoundError=NotFoundError;OpenAI.ConflictError=ConflictError;OpenAI.RateLimitError=RateLimitError;OpenAI.BadRequestError=BadRequestError;OpenAI.AuthenticationError=AuthenticationError;OpenAI.InternalServerError=InternalServerError;OpenAI.PermissionDeniedError=PermissionDeniedError;OpenAI.UnprocessableEntityError=UnprocessableEntityError;OpenAI.toFile=toFile;OpenAI.fileFromPath=fileFromPath;OpenAI.Completions=Completions;OpenAI.Chat=Chat$1;OpenAI.ChatCompletionsPage=ChatCompletionsPage;OpenAI.Embeddings=Embeddings;OpenAI.Files=Files;OpenAI.FileObjectsPage=FileObjectsPage;OpenAI.Images=Images;OpenAI.Audio=Audio;OpenAI.Moderations=Moderations;OpenAI.Models=Models;OpenAI.ModelsPage=ModelsPage;OpenAI.FineTuning=FineTuning;OpenAI.Beta=Beta;OpenAI.Batches=Batches;OpenAI.BatchesPage=BatchesPage;OpenAI.Uploads=Uploads;let b=class{constructor(e){this.baseURL=(e==null?void 0:e.baseURL)??"https://api.openai.com/v1",this.apiKey=(e==null?void 0:e.apiKey)??"",this.defaultModel=(e==null?void 0:e.defaultModel)??"gpt-3.5-turbo",this._api=new OpenAI({apiKey:this.apiKey,baseURL:this.baseURL,dangerouslyAllowBrowser:!0}),this._axios=axios.create({baseURL:this.baseURL,headers:{Authorization:`Bearer ${this.apiKey}`}})}loadDict(e){this.baseURL=(e==null?void 0:e.baseURL)??"https://api.openai.com/v1",this.apiKey=(e==null?void 0:e.apiKey)??"",this.defaultModel=(e==null?void 0:e.defaultModel)??"gpt-3.5-turbo"}async createChat__(e,t){return this._api.chat.completions.create(e,t)}async createChat(e,t){const r=await this._axios.post("/chat/completions",e,t);return r==null?void 0:r.data}async*createChatStream(e){var t;try{const r=await fetch(`${this.baseURL}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(e)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const o=r.body.getReader(),n=new TextDecoder("utf-8");let a="";for(;;){const{done:s,value:u}=await o.read();if(s)break;const i=n.decode(u,{stream:!0});a+=i;const c=a.split(`
`);a=c.pop()??"";for(const d of c)if((t=d.trim())!=null&&t.length)try{const l=d.trim().slice(5).trim();if(l=="[DONE]"){yield{done:!0};continue}yield JSON.parse(l)}catch(l){console.error("Error parsing JSON:",l)}}}catch(r){throw console.error("Error streaming LLM JSON data:",r),r}}async chat(e,t=void 0,r=[],o={}){var n,a;const s=await this.createChat({model:this.defaultModel,messages:[...t!=null&&t.length?[{role:"system",content:t}]:[],...r??[],{role:"user",content:e}],temperature:.4,...o??{}}),{choices:u=[]}=s;return(a=(n=u==null?void 0:u[0])==null?void 0:n.message)==null?void 0:a.content}async*chatStream(e,t=void 0,r=[],o={},n=!1){var a,s,u;for await(const i of this.createChatStream({model:this.defaultModel,messages:[...t!=null&&t.length?[{role:"system",content:t}]:[],...r??[],...n?[]:[{role:"user",content:e}]],temperature:.4,stream:!0,...o??{}})){if(i.done){yield{done:!0};break}yield(u=(s=(a=i==null?void 0:i.choices)==null?void 0:a[0])==null?void 0:s.delta)==null?void 0:u.content}}setAPIKey(e){this.apiKey=e,this._api.apiKey=e}setBaseURL(e){this.baseURL=e,this._api.baseURL=e}async listModels(){return(await this._axios.get("/models")).data}};const S="[<[([[TASK]])]>]",k="[<[([[REQ]])]>]",w="[<[([[RES]])]>]",O$1='\nJSON\n\n```[<[([[TASK]])]>]```\n\n```[<[([[REQ]])]>]```\nJSON\n```[<[([[RES]])]>]```\n\n- JSONmarkdown"\\`\\`\\`json...\\`\\`\\`"\n- JSON_msg\n'.trim(),M='\nYou are an AI function, which returns the processing result according to the parameters input by the user and outputs in JSON format.\nYour task is:\n```[<[([[TASK]])]>]```\nThe input format you accept is:\n```[<[([[REQ]])]>]```\nYou should return a JSON object in the format:\n```[<[([[RES]])]>]```\nNote:\n- You are a function, can only return JSON format, cannot return natural language content, and cannot attach markdown code block tags (i.e. a block wrapped in three backticks "\\`\\`\\`json...\\`\\`\\`").\n- If you really want to explain something, you can attach a `_msg` sting field in the returned JSON object, but it\'s not recommended.\n'.trim();class v{constructor(t){var r,o,n,a,s,u,i;this.name=(t==null?void 0:t.name)??"",this.desc=(t==null?void 0:t.desc)??"",this.ai=new b(t==null?void 0:t.ai),this.task=(t==null?void 0:t.task)??"",this.reqFormat=(t==null?void 0:t.reqFormat)??"",this.resFormat=(t==null?void 0:t.resFormat)??"",R.isString(this.resFormat)||(this.resFormat=JSON.stringify(this.resFormat)),this.template=((r=t==null?void 0:t.template)!=null&&r.length?t==null?void 0:t.template:null)??M??O$1,this.taskMark=((o=t==null?void 0:t.taskMark)!=null&&o.length?t==null?void 0:t.taskMark:null)??S,this.reqMark=((n=t==null?void 0:t.reqMark)!=null&&n.length?t==null?void 0:t.reqMark:null)??k,this.resMark=((a=t==null?void 0:t.resMark)!=null&&a.length?t==null?void 0:t.resMark:null)??w,this.instruction=(i=(u=(s=t==null?void 0:t.instruction)==null?void 0:s.trim)==null?void 0:u.call(s))!=null&&i.length?t==null?void 0:t.instruction:this.makeInstruction(),this.schema=t==null?void 0:t.schema}makeInstruction(t=this.task,r=this.reqFormat,o=this.resFormat){return this.template.replace(this.taskMark,t).replace(this.reqMark,r).replace(this.resMark,o)}async doTask(t,r=[],o={}){const n=R.isString(t)?t:JSON.stringify(t);let a=await this.ai.chat(n,this.instruction,r,o)??"";a=a.trim(),a.slice(0,3)=="```"&&(a=a.replace(/^```[^\n]+\n|```$/g,"").trim());try{return lib$2.parse(a)}catch(s){return{_error:"NOT_JSON",_output:a,_errorString:String(s)}}}async*doTaskStream(t,r=[],o={}){const n=R.isString(t)?t:JSON.stringify(t);for await(const a of this.ai.chatStream(n,this.instruction,r,o))yield a}}const L=[{name:"",desc:"",instruction:`
    
    JSON
    
    
    - name: 
    - desc: 
    - task: 
    - reqFormat: JSON
    - resFormat:  JSON Schema JSONJSON
    JSON
    
    - JSONmarkdown"\\\`\\\`\\\`json...\\\`\\\`\\\`"
    - JSON_msg
    `.trim(),requestExamples:["LaTeX()","","JavaScriptJS",""]},{name:"",desc:"",task:"texttypetexttype",reqFormat:"",resFormat:'[{"text": "1", "type": "1"}, {"text": "2", "type": "2"}, ...]',requestExamples:["","","","104","",""]},{name:"",desc:"",task:"",reqFormat:"(LaTeX)",resFormat:'{"steps": string[], "result": any, "_error"?: any, "_msg"?: }',requestExamples:["(|3^2-4^3|)"]},{name:"",desc:"",task:"",reqFormat:"",resFormat:'{ "answer": , "_msg":  }'}],A$1=[{name:"DeepSeek",type:"ChatSupplier",desc:"DeepSeek",docUrl:"https://platform.deepseek.com/docs",baseUrl:"https://api.deepseek.com/v1",defaultModel:"deepseek-chat",chatUrl:"/chat/completions",modelsUrl:"/models"},{name:"",type:"ChatSupplier",desc:"",docUrl:"https://help.aliyun.com/zh/model-studio/user-guide/multi-round-conversation?spm=a2c4g.11186623.help-menu-2400256.d_1_0_0_4.1b54b0a8Obvgrf",baseUrl:"https://dashscope.aliyuncs.com/compatible-mode/v1",defaultModel:"deepseek-v3",chatUrl:"/chat/completions",modelsUrl:"/models"},{name:"",type:"ChatSupplier",desc:"",docUrl:"https://doc.zhizengzeng.com/",baseUrl:"https://api.zhizengzeng.com/v1",defaultModel:"deepseek-chat",chatUrl:"/chat/completions",modelsUrl:"/models"},{name:"",type:"ChatSupplier",desc:"",docUrl:"https://docs.siliconflow.cn/",baseUrl:"https://api.siliconflow.cn/v1",defaultModel:"deepseek-ai/DeepSeek-V3",chatUrl:"/chat/completions",modelsUrl:"/models"},{name:"ZhiPu",type:"ChatSupplier",desc:"",docUrl:"https://open.bigmodel.cn/dev/api",baseUrl:"https://open.bigmodel.cn/api/paas/v4",defaultModel:"glm-4",chatUrl:"/chat/completions",modelsUrl:"/models",models:[{id:"glm-4"},{id:"glm-4-air"},{id:"glm-4-flash"},{id:"glm-3-turbo"}]},{name:"Moonshot",type:"ChatSupplier",desc:"Moonshot",docUrl:"https://platform.moonshot.cn/docs/api-reference",baseUrl:"https://api.moonshot.cn/v1",defaultModel:"moonshot-v1-8k",chatUrl:"/chat/completions",modelsUrl:"/models",balanceUrl:"/users/me/balance",countTokenUrl:"/tokenizers/estimate-token-count"},{name:"OpenAI",type:"ChatSupplier",desc:"OpenAI",docUrl:"https://platform.openai.com/docs/api-reference/chat",baseUrl:"https://api.openai.com/v1",defaultModel:"gpt-3.5-turbo",chatUrl:"/chat/completions",modelsUrl:"/models",notes:`
    https://cookbook.openai.com/examples/how_to_count_tokens_with_tiktoken
    `.trim()},{name:"",type:"ChatSupplier",desc:"",docUrl:"",baseUrl:"https://api.132999.xyz/v1",defaultModel:"gpt-3.5-turbo",chatUrl:"/chat/completions",modelsUrl:"/models"}];var N=(e=>(e.System="system",e.Assistant="assistant",e.User="user",e))(N||{});const DEFAULT_MODEL={label:"[[<DEFAULT>]]"},defaultBatchConfig={inputTemplate:"____",slotMark:"____",slotMarkIsRegExp:!1,itemsText:"  ",splitter:"[\\s\\n]+",splitterIsRegExp:!0,concurrency:1,showMore:!1,skip:0,limit:1/0,delay:700,retry:3,retryDaley:1e4,retryDaleyDelta:5e3},defaultTaskMark="[<[([[TASK]])]>]",defaultReqMark="[<[([[REQ]])]>]",defaultResMark="[<[([[RES]])]>]",defaultInstructionTemplateEN='\nYou are an AI function, which returns the processing result according to the parameters input by the user and outputs in JSON format.\nYour task is:\n```[<[([[TASK]])]>]```\nThe input format you accept is:\n```[<[([[REQ]])]>]```\nYou should return a JSON object in the format:\n```[<[([[RES]])]>]```\nNote:\n- You are a function, can only return JSON format, cannot return natural language content, and cannot attach markdown code block tags (i.e. a block wrapped in three backticks "\\`\\`\\`json...\\`\\`\\`").\n- If you really want to explain something, you can attach a `_msg` sting field in the returned JSON object, but it\'s not recommended.\n'.trim(),decodeCache={};function getDecodeCache(e){let t=decodeCache[e];if(t)return t;t=decodeCache[e]=[];for(let r=0;r<128;r++){const o=String.fromCharCode(r);t.push(o)}for(let r=0;r<e.length;r++){const o=e.charCodeAt(r);t[o]="%"+("0"+o.toString(16).toUpperCase()).slice(-2)}return t}function decode$1(e,t){typeof t!="string"&&(t=decode$1.defaultChars);const r=getDecodeCache(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(o){let n="";for(let a=0,s=o.length;a<s;a+=3){const u=parseInt(o.slice(a+1,a+3),16);if(u<128){n+=r[u];continue}if((u&224)===192&&a+3<s){const i=parseInt(o.slice(a+4,a+6),16);if((i&192)===128){const c=u<<6&1984|i&63;c<128?n+="":n+=String.fromCharCode(c),a+=3;continue}}if((u&240)===224&&a+6<s){const i=parseInt(o.slice(a+4,a+6),16),c=parseInt(o.slice(a+7,a+9),16);if((i&192)===128&&(c&192)===128){const d=u<<12&61440|i<<6&4032|c&63;d<2048||d>=55296&&d<=57343?n+="":n+=String.fromCharCode(d),a+=6;continue}}if((u&248)===240&&a+9<s){const i=parseInt(o.slice(a+4,a+6),16),c=parseInt(o.slice(a+7,a+9),16),d=parseInt(o.slice(a+10,a+12),16);if((i&192)===128&&(c&192)===128&&(d&192)===128){let l=u<<18&1835008|i<<12&258048|c<<6&4032|d&63;l<65536||l>1114111?n+="":(l-=65536,n+=String.fromCharCode(55296+(l>>10),56320+(l&1023))),a+=9;continue}}n+=""}return n})}decode$1.defaultChars=";/?:@&=+$,#";decode$1.componentChars="";const encodeCache={};function getEncodeCache(e){let t=encodeCache[e];if(t)return t;t=encodeCache[e]=[];for(let r=0;r<128;r++){const o=String.fromCharCode(r);/^[0-9a-z]$/i.test(o)?t.push(o):t.push("%"+("0"+r.toString(16).toUpperCase()).slice(-2))}for(let r=0;r<e.length;r++)t[e.charCodeAt(r)]=e[r];return t}function encode$1(e,t,r){typeof t!="string"&&(r=t,t=encode$1.defaultChars),typeof r>"u"&&(r=!0);const o=getEncodeCache(t);let n="";for(let a=0,s=e.length;a<s;a++){const u=e.charCodeAt(a);if(r&&u===37&&a+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(a+1,a+3))){n+=e.slice(a,a+3),a+=2;continue}if(u<128){n+=o[u];continue}if(u>=55296&&u<=57343){if(u>=55296&&u<=56319&&a+1<s){const i=e.charCodeAt(a+1);if(i>=56320&&i<=57343){n+=encodeURIComponent(e[a]+e[a+1]),a++;continue}}n+="%EF%BF%BD";continue}n+=encodeURIComponent(e[a])}return n}encode$1.defaultChars=";/?:@&=+$,-_.!~*'()#";encode$1.componentChars="-_.!~*'()";function format(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function urlParse(e,t){if(e&&e instanceof Url)return e;const r=new Url;return r.parse(e,t),r}Url.prototype.parse=function(e,t){let r,o,n,a=e;if(a=a.trim(),!t&&e.split("#").length===1){const c=simplePathPattern.exec(a);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let s=protocolPattern.exec(a);if(s&&(s=s[0],r=s.toLowerCase(),this.protocol=s,a=a.substr(s.length)),(t||s||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(n=a.substr(0,2)==="//",n&&!(s&&hostlessProtocol[s])&&(a=a.substr(2),this.slashes=!0)),!hostlessProtocol[s]&&(n||s&&!slashedProtocol[s])){let c=-1;for(let p=0;p<hostEndingChars.length;p++)o=a.indexOf(hostEndingChars[p]),o!==-1&&(c===-1||o<c)&&(c=o);let d,l;c===-1?l=a.lastIndexOf("@"):l=a.lastIndexOf("@",c),l!==-1&&(d=a.slice(0,l),a=a.slice(l+1),this.auth=d),c=-1;for(let p=0;p<nonHostChars.length;p++)o=a.indexOf(nonHostChars[p]),o!==-1&&(c===-1||o<c)&&(c=o);c===-1&&(c=a.length),a[c-1]===":"&&c--;const g=a.slice(0,c);a=a.slice(c),this.parseHost(g),this.hostname=this.hostname||"";const f=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!f){const p=this.hostname.split(/\./);for(let m=0,y=p.length;m<y;m++){const _=p[m];if(_&&!_.match(hostnamePartPattern)){let x="";for(let E=0,C=_.length;E<C;E++)_.charCodeAt(E)>127?x+="x":x+=_[E];if(!x.match(hostnamePartPattern)){const E=p.slice(0,m),C=p.slice(m+1),D=_.match(hostnamePartStart);D&&(E.push(D[1]),C.unshift(D[2])),C.length&&(a=C.join(".")+a),this.hostname=E.join(".");break}}}}this.hostname.length>hostnameMaxLen&&(this.hostname=""),f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const u=a.indexOf("#");u!==-1&&(this.hash=a.substr(u),a=a.slice(0,u));const i=a.indexOf("?");return i!==-1&&(this.search=a.substr(i),a=a.slice(0,i)),a&&(this.pathname=a),slashedProtocol[r]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Url.prototype.parseHost=function(e){let t=portPattern.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const mdurl=Object.freeze(Object.defineProperty({__proto__:null,decode:decode$1,encode:encode$1,format,parse:urlParse},Symbol.toStringTag,{value:"Module"})),Any=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Cc=/[\0-\x1F\x7F-\x9F]/,regex$1=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,P=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,regex=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Z=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,ucmicro=Object.freeze(Object.defineProperty({__proto__:null,Any,Cc,Cf:regex$1,P,S:regex,Z},Symbol.toStringTag,{value:"Module"})),htmlDecodeTree=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),xmlDecodeTree=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var _a;const decodeMap=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),fromCodePoint$1=(_a=String.fromCodePoint)!==null&&_a!==void 0?_a:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function replaceCodePoint(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=decodeMap.get(e))!==null&&t!==void 0?t:e}var CharCodes;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(CharCodes||(CharCodes={}));const TO_LOWER_BIT=32;var BinTrieFlags;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(BinTrieFlags||(BinTrieFlags={}));function isNumber(e){return e>=CharCodes.ZERO&&e<=CharCodes.NINE}function isHexadecimalCharacter(e){return e>=CharCodes.UPPER_A&&e<=CharCodes.UPPER_F||e>=CharCodes.LOWER_A&&e<=CharCodes.LOWER_F}function isAsciiAlphaNumeric(e){return e>=CharCodes.UPPER_A&&e<=CharCodes.UPPER_Z||e>=CharCodes.LOWER_A&&e<=CharCodes.LOWER_Z||isNumber(e)}function isEntityInAttributeInvalidEnd(e){return e===CharCodes.EQUALS||isAsciiAlphaNumeric(e)}var EntityDecoderState;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(EntityDecoderState||(EntityDecoderState={}));var DecodingMode;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(DecodingMode||(DecodingMode={}));class EntityDecoder{constructor(t,r,o){this.decodeTree=t,this.emitCodePoint=r,this.errors=o,this.state=EntityDecoderState.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=DecodingMode.Strict}startEntity(t){this.decodeMode=t,this.state=EntityDecoderState.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,r){switch(this.state){case EntityDecoderState.EntityStart:return t.charCodeAt(r)===CharCodes.NUM?(this.state=EntityDecoderState.NumericStart,this.consumed+=1,this.stateNumericStart(t,r+1)):(this.state=EntityDecoderState.NamedEntity,this.stateNamedEntity(t,r));case EntityDecoderState.NumericStart:return this.stateNumericStart(t,r);case EntityDecoderState.NumericDecimal:return this.stateNumericDecimal(t,r);case EntityDecoderState.NumericHex:return this.stateNumericHex(t,r);case EntityDecoderState.NamedEntity:return this.stateNamedEntity(t,r)}}stateNumericStart(t,r){return r>=t.length?-1:(t.charCodeAt(r)|TO_LOWER_BIT)===CharCodes.LOWER_X?(this.state=EntityDecoderState.NumericHex,this.consumed+=1,this.stateNumericHex(t,r+1)):(this.state=EntityDecoderState.NumericDecimal,this.stateNumericDecimal(t,r))}addToNumericResult(t,r,o,n){if(r!==o){const a=o-r;this.result=this.result*Math.pow(n,a)+parseInt(t.substr(r,a),n),this.consumed+=a}}stateNumericHex(t,r){const o=r;for(;r<t.length;){const n=t.charCodeAt(r);if(isNumber(n)||isHexadecimalCharacter(n))r+=1;else return this.addToNumericResult(t,o,r,16),this.emitNumericEntity(n,3)}return this.addToNumericResult(t,o,r,16),-1}stateNumericDecimal(t,r){const o=r;for(;r<t.length;){const n=t.charCodeAt(r);if(isNumber(n))r+=1;else return this.addToNumericResult(t,o,r,10),this.emitNumericEntity(n,2)}return this.addToNumericResult(t,o,r,10),-1}emitNumericEntity(t,r){var o;if(this.consumed<=r)return(o=this.errors)===null||o===void 0||o.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===CharCodes.SEMI)this.consumed+=1;else if(this.decodeMode===DecodingMode.Strict)return 0;return this.emitCodePoint(replaceCodePoint(this.result),this.consumed),this.errors&&(t!==CharCodes.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,r){const{decodeTree:o}=this;let n=o[this.treeIndex],a=(n&BinTrieFlags.VALUE_LENGTH)>>14;for(;r<t.length;r++,this.excess++){const s=t.charCodeAt(r);if(this.treeIndex=determineBranch(o,n,this.treeIndex+Math.max(1,a),s),this.treeIndex<0)return this.result===0||this.decodeMode===DecodingMode.Attribute&&(a===0||isEntityInAttributeInvalidEnd(s))?0:this.emitNotTerminatedNamedEntity();if(n=o[this.treeIndex],a=(n&BinTrieFlags.VALUE_LENGTH)>>14,a!==0){if(s===CharCodes.SEMI)return this.emitNamedEntityData(this.treeIndex,a,this.consumed+this.excess);this.decodeMode!==DecodingMode.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:r,decodeTree:o}=this,n=(o[r]&BinTrieFlags.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,n,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,r,o){const{decodeTree:n}=this;return this.emitCodePoint(r===1?n[t]&~BinTrieFlags.VALUE_LENGTH:n[t+1],o),r===3&&this.emitCodePoint(n[t+2],o),o}end(){var t;switch(this.state){case EntityDecoderState.NamedEntity:return this.result!==0&&(this.decodeMode!==DecodingMode.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case EntityDecoderState.NumericDecimal:return this.emitNumericEntity(0,2);case EntityDecoderState.NumericHex:return this.emitNumericEntity(0,3);case EntityDecoderState.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case EntityDecoderState.EntityStart:return 0}}}function getDecoder(e){let t="";const r=new EntityDecoder(e,o=>t+=fromCodePoint$1(o));return function(n,a){let s=0,u=0;for(;(u=n.indexOf("&",u))>=0;){t+=n.slice(s,u),r.startEntity(a);const c=r.write(n,u+1);if(c<0){s=u+r.end();break}s=u+c,u=c===0?s+1:s}const i=t+n.slice(s);return t="",i}}function determineBranch(e,t,r,o){const n=(t&BinTrieFlags.BRANCH_LENGTH)>>7,a=t&BinTrieFlags.JUMP_TABLE;if(n===0)return a!==0&&o===a?r:-1;if(a){const i=o-a;return i<0||i>=n?-1:e[r+i]-1}let s=r,u=s+n-1;for(;s<=u;){const i=s+u>>>1,c=e[i];if(c<o)s=i+1;else if(c>o)u=i-1;else return e[i+n]}return-1}const htmlDecoder=getDecoder(htmlDecodeTree);getDecoder(xmlDecodeTree);function decodeHTML(e,t=DecodingMode.Legacy){return htmlDecoder(e,t)}function _class$1(e){return Object.prototype.toString.call(e)}function isString$1(e){return _class$1(e)==="[object String]"}const _hasOwnProperty=Object.prototype.hasOwnProperty;function has(e,t){return _hasOwnProperty.call(e,t)}function assign$1(e){return Array.prototype.slice.call(arguments,1).forEach(function(r){if(r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(o){e[o]=r[o]})}}),e}function arrayReplaceAt(e,t,r){return[].concat(e.slice(0,t),r,e.slice(t+1))}function isValidEntityCode(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function fromCodePoint(e){if(e>65535){e-=65536;const t=55296+(e>>10),r=56320+(e&1023);return String.fromCharCode(t,r)}return String.fromCharCode(e)}const UNESCAPE_MD_RE=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,ENTITY_RE=/&([a-z#][a-z0-9]{1,31});/gi,UNESCAPE_ALL_RE=new RegExp(UNESCAPE_MD_RE.source+"|"+ENTITY_RE.source,"gi"),DIGITAL_ENTITY_TEST_RE=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function replaceEntityPattern(e,t){if(t.charCodeAt(0)===35&&DIGITAL_ENTITY_TEST_RE.test(t)){const o=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return isValidEntityCode(o)?fromCodePoint(o):e}const r=decodeHTML(e);return r!==e?r:e}function unescapeMd(e){return e.indexOf("\\")<0?e:e.replace(UNESCAPE_MD_RE,"$1")}function unescapeAll(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(UNESCAPE_ALL_RE,function(t,r,o){return r||replaceEntityPattern(t,o)})}const HTML_ESCAPE_TEST_RE=/[&<>"]/,HTML_ESCAPE_REPLACE_RE=/[&<>"]/g,HTML_REPLACEMENTS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function replaceUnsafeChar(e){return HTML_REPLACEMENTS[e]}function escapeHtml(e){return HTML_ESCAPE_TEST_RE.test(e)?e.replace(HTML_ESCAPE_REPLACE_RE,replaceUnsafeChar):e}const REGEXP_ESCAPE_RE=/[.?*+^$[\]\\(){}|-]/g;function escapeRE$1(e){return e.replace(REGEXP_ESCAPE_RE,"\\$&")}function isSpace(e){switch(e){case 9:case 32:return!0}return!1}function isWhiteSpace(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function isPunctChar(e){return P.test(e)||regex.test(e)}function isMdAsciiPunct(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function normalizeReference(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const lib={mdurl,ucmicro},utils=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt,assign:assign$1,escapeHtml,escapeRE:escapeRE$1,fromCodePoint,has,isMdAsciiPunct,isPunctChar,isSpace,isString:isString$1,isValidEntityCode,isWhiteSpace,lib,normalizeReference,unescapeAll,unescapeMd},Symbol.toStringTag,{value:"Module"}));function parseLinkLabel(e,t,r){let o,n,a,s;const u=e.posMax,i=e.pos;for(e.pos=t+1,o=1;e.pos<u;){if(a=e.src.charCodeAt(e.pos),a===93&&(o--,o===0)){n=!0;break}if(s=e.pos,e.md.inline.skipToken(e),a===91){if(s===e.pos-1)o++;else if(r)return e.pos=i,-1}}let c=-1;return n&&(c=e.pos),e.pos=i,c}function parseLinkDestination(e,t,r){let o,n=t;const a={ok:!1,pos:0,str:""};if(e.charCodeAt(n)===60){for(n++;n<r;){if(o=e.charCodeAt(n),o===10||o===60)return a;if(o===62)return a.pos=n+1,a.str=unescapeAll(e.slice(t+1,n)),a.ok=!0,a;if(o===92&&n+1<r){n+=2;continue}n++}return a}let s=0;for(;n<r&&(o=e.charCodeAt(n),!(o===32||o<32||o===127));){if(o===92&&n+1<r){if(e.charCodeAt(n+1)===32)break;n+=2;continue}if(o===40&&(s++,s>32))return a;if(o===41){if(s===0)break;s--}n++}return t===n||s!==0||(a.str=unescapeAll(e.slice(t,n)),a.pos=n,a.ok=!0),a}function parseLinkTitle(e,t,r,o){let n,a=t;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(o)s.str=o.str,s.marker=o.marker;else{if(a>=r)return s;let u=e.charCodeAt(a);if(u!==34&&u!==39&&u!==40)return s;t++,a++,u===40&&(u=41),s.marker=u}for(;a<r;){if(n=e.charCodeAt(a),n===s.marker)return s.pos=a+1,s.str+=unescapeAll(e.slice(t,a)),s.ok=!0,s;if(n===40&&s.marker===41)return s;n===92&&a+1<r&&a++,a++}return s.can_continue=!0,s.str+=unescapeAll(e.slice(t,a)),s}const helpers=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination,parseLinkLabel,parseLinkTitle},Symbol.toStringTag,{value:"Module"})),default_rules={};default_rules.code_inline=function(e,t,r,o,n){const a=e[t];return"<code"+n.renderAttrs(a)+">"+escapeHtml(a.content)+"</code>"};default_rules.code_block=function(e,t,r,o,n){const a=e[t];return"<pre"+n.renderAttrs(a)+"><code>"+escapeHtml(e[t].content)+`</code></pre>
`};default_rules.fence=function(e,t,r,o,n){const a=e[t],s=a.info?unescapeAll(a.info).trim():"";let u="",i="";if(s){const d=s.split(/(\s+)/g);u=d[0],i=d.slice(2).join("")}let c;if(r.highlight?c=r.highlight(a.content,u,i)||escapeHtml(a.content):c=escapeHtml(a.content),c.indexOf("<pre")===0)return c+`
`;if(s){const d=a.attrIndex("class"),l=a.attrs?a.attrs.slice():[];d<0?l.push(["class",r.langPrefix+u]):(l[d]=l[d].slice(),l[d][1]+=" "+r.langPrefix+u);const g={attrs:l};return`<pre><code${n.renderAttrs(g)}>${c}</code></pre>
`}return`<pre><code${n.renderAttrs(a)}>${c}</code></pre>
`};default_rules.image=function(e,t,r,o,n){const a=e[t];return a.attrs[a.attrIndex("alt")][1]=n.renderInlineAsText(a.children,r,o),n.renderToken(e,t,r)};default_rules.hardbreak=function(e,t,r){return r.xhtmlOut?`<br />
`:`<br>
`};default_rules.softbreak=function(e,t,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};default_rules.text=function(e,t){return escapeHtml(e[t].content)};default_rules.html_block=function(e,t){return e[t].content};default_rules.html_inline=function(e,t){return e[t].content};function Renderer(){this.rules=assign$1({},default_rules)}Renderer.prototype.renderAttrs=function e(t){let r,o,n;if(!t.attrs)return"";for(n="",r=0,o=t.attrs.length;r<o;r++)n+=" "+escapeHtml(t.attrs[r][0])+'="'+escapeHtml(t.attrs[r][1])+'"';return n};Renderer.prototype.renderToken=function e(t,r,o){const n=t[r];let a="";if(n.hidden)return"";n.block&&n.nesting!==-1&&r&&t[r-1].hidden&&(a+=`
`),a+=(n.nesting===-1?"</":"<")+n.tag,a+=this.renderAttrs(n),n.nesting===0&&o.xhtmlOut&&(a+=" /");let s=!1;if(n.block&&(s=!0,n.nesting===1&&r+1<t.length)){const u=t[r+1];(u.type==="inline"||u.hidden||u.nesting===-1&&u.tag===n.tag)&&(s=!1)}return a+=s?`>
`:">",a};Renderer.prototype.renderInline=function(e,t,r){let o="";const n=this.rules;for(let a=0,s=e.length;a<s;a++){const u=e[a].type;typeof n[u]<"u"?o+=n[u](e,a,t,r,this):o+=this.renderToken(e,a,t)}return o};Renderer.prototype.renderInlineAsText=function(e,t,r){let o="";for(let n=0,a=e.length;n<a;n++)switch(e[n].type){case"text":o+=e[n].content;break;case"image":o+=this.renderInlineAsText(e[n].children,t,r);break;case"html_inline":case"html_block":o+=e[n].content;break;case"softbreak":case"hardbreak":o+=`
`;break}return o};Renderer.prototype.render=function(e,t,r){let o="";const n=this.rules;for(let a=0,s=e.length;a<s;a++){const u=e[a].type;u==="inline"?o+=this.renderInline(e[a].children,t,r):typeof n[u]<"u"?o+=n[u](e,a,t,r,this):o+=this.renderToken(e,a,t,r)}return o};function Ruler(){this.__rules__=[],this.__cache__=null}Ruler.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Ruler.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(r){r.enabled&&r.alt.forEach(function(o){t.indexOf(o)<0&&t.push(o)})}),e.__cache__={},t.forEach(function(r){e.__cache__[r]=[],e.__rules__.forEach(function(o){o.enabled&&(r&&o.alt.indexOf(r)<0||e.__cache__[r].push(o.fn))})})};Ruler.prototype.at=function(e,t,r){const o=this.__find__(e),n=r||{};if(o===-1)throw new Error("Parser rule not found: "+e);this.__rules__[o].fn=t,this.__rules__[o].alt=n.alt||[],this.__cache__=null};Ruler.prototype.before=function(e,t,r,o){const n=this.__find__(e),a=o||{};if(n===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(n,0,{name:t,enabled:!0,fn:r,alt:a.alt||[]}),this.__cache__=null};Ruler.prototype.after=function(e,t,r,o){const n=this.__find__(e),a=o||{};if(n===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(n+1,0,{name:t,enabled:!0,fn:r,alt:a.alt||[]}),this.__cache__=null};Ruler.prototype.push=function(e,t,r){const o=r||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:o.alt||[]}),this.__cache__=null};Ruler.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const r=[];return e.forEach(function(o){const n=this.__find__(o);if(n<0){if(t)return;throw new Error("Rules manager: invalid rule name "+o)}this.__rules__[n].enabled=!0,r.push(o)},this),this.__cache__=null,r};Ruler.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(e,t)};Ruler.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const r=[];return e.forEach(function(o){const n=this.__find__(o);if(n<0){if(t)return;throw new Error("Rules manager: invalid rule name "+o)}this.__rules__[n].enabled=!1,r.push(o)},this),this.__cache__=null,r};Ruler.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Token(e,t,r){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Token.prototype.attrIndex=function e(t){if(!this.attrs)return-1;const r=this.attrs;for(let o=0,n=r.length;o<n;o++)if(r[o][0]===t)return o;return-1};Token.prototype.attrPush=function e(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Token.prototype.attrSet=function e(t,r){const o=this.attrIndex(t),n=[t,r];o<0?this.attrPush(n):this.attrs[o]=n};Token.prototype.attrGet=function e(t){const r=this.attrIndex(t);let o=null;return r>=0&&(o=this.attrs[r][1]),o};Token.prototype.attrJoin=function e(t,r){const o=this.attrIndex(t);o<0?this.attrPush([t,r]):this.attrs[o][1]=this.attrs[o][1]+" "+r};function StateCore(e,t,r){this.src=e,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=t}StateCore.prototype.Token=Token;const NEWLINES_RE=/\r\n?|\n/g,NULL_RE=/\0/g;function normalize(e){let t;t=e.src.replace(NEWLINES_RE,`
`),t=t.replace(NULL_RE,""),e.src=t}function block(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function inline(e){const t=e.tokens;for(let r=0,o=t.length;r<o;r++){const n=t[r];n.type==="inline"&&e.md.inline.parse(n.content,e.md,e.env,n.children)}}function isLinkOpen$1(e){return/^<a[>\s]/i.test(e)}function isLinkClose$1(e){return/^<\/a\s*>/i.test(e)}function linkify$1(e){const t=e.tokens;if(e.md.options.linkify)for(let r=0,o=t.length;r<o;r++){if(t[r].type!=="inline"||!e.md.linkify.pretest(t[r].content))continue;let n=t[r].children,a=0;for(let s=n.length-1;s>=0;s--){const u=n[s];if(u.type==="link_close"){for(s--;n[s].level!==u.level&&n[s].type!=="link_open";)s--;continue}if(u.type==="html_inline"&&(isLinkOpen$1(u.content)&&a>0&&a--,isLinkClose$1(u.content)&&a++),!(a>0)&&u.type==="text"&&e.md.linkify.test(u.content)){const i=u.content;let c=e.md.linkify.match(i);const d=[];let l=u.level,g=0;c.length>0&&c[0].index===0&&s>0&&n[s-1].type==="text_special"&&(c=c.slice(1));for(let f=0;f<c.length;f++){const p=c[f].url,m=e.md.normalizeLink(p);if(!e.md.validateLink(m))continue;let y=c[f].text;c[f].schema?c[f].schema==="mailto:"&&!/^mailto:/i.test(y)?y=e.md.normalizeLinkText("mailto:"+y).replace(/^mailto:/,""):y=e.md.normalizeLinkText(y):y=e.md.normalizeLinkText("http://"+y).replace(/^http:\/\//,"");const _=c[f].index;if(_>g){const D=new e.Token("text","",0);D.content=i.slice(g,_),D.level=l,d.push(D)}const x=new e.Token("link_open","a",1);x.attrs=[["href",m]],x.level=l++,x.markup="linkify",x.info="auto",d.push(x);const E=new e.Token("text","",0);E.content=y,E.level=l,d.push(E);const C=new e.Token("link_close","a",-1);C.level=--l,C.markup="linkify",C.info="auto",d.push(C),g=c[f].lastIndex}if(g<i.length){const f=new e.Token("text","",0);f.content=i.slice(g),f.level=l,d.push(f)}t[r].children=n=arrayReplaceAt(n,s,d)}}}}const RARE_RE=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,SCOPED_ABBR_TEST_RE=/\((c|tm|r)\)/i,SCOPED_ABBR_RE=/\((c|tm|r)\)/ig,SCOPED_ABBR={c:"",r:"",tm:""};function replaceFn(e,t){return SCOPED_ABBR[t.toLowerCase()]}function replace_scoped(e){let t=0;for(let r=e.length-1;r>=0;r--){const o=e[r];o.type==="text"&&!t&&(o.content=o.content.replace(SCOPED_ABBR_RE,replaceFn)),o.type==="link_open"&&o.info==="auto"&&t--,o.type==="link_close"&&o.info==="auto"&&t++}}function replace_rare(e){let t=0;for(let r=e.length-1;r>=0;r--){const o=e[r];o.type==="text"&&!t&&RARE_RE.test(o.content)&&(o.content=o.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),o.type==="link_open"&&o.info==="auto"&&t--,o.type==="link_close"&&o.info==="auto"&&t++}}function replace(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(SCOPED_ABBR_TEST_RE.test(e.tokens[t].content)&&replace_scoped(e.tokens[t].children),RARE_RE.test(e.tokens[t].content)&&replace_rare(e.tokens[t].children))}const QUOTE_TEST_RE=/['"]/,QUOTE_RE=/['"]/g,APOSTROPHE="";function replaceAt(e,t,r){return e.slice(0,t)+r+e.slice(t+1)}function process_inlines(e,t){let r;const o=[];for(let n=0;n<e.length;n++){const a=e[n],s=e[n].level;for(r=o.length-1;r>=0&&!(o[r].level<=s);r--);if(o.length=r+1,a.type!=="text")continue;let u=a.content,i=0,c=u.length;e:for(;i<c;){QUOTE_RE.lastIndex=i;const d=QUOTE_RE.exec(u);if(!d)break;let l=!0,g=!0;i=d.index+1;const f=d[0]==="'";let p=32;if(d.index-1>=0)p=u.charCodeAt(d.index-1);else for(r=n-1;r>=0&&!(e[r].type==="softbreak"||e[r].type==="hardbreak");r--)if(e[r].content){p=e[r].content.charCodeAt(e[r].content.length-1);break}let m=32;if(i<c)m=u.charCodeAt(i);else for(r=n+1;r<e.length&&!(e[r].type==="softbreak"||e[r].type==="hardbreak");r++)if(e[r].content){m=e[r].content.charCodeAt(0);break}const y=isMdAsciiPunct(p)||isPunctChar(String.fromCharCode(p)),_=isMdAsciiPunct(m)||isPunctChar(String.fromCharCode(m)),x=isWhiteSpace(p),E=isWhiteSpace(m);if(E?l=!1:_&&(x||y||(l=!1)),x?g=!1:y&&(E||_||(g=!1)),m===34&&d[0]==='"'&&p>=48&&p<=57&&(g=l=!1),l&&g&&(l=y,g=_),!l&&!g){f&&(a.content=replaceAt(a.content,d.index,APOSTROPHE));continue}if(g)for(r=o.length-1;r>=0;r--){let C=o[r];if(o[r].level<s)break;if(C.single===f&&o[r].level===s){C=o[r];let D,$;f?(D=t.md.options.quotes[2],$=t.md.options.quotes[3]):(D=t.md.options.quotes[0],$=t.md.options.quotes[1]),a.content=replaceAt(a.content,d.index,$),e[C.token].content=replaceAt(e[C.token].content,C.pos,D),i+=$.length-1,C.token===n&&(i+=D.length-1),u=a.content,c=u.length,o.length=r;continue e}}l?o.push({token:n,pos:d.index,single:f,level:s}):g&&f&&(a.content=replaceAt(a.content,d.index,APOSTROPHE))}}}function smartquotes(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!QUOTE_TEST_RE.test(e.tokens[t].content)||process_inlines(e.tokens[t].children,e)}function text_join(e){let t,r;const o=e.tokens,n=o.length;for(let a=0;a<n;a++){if(o[a].type!=="inline")continue;const s=o[a].children,u=s.length;for(t=0;t<u;t++)s[t].type==="text_special"&&(s[t].type="text");for(t=r=0;t<u;t++)s[t].type==="text"&&t+1<u&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==r&&(s[r]=s[t]),r++);t!==r&&(s.length=r)}}const _rules$2=[["normalize",normalize],["block",block],["inline",inline],["linkify",linkify$1],["replacements",replace],["smartquotes",smartquotes],["text_join",text_join]];function Core(){this.ruler=new Ruler;for(let e=0;e<_rules$2.length;e++)this.ruler.push(_rules$2[e][0],_rules$2[e][1])}Core.prototype.process=function(e){const t=this.ruler.getRules("");for(let r=0,o=t.length;r<o;r++)t[r](e)};Core.prototype.State=StateCore;function StateBlock(e,t,r,o){this.src=e,this.md=t,this.env=r,this.tokens=o,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const n=this.src;for(let a=0,s=0,u=0,i=0,c=n.length,d=!1;s<c;s++){const l=n.charCodeAt(s);if(!d)if(isSpace(l)){u++,l===9?i+=4-i%4:i++;continue}else d=!0;(l===10||s===c-1)&&(l!==10&&s++,this.bMarks.push(a),this.eMarks.push(s),this.tShift.push(u),this.sCount.push(i),this.bsCount.push(0),d=!1,u=0,i=0,a=s+1)}this.bMarks.push(n.length),this.eMarks.push(n.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}StateBlock.prototype.push=function(e,t,r){const o=new Token(e,t,r);return o.block=!0,r<0&&this.level--,o.level=this.level,r>0&&this.level++,this.tokens.push(o),o};StateBlock.prototype.isEmpty=function e(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};StateBlock.prototype.skipEmptyLines=function e(t){for(let r=this.lineMax;t<r&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};StateBlock.prototype.skipSpaces=function e(t){for(let r=this.src.length;t<r;t++){const o=this.src.charCodeAt(t);if(!isSpace(o))break}return t};StateBlock.prototype.skipSpacesBack=function e(t,r){if(t<=r)return t;for(;t>r;)if(!isSpace(this.src.charCodeAt(--t)))return t+1;return t};StateBlock.prototype.skipChars=function e(t,r){for(let o=this.src.length;t<o&&this.src.charCodeAt(t)===r;t++);return t};StateBlock.prototype.skipCharsBack=function e(t,r,o){if(t<=o)return t;for(;t>o;)if(r!==this.src.charCodeAt(--t))return t+1;return t};StateBlock.prototype.getLines=function e(t,r,o,n){if(t>=r)return"";const a=new Array(r-t);for(let s=0,u=t;u<r;u++,s++){let i=0;const c=this.bMarks[u];let d=c,l;for(u+1<r||n?l=this.eMarks[u]+1:l=this.eMarks[u];d<l&&i<o;){const g=this.src.charCodeAt(d);if(isSpace(g))g===9?i+=4-(i+this.bsCount[u])%4:i++;else if(d-c<this.tShift[u])i++;else break;d++}i>o?a[s]=new Array(i-o+1).join(" ")+this.src.slice(d,l):a[s]=this.src.slice(d,l)}return a.join("")};StateBlock.prototype.Token=Token;const MAX_AUTOCOMPLETED_CELLS=65536;function getLine(e,t){const r=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];return e.src.slice(r,o)}function escapedSplit(e){const t=[],r=e.length;let o=0,n=e.charCodeAt(o),a=!1,s=0,u="";for(;o<r;)n===124&&(a?(u+=e.substring(s,o-1),s=o):(t.push(u+e.substring(s,o)),u="",s=o+1)),a=n===92,o++,n=e.charCodeAt(o);return t.push(u+e.substring(s)),t}function table(e,t,r,o){if(t+2>r)return!1;let n=t+1;if(e.sCount[n]<e.blkIndent||e.sCount[n]-e.blkIndent>=4)return!1;let a=e.bMarks[n]+e.tShift[n];if(a>=e.eMarks[n])return!1;const s=e.src.charCodeAt(a++);if(s!==124&&s!==45&&s!==58||a>=e.eMarks[n])return!1;const u=e.src.charCodeAt(a++);if(u!==124&&u!==45&&u!==58&&!isSpace(u)||s===45&&isSpace(u))return!1;for(;a<e.eMarks[n];){const C=e.src.charCodeAt(a);if(C!==124&&C!==45&&C!==58&&!isSpace(C))return!1;a++}let i=getLine(e,t+1),c=i.split("|");const d=[];for(let C=0;C<c.length;C++){const D=c[C].trim();if(!D){if(C===0||C===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(D))return!1;D.charCodeAt(D.length-1)===58?d.push(D.charCodeAt(0)===58?"center":"right"):D.charCodeAt(0)===58?d.push("left"):d.push("")}if(i=getLine(e,t).trim(),i.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=escapedSplit(i),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const l=c.length;if(l===0||l!==d.length)return!1;if(o)return!0;const g=e.parentType;e.parentType="table";const f=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),m=[t,0];p.map=m;const y=e.push("thead_open","thead",1);y.map=[t,t+1];const _=e.push("tr_open","tr",1);_.map=[t,t+1];for(let C=0;C<c.length;C++){const D=e.push("th_open","th",1);d[C]&&(D.attrs=[["style","text-align:"+d[C]]]);const $=e.push("inline","",0);$.content=c[C].trim(),$.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let x,E=0;for(n=t+2;n<r&&!(e.sCount[n]<e.blkIndent);n++){let C=!1;for(let $=0,B=f.length;$<B;$++)if(f[$](e,n,r,!0)){C=!0;break}if(C||(i=getLine(e,n).trim(),!i)||e.sCount[n]-e.blkIndent>=4||(c=escapedSplit(i),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),E+=l-c.length,E>MAX_AUTOCOMPLETED_CELLS))break;if(n===t+2){const $=e.push("tbody_open","tbody",1);$.map=x=[t+2,0]}const D=e.push("tr_open","tr",1);D.map=[n,n+1];for(let $=0;$<l;$++){const B=e.push("td_open","td",1);d[$]&&(B.attrs=[["style","text-align:"+d[$]]]);const T=e.push("inline","",0);T.content=c[$]?c[$].trim():"",T.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return x&&(e.push("tbody_close","tbody",-1),x[1]=n),e.push("table_close","table",-1),m[1]=n,e.parentType=g,e.line=n,!0}function code(e,t,r){if(e.sCount[t]-e.blkIndent<4)return!1;let o=t+1,n=o;for(;o<r;){if(e.isEmpty(o)){o++;continue}if(e.sCount[o]-e.blkIndent>=4){o++,n=o;continue}break}e.line=n;const a=e.push("code_block","code",0);return a.content=e.getLines(t,n,4+e.blkIndent,!1)+`
`,a.map=[t,e.line],!0}function fence(e,t,r,o){let n=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||n+3>a)return!1;const s=e.src.charCodeAt(n);if(s!==126&&s!==96)return!1;let u=n;n=e.skipChars(n,s);let i=n-u;if(i<3)return!1;const c=e.src.slice(u,n),d=e.src.slice(n,a);if(s===96&&d.indexOf(String.fromCharCode(s))>=0)return!1;if(o)return!0;let l=t,g=!1;for(;l++,!(l>=r||(n=u=e.bMarks[l]+e.tShift[l],a=e.eMarks[l],n<a&&e.sCount[l]<e.blkIndent));)if(e.src.charCodeAt(n)===s&&!(e.sCount[l]-e.blkIndent>=4)&&(n=e.skipChars(n,s),!(n-u<i)&&(n=e.skipSpaces(n),!(n<a)))){g=!0;break}i=e.sCount[t],e.line=l+(g?1:0);const f=e.push("fence","code",0);return f.info=d,f.content=e.getLines(t+1,l,i,!0),f.markup=c,f.map=[t,e.line],!0}function blockquote(e,t,r,o){let n=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];const s=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(n)!==62)return!1;if(o)return!0;const u=[],i=[],c=[],d=[],l=e.md.block.ruler.getRules("blockquote"),g=e.parentType;e.parentType="blockquote";let f=!1,p;for(p=t;p<r;p++){const E=e.sCount[p]<e.blkIndent;if(n=e.bMarks[p]+e.tShift[p],a=e.eMarks[p],n>=a)break;if(e.src.charCodeAt(n++)===62&&!E){let D=e.sCount[p]+1,$,B;e.src.charCodeAt(n)===32?(n++,D++,B=!1,$=!0):e.src.charCodeAt(n)===9?($=!0,(e.bsCount[p]+D)%4===3?(n++,D++,B=!1):B=!0):$=!1;let T=D;for(u.push(e.bMarks[p]),e.bMarks[p]=n;n<a;){const F=e.src.charCodeAt(n);if(isSpace(F))F===9?T+=4-(T+e.bsCount[p]+(B?1:0))%4:T++;else break;n++}f=n>=a,i.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+($?1:0),c.push(e.sCount[p]),e.sCount[p]=T-D,d.push(e.tShift[p]),e.tShift[p]=n-e.bMarks[p];continue}if(f)break;let C=!1;for(let D=0,$=l.length;D<$;D++)if(l[D](e,p,r,!0)){C=!0;break}if(C){e.lineMax=p,e.blkIndent!==0&&(u.push(e.bMarks[p]),i.push(e.bsCount[p]),d.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}u.push(e.bMarks[p]),i.push(e.bsCount[p]),d.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]=-1}const m=e.blkIndent;e.blkIndent=0;const y=e.push("blockquote_open","blockquote",1);y.markup=">";const _=[t,0];y.map=_,e.md.block.tokenize(e,t,p);const x=e.push("blockquote_close","blockquote",-1);x.markup=">",e.lineMax=s,e.parentType=g,_[1]=e.line;for(let E=0;E<d.length;E++)e.bMarks[E+t]=u[E],e.tShift[E+t]=d[E],e.sCount[E+t]=c[E],e.bsCount[E+t]=i[E];return e.blkIndent=m,!0}function hr(e,t,r,o){const n=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let a=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(a++);if(s!==42&&s!==45&&s!==95)return!1;let u=1;for(;a<n;){const c=e.src.charCodeAt(a++);if(c!==s&&!isSpace(c))return!1;c===s&&u++}if(u<3)return!1;if(o)return!0;e.line=t+1;const i=e.push("hr","hr",0);return i.map=[t,e.line],i.markup=Array(u+1).join(String.fromCharCode(s)),!0}function skipBulletListMarker(e,t){const r=e.eMarks[t];let o=e.bMarks[t]+e.tShift[t];const n=e.src.charCodeAt(o++);if(n!==42&&n!==45&&n!==43)return-1;if(o<r){const a=e.src.charCodeAt(o);if(!isSpace(a))return-1}return o}function skipOrderedListMarker(e,t){const r=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];let n=r;if(n+1>=o)return-1;let a=e.src.charCodeAt(n++);if(a<48||a>57)return-1;for(;;){if(n>=o)return-1;if(a=e.src.charCodeAt(n++),a>=48&&a<=57){if(n-r>=10)return-1;continue}if(a===41||a===46)break;return-1}return n<o&&(a=e.src.charCodeAt(n),!isSpace(a))?-1:n}function markTightParagraphs(e,t){const r=e.level+2;for(let o=t+2,n=e.tokens.length-2;o<n;o++)e.tokens[o].level===r&&e.tokens[o].type==="paragraph_open"&&(e.tokens[o+2].hidden=!0,e.tokens[o].hidden=!0,o+=2)}function list(e,t,r,o){let n,a,s,u,i=t,c=!0;if(e.sCount[i]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[i]-e.listIndent>=4&&e.sCount[i]<e.blkIndent)return!1;let d=!1;o&&e.parentType==="paragraph"&&e.sCount[i]>=e.blkIndent&&(d=!0);let l,g,f;if((f=skipOrderedListMarker(e,i))>=0){if(l=!0,s=e.bMarks[i]+e.tShift[i],g=Number(e.src.slice(s,f-1)),d&&g!==1)return!1}else if((f=skipBulletListMarker(e,i))>=0)l=!1;else return!1;if(d&&e.skipSpaces(f)>=e.eMarks[i])return!1;if(o)return!0;const p=e.src.charCodeAt(f-1),m=e.tokens.length;l?(u=e.push("ordered_list_open","ol",1),g!==1&&(u.attrs=[["start",g]])):u=e.push("bullet_list_open","ul",1);const y=[i,0];u.map=y,u.markup=String.fromCharCode(p);let _=!1;const x=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";i<r;){a=f,n=e.eMarks[i];const C=e.sCount[i]+f-(e.bMarks[i]+e.tShift[i]);let D=C;for(;a<n;){const U=e.src.charCodeAt(a);if(U===9)D+=4-(D+e.bsCount[i])%4;else if(U===32)D++;else break;a++}const $=a;let B;$>=n?B=1:B=D-C,B>4&&(B=1);const T=C+B;u=e.push("list_item_open","li",1),u.markup=String.fromCharCode(p);const F=[i,0];u.map=F,l&&(u.info=e.src.slice(s,f-1));const I=e.tight,z=e.tShift[i],q=e.sCount[i],j=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=T,e.tight=!0,e.tShift[i]=$-e.bMarks[i],e.sCount[i]=D,$>=n&&e.isEmpty(i+1)?e.line=Math.min(e.line+2,r):e.md.block.tokenize(e,i,r,!0),(!e.tight||_)&&(c=!1),_=e.line-i>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=j,e.tShift[i]=z,e.sCount[i]=q,e.tight=I,u=e.push("list_item_close","li",-1),u.markup=String.fromCharCode(p),i=e.line,F[1]=i,i>=r||e.sCount[i]<e.blkIndent||e.sCount[i]-e.blkIndent>=4)break;let J=!1;for(let U=0,G=x.length;U<G;U++)if(x[U](e,i,r,!0)){J=!0;break}if(J)break;if(l){if(f=skipOrderedListMarker(e,i),f<0)break;s=e.bMarks[i]+e.tShift[i]}else if(f=skipBulletListMarker(e,i),f<0)break;if(p!==e.src.charCodeAt(f-1))break}return l?u=e.push("ordered_list_close","ol",-1):u=e.push("bullet_list_close","ul",-1),u.markup=String.fromCharCode(p),y[1]=i,e.line=i,e.parentType=E,c&&markTightParagraphs(e,m),!0}function reference(e,t,r,o){let n=e.bMarks[t]+e.tShift[t],a=e.eMarks[t],s=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(n)!==91)return!1;function u(x){const E=e.lineMax;if(x>=E||e.isEmpty(x))return null;let C=!1;if(e.sCount[x]-e.blkIndent>3&&(C=!0),e.sCount[x]<0&&(C=!0),!C){const B=e.md.block.ruler.getRules("reference"),T=e.parentType;e.parentType="reference";let F=!1;for(let I=0,z=B.length;I<z;I++)if(B[I](e,x,E,!0)){F=!0;break}if(e.parentType=T,F)return null}const D=e.bMarks[x]+e.tShift[x],$=e.eMarks[x];return e.src.slice(D,$+1)}let i=e.src.slice(n,a+1);a=i.length;let c=-1;for(n=1;n<a;n++){const x=i.charCodeAt(n);if(x===91)return!1;if(x===93){c=n;break}else if(x===10){const E=u(s);E!==null&&(i+=E,a=i.length,s++)}else if(x===92&&(n++,n<a&&i.charCodeAt(n)===10)){const E=u(s);E!==null&&(i+=E,a=i.length,s++)}}if(c<0||i.charCodeAt(c+1)!==58)return!1;for(n=c+2;n<a;n++){const x=i.charCodeAt(n);if(x===10){const E=u(s);E!==null&&(i+=E,a=i.length,s++)}else if(!isSpace(x))break}const d=e.md.helpers.parseLinkDestination(i,n,a);if(!d.ok)return!1;const l=e.md.normalizeLink(d.str);if(!e.md.validateLink(l))return!1;n=d.pos;const g=n,f=s,p=n;for(;n<a;n++){const x=i.charCodeAt(n);if(x===10){const E=u(s);E!==null&&(i+=E,a=i.length,s++)}else if(!isSpace(x))break}let m=e.md.helpers.parseLinkTitle(i,n,a);for(;m.can_continue;){const x=u(s);if(x===null)break;i+=x,n=a,a=i.length,s++,m=e.md.helpers.parseLinkTitle(i,n,a,m)}let y;for(n<a&&p!==n&&m.ok?(y=m.str,n=m.pos):(y="",n=g,s=f);n<a;){const x=i.charCodeAt(n);if(!isSpace(x))break;n++}if(n<a&&i.charCodeAt(n)!==10&&y)for(y="",n=g,s=f;n<a;){const x=i.charCodeAt(n);if(!isSpace(x))break;n++}if(n<a&&i.charCodeAt(n)!==10)return!1;const _=normalizeReference(i.slice(1,c));return _?(o||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[_]>"u"&&(e.env.references[_]={title:y,href:l}),e.line=s),!0):!1}const block_names=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],attr_name="[a-zA-Z_:][a-zA-Z0-9:._-]*",unquoted="[^\"'=<>`\\x00-\\x20]+",single_quoted="'[^']*'",double_quoted='"[^"]*"',attr_value="(?:"+unquoted+"|"+single_quoted+"|"+double_quoted+")",attribute="(?:\\s+"+attr_name+"(?:\\s*=\\s*"+attr_value+")?)",open_tag="<[A-Za-z][A-Za-z0-9\\-]*"+attribute+"*\\s*\\/?>",close_tag="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",comment="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",processing="<[?][\\s\\S]*?[?]>",declaration="<![A-Za-z][^>]*>",cdata="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",HTML_TAG_RE=new RegExp("^(?:"+open_tag+"|"+close_tag+"|"+comment+"|"+processing+"|"+declaration+"|"+cdata+")"),HTML_OPEN_CLOSE_TAG_RE=new RegExp("^(?:"+open_tag+"|"+close_tag+")"),HTML_SEQUENCES=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+block_names.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(HTML_OPEN_CLOSE_TAG_RE.source+"\\s*$"),/^$/,!1]];function html_block(e,t,r,o){let n=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(n)!==60)return!1;let s=e.src.slice(n,a),u=0;for(;u<HTML_SEQUENCES.length&&!HTML_SEQUENCES[u][0].test(s);u++);if(u===HTML_SEQUENCES.length)return!1;if(o)return HTML_SEQUENCES[u][2];let i=t+1;if(!HTML_SEQUENCES[u][1].test(s)){for(;i<r&&!(e.sCount[i]<e.blkIndent);i++)if(n=e.bMarks[i]+e.tShift[i],a=e.eMarks[i],s=e.src.slice(n,a),HTML_SEQUENCES[u][1].test(s)){s.length!==0&&i++;break}}e.line=i;const c=e.push("html_block","",0);return c.map=[t,i],c.content=e.getLines(t,i,e.blkIndent,!0),!0}function heading(e,t,r,o){let n=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(n);if(s!==35||n>=a)return!1;let u=1;for(s=e.src.charCodeAt(++n);s===35&&n<a&&u<=6;)u++,s=e.src.charCodeAt(++n);if(u>6||n<a&&!isSpace(s))return!1;if(o)return!0;a=e.skipSpacesBack(a,n);const i=e.skipCharsBack(a,35,n);i>n&&isSpace(e.src.charCodeAt(i-1))&&(a=i),e.line=t+1;const c=e.push("heading_open","h"+String(u),1);c.markup="########".slice(0,u),c.map=[t,e.line];const d=e.push("inline","",0);d.content=e.src.slice(n,a).trim(),d.map=[t,e.line],d.children=[];const l=e.push("heading_close","h"+String(u),-1);return l.markup="########".slice(0,u),!0}function lheading(e,t,r){const o=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const n=e.parentType;e.parentType="paragraph";let a=0,s,u=t+1;for(;u<r&&!e.isEmpty(u);u++){if(e.sCount[u]-e.blkIndent>3)continue;if(e.sCount[u]>=e.blkIndent){let f=e.bMarks[u]+e.tShift[u];const p=e.eMarks[u];if(f<p&&(s=e.src.charCodeAt(f),(s===45||s===61)&&(f=e.skipChars(f,s),f=e.skipSpaces(f),f>=p))){a=s===61?1:2;break}}if(e.sCount[u]<0)continue;let g=!1;for(let f=0,p=o.length;f<p;f++)if(o[f](e,u,r,!0)){g=!0;break}if(g)break}if(!a)return!1;const i=e.getLines(t,u,e.blkIndent,!1).trim();e.line=u+1;const c=e.push("heading_open","h"+String(a),1);c.markup=String.fromCharCode(s),c.map=[t,e.line];const d=e.push("inline","",0);d.content=i,d.map=[t,e.line-1],d.children=[];const l=e.push("heading_close","h"+String(a),-1);return l.markup=String.fromCharCode(s),e.parentType=n,!0}function paragraph(e,t,r){const o=e.md.block.ruler.getRules("paragraph"),n=e.parentType;let a=t+1;for(e.parentType="paragraph";a<r&&!e.isEmpty(a);a++){if(e.sCount[a]-e.blkIndent>3||e.sCount[a]<0)continue;let c=!1;for(let d=0,l=o.length;d<l;d++)if(o[d](e,a,r,!0)){c=!0;break}if(c)break}const s=e.getLines(t,a,e.blkIndent,!1).trim();e.line=a;const u=e.push("paragraph_open","p",1);u.map=[t,e.line];const i=e.push("inline","",0);return i.content=s,i.map=[t,e.line],i.children=[],e.push("paragraph_close","p",-1),e.parentType=n,!0}const _rules$1=[["table",table,["paragraph","reference"]],["code",code],["fence",fence,["paragraph","reference","blockquote","list"]],["blockquote",blockquote,["paragraph","reference","blockquote","list"]],["hr",hr,["paragraph","reference","blockquote","list"]],["list",list,["paragraph","reference","blockquote"]],["reference",reference],["html_block",html_block,["paragraph","reference","blockquote"]],["heading",heading,["paragraph","reference","blockquote"]],["lheading",lheading],["paragraph",paragraph]];function ParserBlock(){this.ruler=new Ruler;for(let e=0;e<_rules$1.length;e++)this.ruler.push(_rules$1[e][0],_rules$1[e][1],{alt:(_rules$1[e][2]||[]).slice()})}ParserBlock.prototype.tokenize=function(e,t,r){const o=this.ruler.getRules(""),n=o.length,a=e.md.options.maxNesting;let s=t,u=!1;for(;s<r&&(e.line=s=e.skipEmptyLines(s),!(s>=r||e.sCount[s]<e.blkIndent));){if(e.level>=a){e.line=r;break}const i=e.line;let c=!1;for(let d=0;d<n;d++)if(c=o[d](e,s,r,!1),c){if(i>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!u,e.isEmpty(e.line-1)&&(u=!0),s=e.line,s<r&&e.isEmpty(s)&&(u=!0,s++,e.line=s)}};ParserBlock.prototype.parse=function(e,t,r,o){if(!e)return;const n=new this.State(e,t,r,o);this.tokenize(n,n.line,n.lineMax)};ParserBlock.prototype.State=StateBlock;function StateInline(e,t,r,o){this.src=e,this.env=r,this.md=t,this.tokens=o,this.tokens_meta=Array(o.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}StateInline.prototype.pushPending=function(){const e=new Token("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};StateInline.prototype.push=function(e,t,r){this.pending&&this.pushPending();const o=new Token(e,t,r);let n=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),o.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],n={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(o),this.tokens_meta.push(n),o};StateInline.prototype.scanDelims=function(e,t){const r=this.posMax,o=this.src.charCodeAt(e),n=e>0?this.src.charCodeAt(e-1):32;let a=e;for(;a<r&&this.src.charCodeAt(a)===o;)a++;const s=a-e,u=a<r?this.src.charCodeAt(a):32,i=isMdAsciiPunct(n)||isPunctChar(String.fromCharCode(n)),c=isMdAsciiPunct(u)||isPunctChar(String.fromCharCode(u)),d=isWhiteSpace(n),l=isWhiteSpace(u),g=!l&&(!c||d||i),f=!d&&(!i||l||c);return{can_open:g&&(t||!f||i),can_close:f&&(t||!g||c),length:s}};StateInline.prototype.Token=Token;function isTerminatorChar(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function text(e,t){let r=e.pos;for(;r<e.posMax&&!isTerminatorChar(e.src.charCodeAt(r));)r++;return r===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)}const SCHEME_RE=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function linkify(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const r=e.pos,o=e.posMax;if(r+3>o||e.src.charCodeAt(r)!==58||e.src.charCodeAt(r+1)!==47||e.src.charCodeAt(r+2)!==47)return!1;const n=e.pending.match(SCHEME_RE);if(!n)return!1;const a=n[1],s=e.md.linkify.matchAtStart(e.src.slice(r-a.length));if(!s)return!1;let u=s.url;if(u.length<=a.length)return!1;u=u.replace(/\*+$/,"");const i=e.md.normalizeLink(u);if(!e.md.validateLink(i))return!1;if(!t){e.pending=e.pending.slice(0,-a.length);const c=e.push("link_open","a",1);c.attrs=[["href",i]],c.markup="linkify",c.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(u);const l=e.push("link_close","a",-1);l.markup="linkify",l.info="auto"}return e.pos+=u.length-a.length,!0}function newline(e,t){let r=e.pos;if(e.src.charCodeAt(r)!==10)return!1;const o=e.pending.length-1,n=e.posMax;if(!t)if(o>=0&&e.pending.charCodeAt(o)===32)if(o>=1&&e.pending.charCodeAt(o-1)===32){let a=o-1;for(;a>=1&&e.pending.charCodeAt(a-1)===32;)a--;e.pending=e.pending.slice(0,a),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(r++;r<n&&isSpace(e.src.charCodeAt(r));)r++;return e.pos=r,!0}const ESCAPED=[];for(let e=0;e<256;e++)ESCAPED.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){ESCAPED[e.charCodeAt(0)]=1});function escape$1(e,t){let r=e.pos;const o=e.posMax;if(e.src.charCodeAt(r)!==92||(r++,r>=o))return!1;let n=e.src.charCodeAt(r);if(n===10){for(t||e.push("hardbreak","br",0),r++;r<o&&(n=e.src.charCodeAt(r),!!isSpace(n));)r++;return e.pos=r,!0}let a=e.src[r];if(n>=55296&&n<=56319&&r+1<o){const u=e.src.charCodeAt(r+1);u>=56320&&u<=57343&&(a+=e.src[r+1],r++)}const s="\\"+a;if(!t){const u=e.push("text_special","",0);n<256&&ESCAPED[n]!==0?u.content=a:u.content=s,u.markup=s,u.info="escape"}return e.pos=r+1,!0}function backtick(e,t){let r=e.pos;if(e.src.charCodeAt(r)!==96)return!1;const n=r;r++;const a=e.posMax;for(;r<a&&e.src.charCodeAt(r)===96;)r++;const s=e.src.slice(n,r),u=s.length;if(e.backticksScanned&&(e.backticks[u]||0)<=n)return t||(e.pending+=s),e.pos+=u,!0;let i=r,c;for(;(c=e.src.indexOf("`",i))!==-1;){for(i=c+1;i<a&&e.src.charCodeAt(i)===96;)i++;const d=i-c;if(d===u){if(!t){const l=e.push("code_inline","code",0);l.markup=s,l.content=e.src.slice(r,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=i,!0}e.backticks[d]=c}return e.backticksScanned=!0,t||(e.pending+=s),e.pos+=u,!0}function strikethrough_tokenize(e,t){const r=e.pos,o=e.src.charCodeAt(r);if(t||o!==126)return!1;const n=e.scanDelims(e.pos,!0);let a=n.length;const s=String.fromCharCode(o);if(a<2)return!1;let u;a%2&&(u=e.push("text","",0),u.content=s,a--);for(let i=0;i<a;i+=2)u=e.push("text","",0),u.content=s+s,e.delimiters.push({marker:o,length:0,token:e.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return e.pos+=n.length,!0}function postProcess$1(e,t){let r;const o=[],n=t.length;for(let a=0;a<n;a++){const s=t[a];if(s.marker!==126||s.end===-1)continue;const u=t[s.end];r=e.tokens[s.token],r.type="s_open",r.tag="s",r.nesting=1,r.markup="~~",r.content="",r=e.tokens[u.token],r.type="s_close",r.tag="s",r.nesting=-1,r.markup="~~",r.content="",e.tokens[u.token-1].type==="text"&&e.tokens[u.token-1].content==="~"&&o.push(u.token-1)}for(;o.length;){const a=o.pop();let s=a+1;for(;s<e.tokens.length&&e.tokens[s].type==="s_close";)s++;s--,a!==s&&(r=e.tokens[s],e.tokens[s]=e.tokens[a],e.tokens[a]=r)}}function strikethrough_postProcess(e){const t=e.tokens_meta,r=e.tokens_meta.length;postProcess$1(e,e.delimiters);for(let o=0;o<r;o++)t[o]&&t[o].delimiters&&postProcess$1(e,t[o].delimiters)}const r_strikethrough={tokenize:strikethrough_tokenize,postProcess:strikethrough_postProcess};function emphasis_tokenize(e,t){const r=e.pos,o=e.src.charCodeAt(r);if(t||o!==95&&o!==42)return!1;const n=e.scanDelims(e.pos,o===42);for(let a=0;a<n.length;a++){const s=e.push("text","",0);s.content=String.fromCharCode(o),e.delimiters.push({marker:o,length:n.length,token:e.tokens.length-1,end:-1,open:n.can_open,close:n.can_close})}return e.pos+=n.length,!0}function postProcess(e,t){const r=t.length;for(let o=r-1;o>=0;o--){const n=t[o];if(n.marker!==95&&n.marker!==42||n.end===-1)continue;const a=t[n.end],s=o>0&&t[o-1].end===n.end+1&&t[o-1].marker===n.marker&&t[o-1].token===n.token-1&&t[n.end+1].token===a.token+1,u=String.fromCharCode(n.marker),i=e.tokens[n.token];i.type=s?"strong_open":"em_open",i.tag=s?"strong":"em",i.nesting=1,i.markup=s?u+u:u,i.content="";const c=e.tokens[a.token];c.type=s?"strong_close":"em_close",c.tag=s?"strong":"em",c.nesting=-1,c.markup=s?u+u:u,c.content="",s&&(e.tokens[t[o-1].token].content="",e.tokens[t[n.end+1].token].content="",o--)}}function emphasis_post_process(e){const t=e.tokens_meta,r=e.tokens_meta.length;postProcess(e,e.delimiters);for(let o=0;o<r;o++)t[o]&&t[o].delimiters&&postProcess(e,t[o].delimiters)}const r_emphasis={tokenize:emphasis_tokenize,postProcess:emphasis_post_process};function link(e,t){let r,o,n,a,s="",u="",i=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const d=e.pos,l=e.posMax,g=e.pos+1,f=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(f<0)return!1;let p=f+1;if(p<l&&e.src.charCodeAt(p)===40){for(c=!1,p++;p<l&&(r=e.src.charCodeAt(p),!(!isSpace(r)&&r!==10));p++);if(p>=l)return!1;if(i=p,n=e.md.helpers.parseLinkDestination(e.src,p,e.posMax),n.ok){for(s=e.md.normalizeLink(n.str),e.md.validateLink(s)?p=n.pos:s="",i=p;p<l&&(r=e.src.charCodeAt(p),!(!isSpace(r)&&r!==10));p++);if(n=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<l&&i!==p&&n.ok)for(u=n.str,p=n.pos;p<l&&(r=e.src.charCodeAt(p),!(!isSpace(r)&&r!==10));p++);}(p>=l||e.src.charCodeAt(p)!==41)&&(c=!0),p++}if(c){if(typeof e.env.references>"u")return!1;if(p<l&&e.src.charCodeAt(p)===91?(i=p+1,p=e.md.helpers.parseLinkLabel(e,p),p>=0?o=e.src.slice(i,p++):p=f+1):p=f+1,o||(o=e.src.slice(g,f)),a=e.env.references[normalizeReference(o)],!a)return e.pos=d,!1;s=a.href,u=a.title}if(!t){e.pos=g,e.posMax=f;const m=e.push("link_open","a",1),y=[["href",s]];m.attrs=y,u&&y.push(["title",u]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=l,!0}function image(e,t){let r,o,n,a,s,u,i,c,d="";const l=e.pos,g=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const f=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if(a=p+1,a<g&&e.src.charCodeAt(a)===40){for(a++;a<g&&(r=e.src.charCodeAt(a),!(!isSpace(r)&&r!==10));a++);if(a>=g)return!1;for(c=a,u=e.md.helpers.parseLinkDestination(e.src,a,e.posMax),u.ok&&(d=e.md.normalizeLink(u.str),e.md.validateLink(d)?a=u.pos:d=""),c=a;a<g&&(r=e.src.charCodeAt(a),!(!isSpace(r)&&r!==10));a++);if(u=e.md.helpers.parseLinkTitle(e.src,a,e.posMax),a<g&&c!==a&&u.ok)for(i=u.str,a=u.pos;a<g&&(r=e.src.charCodeAt(a),!(!isSpace(r)&&r!==10));a++);else i="";if(a>=g||e.src.charCodeAt(a)!==41)return e.pos=l,!1;a++}else{if(typeof e.env.references>"u")return!1;if(a<g&&e.src.charCodeAt(a)===91?(c=a+1,a=e.md.helpers.parseLinkLabel(e,a),a>=0?n=e.src.slice(c,a++):a=p+1):a=p+1,n||(n=e.src.slice(f,p)),s=e.env.references[normalizeReference(n)],!s)return e.pos=l,!1;d=s.href,i=s.title}if(!t){o=e.src.slice(f,p);const m=[];e.md.inline.parse(o,e.md,e.env,m);const y=e.push("image","img",0),_=[["src",d],["alt",""]];y.attrs=_,y.children=m,y.content=o,i&&_.push(["title",i])}return e.pos=a,e.posMax=g,!0}const EMAIL_RE=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,AUTOLINK_RE=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function autolink(e,t){let r=e.pos;if(e.src.charCodeAt(r)!==60)return!1;const o=e.pos,n=e.posMax;for(;;){if(++r>=n)return!1;const s=e.src.charCodeAt(r);if(s===60)return!1;if(s===62)break}const a=e.src.slice(o+1,r);if(AUTOLINK_RE.test(a)){const s=e.md.normalizeLink(a);if(!e.md.validateLink(s))return!1;if(!t){const u=e.push("link_open","a",1);u.attrs=[["href",s]],u.markup="autolink",u.info="auto";const i=e.push("text","",0);i.content=e.md.normalizeLinkText(a);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=a.length+2,!0}if(EMAIL_RE.test(a)){const s=e.md.normalizeLink("mailto:"+a);if(!e.md.validateLink(s))return!1;if(!t){const u=e.push("link_open","a",1);u.attrs=[["href",s]],u.markup="autolink",u.info="auto";const i=e.push("text","",0);i.content=e.md.normalizeLinkText(a);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=a.length+2,!0}return!1}function isLinkOpen(e){return/^<a[>\s]/i.test(e)}function isLinkClose(e){return/^<\/a\s*>/i.test(e)}function isLetter(e){const t=e|32;return t>=97&&t<=122}function html_inline(e,t){if(!e.md.options.html)return!1;const r=e.posMax,o=e.pos;if(e.src.charCodeAt(o)!==60||o+2>=r)return!1;const n=e.src.charCodeAt(o+1);if(n!==33&&n!==63&&n!==47&&!isLetter(n))return!1;const a=e.src.slice(o).match(HTML_TAG_RE);if(!a)return!1;if(!t){const s=e.push("html_inline","",0);s.content=a[0],isLinkOpen(s.content)&&e.linkLevel++,isLinkClose(s.content)&&e.linkLevel--}return e.pos+=a[0].length,!0}const DIGITAL_RE=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,NAMED_RE=/^&([a-z][a-z0-9]{1,31});/i;function entity(e,t){const r=e.pos,o=e.posMax;if(e.src.charCodeAt(r)!==38||r+1>=o)return!1;if(e.src.charCodeAt(r+1)===35){const a=e.src.slice(r).match(DIGITAL_RE);if(a){if(!t){const s=a[1][0].toLowerCase()==="x"?parseInt(a[1].slice(1),16):parseInt(a[1],10),u=e.push("text_special","",0);u.content=isValidEntityCode(s)?fromCodePoint(s):fromCodePoint(65533),u.markup=a[0],u.info="entity"}return e.pos+=a[0].length,!0}}else{const a=e.src.slice(r).match(NAMED_RE);if(a){const s=decodeHTML(a[0]);if(s!==a[0]){if(!t){const u=e.push("text_special","",0);u.content=s,u.markup=a[0],u.info="entity"}return e.pos+=a[0].length,!0}}}return!1}function processDelimiters(e){const t={},r=e.length;if(!r)return;let o=0,n=-2;const a=[];for(let s=0;s<r;s++){const u=e[s];if(a.push(0),(e[o].marker!==u.marker||n!==u.token-1)&&(o=s),n=u.token,u.length=u.length||0,!u.close)continue;t.hasOwnProperty(u.marker)||(t[u.marker]=[-1,-1,-1,-1,-1,-1]);const i=t[u.marker][(u.open?3:0)+u.length%3];let c=o-a[o]-1,d=c;for(;c>i;c-=a[c]+1){const l=e[c];if(l.marker===u.marker&&l.open&&l.end<0){let g=!1;if((l.close||u.open)&&(l.length+u.length)%3===0&&(l.length%3!==0||u.length%3!==0)&&(g=!0),!g){const f=c>0&&!e[c-1].open?a[c-1]+1:0;a[s]=s-c+f,a[c]=f,u.open=!1,l.end=s,l.close=!1,d=-1,n=-2;break}}}d!==-1&&(t[u.marker][(u.open?3:0)+(u.length||0)%3]=d)}}function link_pairs(e){const t=e.tokens_meta,r=e.tokens_meta.length;processDelimiters(e.delimiters);for(let o=0;o<r;o++)t[o]&&t[o].delimiters&&processDelimiters(t[o].delimiters)}function fragments_join(e){let t,r,o=0;const n=e.tokens,a=e.tokens.length;for(t=r=0;t<a;t++)n[t].nesting<0&&o--,n[t].level=o,n[t].nesting>0&&o++,n[t].type==="text"&&t+1<a&&n[t+1].type==="text"?n[t+1].content=n[t].content+n[t+1].content:(t!==r&&(n[r]=n[t]),r++);t!==r&&(n.length=r)}const _rules=[["text",text],["linkify",linkify],["newline",newline],["escape",escape$1],["backticks",backtick],["strikethrough",r_strikethrough.tokenize],["emphasis",r_emphasis.tokenize],["link",link],["image",image],["autolink",autolink],["html_inline",html_inline],["entity",entity]],_rules2=[["balance_pairs",link_pairs],["strikethrough",r_strikethrough.postProcess],["emphasis",r_emphasis.postProcess],["fragments_join",fragments_join]];function ParserInline(){this.ruler=new Ruler;for(let e=0;e<_rules.length;e++)this.ruler.push(_rules[e][0],_rules[e][1]);this.ruler2=new Ruler;for(let e=0;e<_rules2.length;e++)this.ruler2.push(_rules2[e][0],_rules2[e][1])}ParserInline.prototype.skipToken=function(e){const t=e.pos,r=this.ruler.getRules(""),o=r.length,n=e.md.options.maxNesting,a=e.cache;if(typeof a[t]<"u"){e.pos=a[t];return}let s=!1;if(e.level<n){for(let u=0;u<o;u++)if(e.level++,s=r[u](e,!0),e.level--,s){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;s||e.pos++,a[t]=e.pos};ParserInline.prototype.tokenize=function(e){const t=this.ruler.getRules(""),r=t.length,o=e.posMax,n=e.md.options.maxNesting;for(;e.pos<o;){const a=e.pos;let s=!1;if(e.level<n){for(let u=0;u<r;u++)if(s=t[u](e,!1),s){if(a>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(e.pos>=o)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};ParserInline.prototype.parse=function(e,t,r,o){const n=new this.State(e,t,r,o);this.tokenize(n);const a=this.ruler2.getRules(""),s=a.length;for(let u=0;u<s;u++)a[u](n)};ParserInline.prototype.State=StateInline;function reFactory(e){const t={};e=e||{},t.src_Any=Any.source,t.src_Cc=Cc.source,t.src_Z=Z.source,t.src_P=P.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const r="[><]";return t.src_pseudo_letter="(?:(?!"+r+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+r+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function assign(e){return Array.prototype.slice.call(arguments,1).forEach(function(r){r&&Object.keys(r).forEach(function(o){e[o]=r[o]})}),e}function _class(e){return Object.prototype.toString.call(e)}function isString(e){return _class(e)==="[object String]"}function isObject(e){return _class(e)==="[object Object]"}function isRegExp(e){return _class(e)==="[object RegExp]"}function isFunction(e){return _class(e)==="[object Function]"}function escapeRE(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const defaultOptions={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function isOptionsObj(e){return Object.keys(e||{}).reduce(function(t,r){return t||defaultOptions.hasOwnProperty(r)},!1)}const defaultSchemas={"http:":{validate:function(e,t,r){const o=e.slice(t);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(o)?o.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,r){const o=e.slice(t);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(o)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:o.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,r){const o=e.slice(t);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(o)?o.match(r.re.mailto)[0].length:0}}},tlds_2ch_src_re="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",tlds_default="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function resetScanCache(e){e.__index__=-1,e.__text_cache__=""}function createValidator(e){return function(t,r){const o=t.slice(r);return e.test(o)?o.match(e)[0].length:0}}function createNormalizer(){return function(e,t){t.normalize(e)}}function compile(e){const t=e.re=reFactory(e.__opts__),r=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||r.push(tlds_2ch_src_re),r.push(t.src_xn),t.src_tlds=r.join("|");function o(u){return u.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(o(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(o(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(o(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(o(t.tpl_host_fuzzy_test),"i");const n=[];e.__compiled__={};function a(u,i){throw new Error('(LinkifyIt) Invalid schema "'+u+'": '+i)}Object.keys(e.__schemas__).forEach(function(u){const i=e.__schemas__[u];if(i===null)return;const c={validate:null,link:null};if(e.__compiled__[u]=c,isObject(i)){isRegExp(i.validate)?c.validate=createValidator(i.validate):isFunction(i.validate)?c.validate=i.validate:a(u,i),isFunction(i.normalize)?c.normalize=i.normalize:i.normalize?a(u,i):c.normalize=createNormalizer();return}if(isString(i)){n.push(u);return}a(u,i)}),n.forEach(function(u){e.__compiled__[e.__schemas__[u]]&&(e.__compiled__[u].validate=e.__compiled__[e.__schemas__[u]].validate,e.__compiled__[u].normalize=e.__compiled__[e.__schemas__[u]].normalize)}),e.__compiled__[""]={validate:null,normalize:createNormalizer()};const s=Object.keys(e.__compiled__).filter(function(u){return u.length>0&&e.__compiled__[u]}).map(escapeRE).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),resetScanCache(e)}function Match(e,t){const r=e.__index__,o=e.__last_index__,n=e.__text_cache__.slice(r,o);this.schema=e.__schema__.toLowerCase(),this.index=r+t,this.lastIndex=o+t,this.raw=n,this.text=n,this.url=n}function createMatch(e,t){const r=new Match(e,t);return e.__compiled__[r.schema].normalize(r,e),r}function LinkifyIt(e,t){if(!(this instanceof LinkifyIt))return new LinkifyIt(e,t);t||isOptionsObj(e)&&(t=e,e={}),this.__opts__=assign({},defaultOptions,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=assign({},defaultSchemas,e),this.__compiled__={},this.__tlds__=tlds_default,this.__tlds_replaced__=!1,this.re={},compile(this)}LinkifyIt.prototype.add=function e(t,r){return this.__schemas__[t]=r,compile(this),this};LinkifyIt.prototype.set=function e(t){return this.__opts__=assign(this.__opts__,t),this};LinkifyIt.prototype.test=function e(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let r,o,n,a,s,u,i,c,d;if(this.re.schema_test.test(t)){for(i=this.re.schema_search,i.lastIndex=0;(r=i.exec(t))!==null;)if(a=this.testSchemaAt(t,r[2],i.lastIndex),a){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+a;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(o=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=o.index+o[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=o.index+o[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=t.indexOf("@"),d>=0&&(n=t.match(this.re.email_fuzzy))!==null&&(s=n.index+n[1].length,u=n.index+n[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&u>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=u))),this.__index__>=0};LinkifyIt.prototype.pretest=function e(t){return this.re.pretest.test(t)};LinkifyIt.prototype.testSchemaAt=function e(t,r,o){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(t,o,this):0};LinkifyIt.prototype.match=function e(t){const r=[];let o=0;this.__index__>=0&&this.__text_cache__===t&&(r.push(createMatch(this,o)),o=this.__last_index__);let n=o?t.slice(o):t;for(;this.test(n);)r.push(createMatch(this,o)),n=n.slice(this.__last_index__),o+=this.__last_index__;return r.length?r:null};LinkifyIt.prototype.matchAtStart=function e(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const r=this.re.schema_at_start.exec(t);if(!r)return null;const o=this.testSchemaAt(t,r[2],r[0].length);return o?(this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+o,createMatch(this,0)):null};LinkifyIt.prototype.tlds=function e(t,r){return t=Array.isArray(t)?t:[t],r?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(o,n,a){return o!==a[n-1]}).reverse(),compile(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,compile(this),this)};LinkifyIt.prototype.normalize=function e(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};LinkifyIt.prototype.onCompile=function e(){};const maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\0-\x7F]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(e){throw new RangeError(errors[e])}function map(e,t){const r=[];let o=e.length;for(;o--;)r[o]=t(e[o]);return r}function mapDomain(e,t){const r=e.split("@");let o="";r.length>1&&(o=r[0]+"@",e=r[1]),e=e.replace(regexSeparators,".");const n=e.split("."),a=map(n,t).join(".");return o+a}function ucs2decode(e){const t=[];let r=0;const o=e.length;for(;r<o;){const n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<o){const a=e.charCodeAt(r++);(a&64512)==56320?t.push(((n&1023)<<10)+(a&1023)+65536):(t.push(n),r--)}else t.push(n)}return t}const ucs2encode=e=>String.fromCodePoint(...e),basicToDigit=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:base},digitToBasic=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},adapt=function(e,t,r){let o=0;for(e=r?floor(e/damp):e>>1,e+=floor(e/t);e>baseMinusTMin*tMax>>1;o+=base)e=floor(e/baseMinusTMin);return floor(o+(baseMinusTMin+1)*e/(e+skew))},decode=function(e){const t=[],r=e.length;let o=0,n=initialN,a=initialBias,s=e.lastIndexOf(delimiter);s<0&&(s=0);for(let u=0;u<s;++u)e.charCodeAt(u)>=128&&error("not-basic"),t.push(e.charCodeAt(u));for(let u=s>0?s+1:0;u<r;){const i=o;for(let d=1,l=base;;l+=base){u>=r&&error("invalid-input");const g=basicToDigit(e.charCodeAt(u++));g>=base&&error("invalid-input"),g>floor((maxInt-o)/d)&&error("overflow"),o+=g*d;const f=l<=a?tMin:l>=a+tMax?tMax:l-a;if(g<f)break;const p=base-f;d>floor(maxInt/p)&&error("overflow"),d*=p}const c=t.length+1;a=adapt(o-i,c,i==0),floor(o/c)>maxInt-n&&error("overflow"),n+=floor(o/c),o%=c,t.splice(o++,0,n)}return String.fromCodePoint(...t)},encode=function(e){const t=[];e=ucs2decode(e);const r=e.length;let o=initialN,n=0,a=initialBias;for(const i of e)i<128&&t.push(stringFromCharCode(i));const s=t.length;let u=s;for(s&&t.push(delimiter);u<r;){let i=maxInt;for(const d of e)d>=o&&d<i&&(i=d);const c=u+1;i-o>floor((maxInt-n)/c)&&error("overflow"),n+=(i-o)*c,o=i;for(const d of e)if(d<o&&++n>maxInt&&error("overflow"),d===o){let l=n;for(let g=base;;g+=base){const f=g<=a?tMin:g>=a+tMax?tMax:g-a;if(l<f)break;const p=l-f,m=base-f;t.push(stringFromCharCode(digitToBasic(f+p%m,0))),l=floor(p/m)}t.push(stringFromCharCode(digitToBasic(l,0))),a=adapt(n,c,u===s),n=0,++u}++n,++o}return t.join("")},toUnicode=function(e){return mapDomain(e,function(t){return regexPunycode.test(t)?decode(t.slice(4).toLowerCase()):t})},toASCII=function(e){return mapDomain(e,function(t){return regexNonASCII.test(t)?"xn--"+encode(t):t})},punycode={version:"2.3.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode,encode,toASCII,toUnicode},cfg_default={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},cfg_zero={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},cfg_commonmark={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},config={default:cfg_default,zero:cfg_zero,commonmark:cfg_commonmark},BAD_PROTO_RE=/^(vbscript|javascript|file|data):/,GOOD_DATA_RE=/^data:image\/(gif|png|jpeg|webp);/;function validateLink(e){const t=e.trim().toLowerCase();return BAD_PROTO_RE.test(t)?GOOD_DATA_RE.test(t):!0}const RECODE_HOSTNAME_FOR=["http:","https:","mailto:"];function normalizeLink(e){const t=urlParse(e,!0);if(t.hostname&&(!t.protocol||RECODE_HOSTNAME_FOR.indexOf(t.protocol)>=0))try{t.hostname=punycode.toASCII(t.hostname)}catch{}return encode$1(format(t))}function normalizeLinkText(e){const t=urlParse(e,!0);if(t.hostname&&(!t.protocol||RECODE_HOSTNAME_FOR.indexOf(t.protocol)>=0))try{t.hostname=punycode.toUnicode(t.hostname)}catch{}return decode$1(format(t),decode$1.defaultChars+"%")}function MarkdownIt(e,t){if(!(this instanceof MarkdownIt))return new MarkdownIt(e,t);t||isString$1(e)||(t=e||{},e="default"),this.inline=new ParserInline,this.block=new ParserBlock,this.core=new Core,this.renderer=new Renderer,this.linkify=new LinkifyIt,this.validateLink=validateLink,this.normalizeLink=normalizeLink,this.normalizeLinkText=normalizeLinkText,this.utils=utils,this.helpers=assign$1({},helpers),this.options={},this.configure(e),t&&this.set(t)}MarkdownIt.prototype.set=function(e){return assign$1(this.options,e),this};MarkdownIt.prototype.configure=function(e){const t=this;if(isString$1(e)){const r=e;if(e=config[r],!e)throw new Error('Wrong `markdown-it` preset "'+r+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(r){e.components[r].rules&&t[r].ruler.enableOnly(e.components[r].rules),e.components[r].rules2&&t[r].ruler2.enableOnly(e.components[r].rules2)}),this};MarkdownIt.prototype.enable=function(e,t){let r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(n){r=r.concat(this[n].ruler.enable(e,!0))},this),r=r.concat(this.inline.ruler2.enable(e,!0));const o=e.filter(function(n){return r.indexOf(n)<0});if(o.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+o);return this};MarkdownIt.prototype.disable=function(e,t){let r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(n){r=r.concat(this[n].ruler.disable(e,!0))},this),r=r.concat(this.inline.ruler2.disable(e,!0));const o=e.filter(function(n){return r.indexOf(n)<0});if(o.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+o);return this};MarkdownIt.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};MarkdownIt.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const r=new this.core.State(e,this,t);return this.core.process(r),r.tokens};MarkdownIt.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};MarkdownIt.prototype.parseInline=function(e,t){const r=new this.core.State(e,this,t);return r.inlineMode=!0,this.core.process(r),r.tokens};MarkdownIt.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const db$4=new Dexie("AgentCompanyDemoRecords");db$4.version(1).stores({kvs:"++id, &key, value",functions:"++id, &name, config",records:"++id, supplier, function, input, output",chats:"++id, title"});function tryOnScopeDispose(e){return getCurrentScope()?(onScopeDispose(e),!0):!1}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function useObservable(e,t){const r=ref(void 0),o=e.subscribe({next:n=>r.value=n,error:void 0});return tryOnScopeDispose(()=>{o.unsubscribe()}),r}const functionSettings=L,db$3=db$4,md=MarkdownIt({breaks:!0,linkify:!0}),textRenderEngine={process:e=>md.render(e)},load$2=async e=>{var r;const t=(r=await db$3.kvs.get({key:e}))==null?void 0:r.value;return t==null?null:lib$1.parse(t)},save$1=async(e,t)=>{const r=lib$1.stringify(t);await db$3.kvs.put({id:e,key:e,value:r})},=async e=>{if(e.id!=null){const t=e.id;return await db$3.chats.delete(e.id),e.id=void 0,{ok:!0,id:t}}return{ok:!1}},=async e=>{const t=await db$3.chats.add(R.cloneDeep({...e,id:void 0}));return e.id=t,{ok:!0,id:t}},=async e=>e.id!=null?(await db$3.chats.put(R.cloneDeep(e)),{ok:!0,id:e.id}):(e),=async e=>[`
system

${e.systemPrompt??""}

---
`,...e.messages.map(o=>`
${o.role}

${o.content}

---
`)].join(`
`),=async e=>{const t=await (e),r=new Blob([t],{type:"text/plain"});FileSaver_minExports.saveAs(r,`[${(e==null?void 0:e.id)??"-"}]${(e==null?void 0:e.title)??"chat"}(${new Date().toLocaleString()}).md`)},=async(e,t)=>{var n;const r=t.apiKeyDict,o=t.supplierModelsDict;try{const a=`Bearer ${r[e.name]}`;console.log({supplier:e,apiKeyDict:r,Authorization:a});let s;try{s=await axios.get(`${e.baseUrl}${e.modelsUrl}`),console.log(s)}catch(c){try{s=await axios.get(`${e.baseUrl}${e.modelsUrl}`,{headers:{Authorization:a}}),console.log(s)}catch(d){console.warn(c),console.warn(d)}}let u=((n=s==null?void 0:s.data)==null?void 0:n.data)??[];console.log({models:u}),u!=null&&u.length||(u=(e==null?void 0:e.models)??[]);const i={...o};i[e.name]=u,t.supplierModelsDict=i,save$1("supplierForm",t)}catch(a){console.warn(a)}},=async(e,t)=>{const r=R.cloneDeep(e),o=R.cloneDeep(t.savedSettings);let n=!!functionSettings.find(s=>s.name==r.name);for(;n;)r.name=`${r.name}*`,n=!!functionSettings.find(s=>s.name==r.name);t.functionSetting=r,save$1("functionSetting",r);const a=o.find(s=>s.name==r.name);a==null?o.push(r):Object.assign(a,r),t.savedSettings=o,save$1("savedSettings",o)},=async(e,t)=>{t.savedSettings=t.savedSettings.filter(r=>r.name!=e.name),save$1("savedSettings",t.savedSettings)},=async(e,t)=>{t=t??`myFunctionSettings(${new Date().toLocaleString()}).json`;const r=new Blob([JSON.stringify(e)],{type:"application/json"});FileSaver_minExports.saveAs(r,t)},=async(e,t)=>{t=t??`${(e==null?void 0:e.name)??"myFunctionSetting"}(${new Date().toLocaleString()}).json`;const r=new Blob([JSON.stringify([e])],{type:"application/json"});FileSaver_minExports.saveAs(r,t)},=async(e,t)=>{const r=R.cloneDeep(e);r.name=`${r.name}*`,(r,t)},useDbRecords=(e=5)=>{const t=liveQuery(()=>db$3.records.orderBy("id").reverse().limit(e).toArray());return{lastNRecords:useObservable(t)}},useDbChats=(e=5)=>{const t=liveQuery(()=>db$3.chats.orderBy("id").reverse().limit(e).toArray());return{lastNChats:useObservable(t)}},=async()=>{const e=await db$3.records.toArray()??[],t=new Blob([e.map(JSON.stringify).join(`
`)],{type:"application/json"});FileSaver_minExports.saveAs(t,`records(${new Date().toLocaleString()}).jsonl`)},=async()=>{await db$3.records.clear()},=async(e,t,r,o,n,a,s)=>{const u=new v({...r,ai:{baseURL:e.baseUrl,apiKey:t,defaultModel:e.defaultModel}});console.log({supplier:e,apiKey:t,functionSetting:r,taskInput:o,callback:n,aiFunc:u});const i=Date.now(),c=await u.doTask(o,a,s).catch(f=>(console.error(String(f)),console.error(f),{error:f})),d=Date.now(),l=d-i,g={result:c,timeCost:l,timeStart:i,timeEnd:d};return console.log({report:g}),n?n==null?void 0:n(g):g},=async(e,t,r,o,n,a,s,u)=>{const i=new v({...o,ai:{baseURL:t.baseUrl,apiKey:r,defaultModel:t.defaultModel}});console.log({supplier:t,apiKey:r,functionSetting:o,taskInput:n,callback:a,aiFunc:i});const c=Date.now(),d=i.doTaskStream(n,s,u),l=[];let g="";for await(const _ of d)if(_!=null){if(_!=null&&_.done)break;g+=R.isString(_)?_:JSON.stringify(_),l.push(_),e.result.result=g}console.log({resultText:g});const f=Date.now(),p=f-c,m={result:void 0,error:void 0};try{const _=JSON.parse(g);console.log({jjj:_,jjj_str:JSON.stringify(_)}),m.result=_}catch(_){console.warn("error"),m.result=g,m.error=_}console.log("result.result",m.result);const y={...m,chunks:l,timeCost:p,timeStart:c,timeEnd:f};return console.log({report:y}),a?a==null?void 0:a(y):y},=async(e,t,r,o,n,a,s)=>{const u=async c=>{var l;const d=JSON.parse(JSON.stringify(c));if(save$1("result",d),e.result=JSON.parse(JSON.stringify(d)),!((l=d==null?void 0:d.result)!=null&&l.error)){n.output=d;const g=await db$3.records.add(R.cloneDeep(n));e.lastRecordId=g}return c};if(s!=null&&s.stream)return (e,r,o,t==null?void 0:t.functionSetting,e==null?void 0:e.taskInput,u,a,s);const i=await (r,o,t==null?void 0:t.functionSetting,e==null?void 0:e.taskInput,u,a,s);return console.log({output:i}),i},=async(e,t,r,o,n)=>{var u,i;e.result={},e.processing=!0,e.lastRecordId=null;const a=R.cloneDeep({supplier:(u=t==null?void 0:t.selectedSupplier)==null?void 0:u.name,function:r==null?void 0:r.functionSetting,input:e==null?void 0:e.taskInput,otherParams:n}),s=await (e,r,t==null?void 0:t.selectedSupplier,t==null?void 0:t.apiKeyDict[(i=t==null?void 0:t.selectedSupplier)==null?void 0:i.name],a,o,n);return e.processing=!1,s},=,=async(e,t,r,o,n,a,s=!1)=>{var _,x,E;e.processing=!0;const u=(e==null?void 0:e.taskInput)??"",i=R.clone(o),c=new b({baseURL:(_=t==null?void 0:t.selectedSupplier)==null?void 0:_.baseUrl,apiKey:t==null?void 0:t.apiKeyDict[(x=t==null?void 0:t.selectedSupplier)==null?void 0:x.name],defaultModel:(E=t==null?void 0:t.selectedSupplier)==null?void 0:E.defaultModel}),d=Date.now(),l=[];let g="";for await(const C of c.chatStream(u,r==null?void 0:r.systemPrompt,i,n,s))if(C!=null){if(C!=null&&C.done)break;g+=R.isString(C)?C:JSON.stringify(C),r.newMessage=g,l.push(C),await nextTick()}const f=Date.now(),p=f-d,m={result:void 0,error:void 0};try{m.result=JSON.parse(g)}catch(C){m.result=g,m.error=C}await(a==null?void 0:a(m)),e.processing=!1;const y={...m,chunks:l,timeCost:p,timeStart:d,timeEnd:f};return console.log({report:y}),y},=async(e,t,r,o,n,a)=>{const s=o.map(i=>{var c;return{supplier:(c=t==null?void 0:t.selectedSupplier)==null?void 0:c.name,function:r==null?void 0:r.functionSetting,input:i.input,batchUnit:i.unit,batchIdx:i.idx,otherParams:a}});return await Promise.all(s.map(async i=>{var d;return await (e,r,t==null?void 0:t.selectedSupplier,t==null?void 0:t.apiKeyDict[(d=t==null?void 0:t.selectedSupplier)==null?void 0:d.name],i,n,a)}))},=async(e,t,r,o,n,a,s)=>{const u=R.max([(t==null?void 0:t.skip)??0,0]);let i=R.min([(t==null?void 0:t.limit)??1/0,1/0]);i<=0&&(i=1/0),console.log({skip:u,limit:i});const c=r.slice(u,u+i),d=R.chunk(c,(t==null?void 0:t.concurrency)??1);let l=0;e:for await(const g of d){const p=(await (e,o,n,g,[],s)).filter(m=>{var y;return(y=m==null?void 0:m.result)==null?void 0:y.error});if(p!=null&&p.length){const m=(t==null?void 0:t.retry)??3;t:for(let y=0;y<m;y++){const _=((t==null?void 0:t.retryDaley)??1e4)+y*((t==null?void 0:t.retryDaleyDelta)??5e3);await sleep$1(_);const x=p.map(D=>({unit:D==null?void 0:D.batchUnit,idx:D==null?void 0:D.batchIdx,input:D==null?void 0:D.input})),E=await (e,o,n,x,[],s),C=E.filter(D=>{var $;return($=D==null?void 0:D.result)==null?void 0:$.error});if(!(C!=null&&C.length))break t;if(y>=m-1){console.error("",{errorOutputs:p,retryOutputs:E});break e}}}l<d.length-1&&sleep$1((t==null?void 0:t.delay)??700),l++}console.log("")},AppConfigView=defineComponent({setup(){const e=reactive({selectedSupplier:A$1[0],apiKeyDict:{},supplierModelsDict:{},selectedModelDict:{}}),t=computed(()=>{var a,s,u;const n={name:(a=e.selectedSupplier)==null?void 0:a.defaultModel};return((u=e.selectedModelDict[(s=e.selectedSupplier)==null?void 0:s.name])==null?void 0:u.name)==DEFAULT_MODEL.label?n:e.selectedModelDict[e.selectedSupplier.name]??n}),r=computed(()=>{var n;return e.supplierModelsDict[(n=e.selectedSupplier)==null?void 0:n.name]??[]}),o=computed(()=>[{name:DEFAULT_MODEL.label},...r.value.map(n=>({name:(n==null?void 0:n.label)??(n==null?void 0:n.name)??(n==null?void 0:n.id)}))]);return onMounted(async()=>{const n=await load$2("supplierForm");n!=null&&Object.assign(e,n)}),()=>[h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>{var n;return h("div",{class:"stack-v"},[h(script$h,{name:"supplier",options:A$1,optionLabel:"name",placeholder:"",fluid:!0,modelValue:e.selectedSupplier,"onUpdate:modelValue":a=>{e.selectedSupplier=a}}),h(script$g,{type:"password",name:"apiKey",placeholder:"API Key",fluid:!0,modelValue:e.apiKeyDict[(n=e.selectedSupplier)==null?void 0:n.name],"onUpdate:modelValue":a=>{e.apiKeyDict[e.selectedSupplier.name]=a,save$1("supplierForm",e)}}),h("div",{class:"stack-h w-full"},[h(script$h,{name:"model",options:o.value,optionLabel:"name",placeholder:"",class:"grow-1",modelValue:t.value,"onUpdate:modelValue":a=>{e.selectedModelDict[e.selectedSupplier.name]=a,save$1("supplierForm",e)}}),h(ToolButton,{icon:"pi pi-trash",label:"",command:()=>{(e.selectedSupplier,e)}})]),h(ToolButton,{size:"small",icon:"pi pi-trash",label:"debug",command:()=>{console.log({supplierForm:e,selectedModel:t.value})}})])}})]}}),tableTextarea=(e,t,r,o,n=t,a)=>[h("div",{class:"opacity-80 fw-500"},t),h(script$e,{class:"w-full",placeholder:n,...a,modelValue:e==null?void 0:e[r],"onUpdate:modelValue":s=>{e[r]=s,save$1(o,e)}})],cacheRenderer=e=>{if(R.isString(e))return e;try{return JSON.stringify(e,null,2)}catch(t){return console.log({error:t}),String(e)}},resultRenderer=(e,t=!1)=>t?e??"":cacheRenderer(e),ResultCard=defineComponent({name:"ResultCard",props:["appData"],setup(e){return()=>h(script$b,{onClick:()=>{var t;console.log((t=e==null?void 0:e.appData)==null?void 0:t.result)},pt:{body:{class:"py-0.75rem! px-1rem!"}},class:"w-full"},{content:()=>{var t,r,o;return h("div",{class:"stack-v"},[h("div",{class:"whitespace-pre-wrap font-mono! min-h-6em max-h-20em overflow-y-auto"},`${resultRenderer((r=(t=e==null?void 0:e.appData)==null?void 0:t.result)==null?void 0:r.result,(o=e==null?void 0:e.appData)==null?void 0:o.processing)}`)])}})}}),AppFuncTestView=defineComponent({setup(){const e=useToast(),t=useConfirm(),r=useDbRecords(5),o=reactive({ipAndCountryCode:{},taskInput:"",processing:!1,lastRecordId:null,result:{},_lastResultError:null}),n=reactive({batchMode:!1,batchConfig:{inputTemplate:"",slotMark:"__",slotMarkIsRegExp:!1,itemsText:"",splitter:"[\\s\\n]+",splitterIsRegExp:!0,skip:0,limit:0,concurrency:1,showMore:!1,delay:0,retry:1,retryDaley:5e3,retryDaleyDelta:0},batchState:{}}),a=reactive({template:null,taskMask:null,reqMask:null,resMask:null}),s=reactive({functionSetting:L[0],savedSettings:[]}),u=reactive({selectedSupplier:A$1[0],apiKeyDict:{},supplierModelsDict:{},selectedModelDict:{}}),i=computed(()=>{const f={...s.functionSetting,...a};return new v(f).makeInstruction()}),c=computed(()=>{var f,p;return console.log("lastNRecords",(f=r==null?void 0:r.lastNRecords)==null?void 0:f.value),((p=r==null?void 0:r.lastNRecords)==null?void 0:p.value)??[]}),d=computed(()=>{const f=R.cloneDeep(defaultBatchConfig);Object.assign(f,n.batchConfig);let p=f.splitter;f!=null&&f.splitterIsRegExp&&(p=new RegExp(f.splitter,"g"));let m=f.slotMark;return f!=null&&f.slotMarkIsRegExp&&(m=new RegExp(f.slotMark,"g")),f.itemsText.trim().split(p).map(_=>_.trim()).filter(_=>_==null?void 0:_.length).map((_,x)=>({idx:x,unit:_,input:f.inputTemplate.replace(m,_)}))}),l=computed(()=>{var f;return JSON.stringify((f=o.result)==null?void 0:f.result,null,2)}),g=computed(()=>[{label:"",items:s.savedSettings},{label:"",items:L}]);return onMounted(async()=>{const f=await load$2("templateForm");f!=null&&Object.assign(a,f);const p=await load$2("batchForm");p!=null&&Object.assign(n,p);const m=await load$2("savedSettings");m!=null&&(s.savedSettings=m);const y=await load$2("supplierForm");y!=null&&Object.assign(u,y);const _=await load$2("functionSetting");_!=null&&(s.functionSetting=_);const x=await load$2("taskInput");x!=null&&(o.taskInput=x);let E=await load$2("result");if(E!=null){if(R.isString(E))try{E=JSON.parse(E)}catch(C){o._lastResultError=C}o.result=E}}),()=>[h(script$3,{header:"",toggleable:!0,collapsed:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[tableTextarea(a,"","template","templateForm",defaultInstructionTemplateEN),tableTextarea(a,"","taskMask","templateForm",defaultTaskMark),tableTextarea(a,"","reqMask","templateForm",defaultReqMark),tableTextarea(a,"","resMask","templateForm",defaultResMark),h("div",{class:"opacity-80 fw-500"},""),h(script$e,{class:"w-full",placeholder:"",value:i.value})])}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>{var f,p;return h("div",{class:"stack-v"},[h("div",{class:"stack-h"},[h(ToolButton,{size:"small",icon:"pi pi-save",label:"",command:async()=>{(s.savedSettings)}}),h(ToolButton,{size:"small",icon:"pi pi-file-import",label:"",command:async()=>{e.add({severity:"warn",summary:"",detail:"",life:2e3})}})]),h("div",{class:"stack-h"},[h(ToolButton,{size:"small",icon:"pi pi-save",label:"",command:async()=>{(s==null?void 0:s.functionSetting)}}),h(ToolButton,{size:"small",icon:"pi pi-copy",label:"",command:async()=>{(s==null?void 0:s.functionSetting,s)}})]),h("div",{class:"opacity-80 fw-500"},""),h(script$h,{name:"functionSettingName",options:g.value,optionLabel:"name",optionGroupLabel:"label",optionGroupChildren:"items",placeholder:"",fluid:!0,modelValue:s.functionSetting,"onUpdate:modelValue":m=>{s.functionSetting=m,save$1("functionSetting",R.cloneDeep(s.functionSetting))}},{optiongroup:m=>h("div",{},m.option.label)}),tableTextarea(s==null?void 0:s.functionSetting,"","name","functionSetting","",{rows:1}),tableTextarea(s==null?void 0:s.functionSetting,"","desc","functionSetting","",{rows:1}),h("div",{class:"stack-h"},[h("div",{class:"opacity-80 fw-500"},""),h(script$i,{modelValue:(f=s==null?void 0:s.functionSetting)==null?void 0:f.instructed,"onUpdate:modelValue":m=>{s.functionSetting.instructed=m,save$1("functionSetting",s.functionSetting)}})]),(p=s==null?void 0:s.functionSetting)!=null&&p.instructed?[tableTextarea(s==null?void 0:s.functionSetting,"","instruction","functionSetting")]:[tableTextarea(s==null?void 0:s.functionSetting,"","task","functionSetting"),tableTextarea(s==null?void 0:s.functionSetting,"","reqFormat","functionSetting"),tableTextarea(s==null?void 0:s.functionSetting,"","resFormat","functionSetting")],h("div",{class:"stack-h w-full justify-between!"},[h(ToolButton,{size:"small",icon:"pi pi-save",label:"",command:async()=>{await (s.functionSetting,s),e.add({severity:"info",summary:"",detail:"",life:2e3})}}),h(ToolButton,{size:"small",icon:"pi pi-trash",label:"",command:m=>{t.require({target:m.currentTarget,message:"",rejectProps:{label:"",severity:"secondary",outlined:!0},acceptProps:{label:"",severity:"danger"},accept:()=>{(s.functionSetting,s)},reject:()=>{e.add({severity:"info",summary:"",detail:"",life:2e3})}})}})])])}}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>{var f,p,m;return h("div",{class:"stack-v"},[h("div",{class:"stack-h"},[h("div",{class:"opacity-80 fw-500"},""),h(script$i,{modelValue:n.batchMode,"onUpdate:modelValue":y=>{n.batchMode=y,save$1("batchForm",n)}})]),n.batchMode?null:[h(script$e,{class:"w-full",placeholder:"",modelValue:o.taskInput,"onUpdate:modelValue":y=>{o.taskInput=y,save$1("taskInput",y)}}),h("div",{class:"stack-h"},[h(ToolButton,{size:"small",icon:"pi pi-plus",label:"",command:()=>{o.taskInput.trim()!==""&&(s.functionSetting.requestExamples=[...s.functionSetting.requestExamples,o.taskInput],save$1("functionSetting",s.functionSetting))}}),h(ToolButton,{size:"small",icon:"pi pi-copy",label:"",command:()=>{var y,_;clipboard.copy(o.taskInput),e.add({severity:"info",summary:"",detail:`${(y=o.taskInput)==null?void 0:y.length} 
${o.taskInput.slice(0,20)}${((_=o.taskInput)==null?void 0:_.length)<=20?"":"..."}`,life:2e3})}}),h(ToolButton,{size:"small",icon:"pi pi-trash",label:"",command:()=>{o.taskInput=""}})]),(((f=s==null?void 0:s.functionSetting)==null?void 0:f.requestExamples)??[]).map((y,_)=>h(ToolButton,{size:"small",key:`requestExample[${_}]${y}`,label:y,tip:`[${_+1}]`,class:"w-full",command:()=>{o.taskInput=y}})),(m=(p=s==null?void 0:s.functionSetting)==null?void 0:p.requestExamples)!=null&&m.length?h(ToolButton,{size:"small",icon:"pi pi-trash",label:"",command:()=>{s.functionSetting.requestExamples=[],save$1("functionSetting",s.functionSetting)}}):null]])}}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>{var f,p;return h("div",{class:"stack-v"},[n.batchMode?null:h(ToolButton,{size:"small",icon:"pi pi-play",label:"",fluid:!0,command:()=>{(o,u,s,[],{stream:!0})}}),n.batchMode?h(ToolButton,{size:"small",icon:"pi pi-play",label:"",fluid:!0,command:()=>{(o,n.batchConfig,d.value,u,s)}}):null,h("div",{class:"opacity-80 fw-500"},[o.processing?"":(f=o.result)!=null&&f.timeCost?` ${(p=o.result)==null?void 0:p.timeCost}ms`:""]),h(ResultCard,{appData:o}),h(ToolButton,{size:"small",icon:"pi pi-copy",label:"",command:()=>{var m;clipboard.copy(l.value),e.add({severity:"info",summary:"",detail:`${(m=l.value)==null?void 0:m.length} `,life:2e3})}})])}}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h(ToolButton,{size:"small",icon:"pi pi-trash",label:"",command:f=>{t.require({target:f.currentTarget,message:"",rejectProps:{label:"",severity:"secondary",outlined:!0},acceptProps:{label:"",severity:"danger"},accept:()=>{(),e.add({severity:"info",summary:"",detail:"",life:2e3})},reject:()=>{e.add({severity:"info",summary:"",detail:"",life:2e3})}})}}),(c.value??[]).map((f,p)=>h(script$b,{key:`lastNRecords[${p}]`,onClick:()=>{console.log(f)},pt:{body:{class:"py-0.75rem! px-1rem!"}},class:"w-full"},{content:()=>{var m,y,_;return h("div",{class:"stack-v"},[h("div",{class:"opacity-80",title:JSON.stringify(f==null?void 0:f.function,null,2)},[`[${f==null?void 0:f.id}] ${(m=f==null?void 0:f.function)==null?void 0:m.name} - ${((y=f==null?void 0:f.otherParams)==null?void 0:y.model)??(f==null?void 0:f.supplier)}`]),h("div",{class:"fw-500"},f==null?void 0:f.input),(f==null?void 0:f.batchIdx)==null?null:h("div",{},`[${f==null?void 0:f.batchIdx}]${f==null?void 0:f.batchUnit}`),h("div",{class:"whitespace-pre-wrap font-mono! min-h-6em max-h-20em overflow-y-auto"},cacheRenderer((_=f==null?void 0:f.output)==null?void 0:_.result))])}})),h("div",{class:"stack-h items-center! w-full"},[h("div",{},[""]),h(ToolButton,{size:"small",icon:"pi pi-file-export",label:"",command:()=>{(),e.add({severity:"info",summary:"",detail:"",life:2e3})},class:"ml-auto"})])])})]}}),AppChatTestView=defineComponent({setup(){const e=useToast(),t=useDbChats(10),r=computed(()=>{var l,g;return console.log("lastNChats",(l=t==null?void 0:t.lastNChats)==null?void 0:l.value),((g=t==null?void 0:t.lastNChats)==null?void 0:g.value)??[]}),o=reactive({ipAndCountryCode:{},taskInput:"",processing:!1,lastRecordId:null,result:{},_lastResultError:null}),n=reactive({batchMode:!1,batchConfig:{},batchState:{}}),a=reactive({template:null,taskMask:null,reqMask:null,resMask:null}),s=reactive({functionSetting:L[0],savedSettings:[]}),u=reactive({selectedSupplier:A$1[0],apiKeyDict:{},supplierModelsDict:{},selectedModelDict:{}}),i=reactive({id:void 0,title:"",systemPrompt:"",messages:[],newMessage:""}),c=reactive({temperature:1,top_p:1}),d=[{key:"temperature",label:"temperature",min:.01,max:2,step:.01,default:1,tip:" 0  2  0.8 0.2 top_p"},{key:"top_p",label:"top_p",min:.01,max:1,step:.01,default:1,tip:" top_p  token  0.1  10%  token  temperature"}];return onMounted(async()=>{const l=await load$2("templateForm");l!=null&&Object.assign(a,l);const g=await load$2("batchForm");g!=null&&Object.assign(n,g);const f=await load$2("savedSettings");f!=null&&(s.savedSettings=f);const p=await load$2("supplierForm");p!=null&&Object.assign(u,p);const m=await load$2("functionSetting");m!=null&&(s.functionSetting=m);const y=await load$2("taskInput");y!=null&&(o.taskInput=y);const _=await load$2("chatData");_!=null&&Object.assign(i,_);const x=await load$2("llmOptions");x!=null&&Object.assign(c,x);let E=await load$2("result");if(E!=null){if(R.isString(E))try{E=JSON.parse(E)}catch(C){o._lastResultError=C}o.result=E}}),()=>[h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h("div",{class:"stack-h"},[h(ToolButton,{label:"",command:async()=>{const l=await (i);clipboard.copy(l),e.add({severity:"info",summary:"",detail:`${l==null?void 0:l.length} 
${l.slice(0,20)}${(l==null?void 0:l.length)<=20?"":"..."}`,life:2e3})}}),h(ToolButton,{label:"",command:async()=>{await (i),e.add({severity:"info",summary:"",detail:` ID${i.id}`,life:2e3})}})]),h("div",{class:"stack-h"},[h(ToolButton,{label:`[${i.id??"-"}]`,command:async()=>{const l=await (i);e.add({severity:"info",summary:"",detail:` ID${l.id}`,life:2e3}),save$1("chatData",i)}}),h(ToolButton,{label:`[${i.id??"-"}]`,command:async()=>{const l=await (i);e.add({severity:"info",summary:"",detail:` ID${l.id}`,life:2e3}),save$1("chatData",i)}}),h(ToolButton,{label:`[${i.id??"-"}]`,command:async()=>{const l=await (i);l.ok?e.add({severity:"info",summary:"",detail:` ID${l.id}`,life:2e3}):e.add({severity:"error",summary:"",detail:` ID${i.id}`,life:2e3}),save$1("chatData",i)}})]),h("div",{class:"stack-v"},[r.value.map(l=>h("div",{class:"stack-h"},[h("span",{},`[${l.id??"-"}]${l.title??"-"}`),h(ToolButton,{label:"",command:async()=>{l!=null&&(Object.assign(i,l),save$1("chatData",i))}})]))])])}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>{var l,g,f,p;return h("div",{class:"stack-v max-w-640px mx-auto py-1rem"},[h("div",{class:"stack-h w-full"},[h(script$g,{name:"chatTitle",placeholder:"",class:"grow-1",modelValue:i.title,"onUpdate:modelValue":m=>{i.title=m,save$1("chatData",i)}}),h(ToolButton,{icon:"pi pi-sparkles",label:"",command:()=>{i.title=` ${new Date().toLocaleString()}`,save$1("chatData",i)}})]),h(script$e,{class:"w-full",placeholder:"",modelValue:i.systemPrompt,"onUpdate:modelValue":m=>{i.systemPrompt=m,save$1("chatData",i)}}),h("div",{class:["stack-v w-full max-h-80vh my-1rem p-1rem overflow-auto","p-panel"]},[(l=i.systemPrompt)!=null&&l.length?h(Bubble,{content:i.systemPrompt,messageRender:m=>textRenderEngine.process(m),key:i.systemPrompt,loading:!1,placement:"end",avatarProps:{icon:"pi pi-desktop"},onClick:()=>{console.log(i)}},{header:()=>h("div",{class:"stack-h"},["system"]),footer:()=>h("div",{class:"stack-h"},[h(ToolButton,{size:"small",icon:"pi pi-copy",label:"",command:()=>{const m=i.systemPrompt??"";clipboard.copy(m),e.add({severity:"info",summary:"",detail:`${m==null?void 0:m.length} 
${m.slice(0,20)}${(m==null?void 0:m.length)<=20?"":"..."}`,life:2e3})}})])}):null,(g=i.systemPrompt)!=null&&g.length?h(script$d,{severity:"secondary",size:"small",class:"max-w-80% my-1rem mx-auto -outline-width-0!",pt:{text:{class:"-fw-400!"}}},{default:()=>[""]}):null,i.messages.map(m=>[h(Bubble,{content:m.content,key:m.content,messageRender:y=>textRenderEngine.process(y),loading:!1,placement:["user","system"].includes(m.role)?"end":"start",avatarProps:{icon:m.role=="user"?"pi pi-user":m.role=="assistant"?"pi pi-face-smile":"pi pi-desktop"}},{header:()=>h("div",{class:"stack-h"},[R.camelCase(m.role)]),footer:()=>h("div",{class:"stack-h"},[h(ToolButton,{size:"small",icon:"pi pi-copy",label:"",command:()=>{var y,_;clipboard.copy(m.content),e.add({severity:"info",summary:"",detail:`${(y=m.content)==null?void 0:y.length} 
${m.content.slice(0,20)}${((_=m.content)==null?void 0:_.length)<=20?"":"..."}`,life:2e3})}})])})]),(f=i.newMessage)!=null&&f.length?h(script$d,{severity:"secondary",size:"small",class:"max-w-80% my-1rem mx-auto -outline-width-0!",pt:{text:{class:"-fw-400!"}}},{default:()=>[""]}):null,(p=i.newMessage)!=null&&p.length?h(Bubble,{content:i.newMessage,messageRender:m=>textRenderEngine.process(m),key:i.newMessage,loading:!1,placement:"start",avatarProps:{icon:"pi pi-face-smile"},onClick:()=>{console.log(i)}},{header:()=>h("div",{class:"stack-h"},["assistant"]),footer:()=>h("div",{class:"stack-h"},[h(ToolButton,{size:"small",icon:"pi pi-copy",label:"",command:()=>{const m=i.newMessage??"";clipboard.copy(m),e.add({severity:"info",summary:"",detail:`${m==null?void 0:m.length} 
${m.slice(0,20)}${(m==null?void 0:m.length)<=20?"":"..."}`,life:2e3})}})])}):null]),[h(script$e,{class:"w-full",placeholder:"",modelValue:o.taskInput,"onUpdate:modelValue":m=>{o.taskInput=m,save$1("taskInput",m)}}),h("div",{class:"stack-h"},[h(ToolButton,{size:"small",icon:"pi pi-send",label:"",class:"ml-auto",command:async()=>{if(o.taskInput.trim()==="")return;const m=R.clone(i.messages);i.messages.push({role:"user",content:o.taskInput}),await (o,u,i,m,{stream:!0,...c}),i.messages.push({role:"assistant",content:i.newMessage??""}),i.newMessage="",o.taskInput="",save$1("chatData",i)}}),h(ToolButton,{size:"small",icon:"pi pi-send",label:"",class:"ml-auto",command:async()=>{o.taskInput.trim()!==""&&(await (o,u,i,i.messages,{stream:!0,...c}),save$1("chatData",i))}}),h(ToolButton,{size:"small",icon:"pi pi-send",label:"",class:"ml-auto",command:async()=>{const m=R.clone(i.messages);await (o,u,i,m,{stream:!0,...c},!0),save$1("chatData",i)}}),h(ToolButton,{size:"small",icon:"pi pi-send",label:"",class:"ml-auto",command:async()=>{o.taskInput.trim().length&&i.messages.push({role:"user",content:o.taskInput}),(i.newMessage??"").trim().length&&i.messages.push({role:"assistant",content:i.newMessage??""}),i.newMessage="",o.taskInput="",save$1("chatData",i)}}),h(ToolButton,{size:"small",icon:"pi pi-send",label:"",class:"ml-auto",command:async()=>{o.taskInput.trim()!==""&&(i.messages.push({role:"user",content:o.taskInput}),o.taskInput="",save$1("chatData",i))}}),h(ToolButton,{size:"small",icon:"pi pi-send",label:"",class:"ml-auto",command:async()=>{i.messages=[],i.newMessage="",save$1("chatData",i)}}),h(ToolButton,{size:"small",icon:"pi pi-copy",label:"",command:()=>{var m,y;clipboard.copy(o.taskInput),e.add({severity:"info",summary:"",detail:`${(m=o.taskInput)==null?void 0:m.length} 
${o.taskInput.slice(0,20)}${((y=o.taskInput)==null?void 0:y.length)<=20?"":"..."}`,life:2e3})}}),h(ToolButton,{size:"small",icon:"pi pi-trash",label:"",command:()=>{o.taskInput=""}})]),h("div",{class:"grid grid-cols-2 gap-4 w-full"},[d.map((m,y)=>h("div",{class:"stack-v col-span-2 lg-col-span-1 gap-4!"},[h(script$f,{variant:"on",class:"w-full"},{default:()=>[h(script$g,{id:`${m.key}Input`,fluid:!0,key:`[${y}]${m.key}`,modelValue:c[m.key],"onUpdate:modelValue":_=>{c[m.key]=Number(_),save$1("llmOptions",c)}}),h("label",{for:`${m.key}Input`},m.label)]}),h(script$j,{class:"w-96% mx-auto",modelValue:c[m.key],"onUpdate:modelValue":_=>{c[m.key]=Number(_),save$1("llmOptions",c)},min:m.min,max:m.max,step:m.step,title:m.tip})]))])]])}})]}});class ConceptDB extends Dexie{constructor(){super("ConceptForest");V(this,"trees");V(this,"nodes");V(this,"aliases");this.version(1).stores({trees:"&name",nodes:"[tree+key], tree, parents",aliases:"[tree+alias], [tree+key]"})}async _getRealKey(r,o){const n=await this.aliases.get([r,o.toLowerCase()]);return(n==null?void 0:n.key)||o}async createTree(r){if(!await this.trees.get(r))return this.trees.put({name:r})}async addNode(r,o){const n=(o.alias||[]).map(a=>a.toLowerCase());return this.transaction("rw",this.nodes,this.aliases,async()=>{await this.nodes.put({key:o.key,alias:n,parents:o.parents||[],props:o.props||{},tree:r,updated:new Date}),await this.aliases.bulkPut(n.map(a=>({tree:r,alias:a,key:o.key})))})}async updateParent(r,o,n){const a=await this._getRealKey(r,o);return this.nodes.update([r,a],{parents:n})}async findConcepts(r,o){let n=this.nodes.where("tree").equals(r);if(o.name)if(o.fuzzy){const a=await this.aliases.where("[tree+alias]").between([r,o.name.toLowerCase()],[r,o.name.toLowerCase()+""]).primaryKeys();n=n.filter(s=>a.map(u=>u[1]).includes(s.key))}else{const a=await this._getRealKey(r,o.name);n=n.filter(s=>s.key===a)}return o.props&&(n=n.filter(a=>Object.entries(o.props).every(([s,u])=>a.props[s]===u))),n.toArray()}}const db$2=new ConceptDB,TemplateJsTool={cdb:db$2,__KV__:{},__History__:[],log(e){const t=JSON.stringify(e);this.__History__.push(t),console.log(t)},clear(){this.__KV__={},this.__History__=[]},set(e,t){this.__KV__[e]=t},get(e){return this.__KV__[e]},last(){return this.__History__[this.__History__.length-1]},history(){return this.__History__},runCode(code){const frags=code.split(/(CallStart|CallEnd)/g);for(;frags[0]!=="CallStart";)if(frags.shift(),frags.length===0)return this.log("Error Code block not found."),this.last();for(frags.shift();frags[frags.length-1]!=="CallEnd";)if(frags.pop(),frags.length===0)return this.log("Error Code block not found."),this.last();frags.pop(),code=frags.join("").trim(),code=code.replace(/^```([Jj](ava)?[Ss](cript)?)?/g,""),code=code.replace(/```$/g,""),code=code.trim();try{eval(code)}catch(e){this.log(String(e))}return this.last()}},="\n js JsToolAPI\n\n- **** JsTool\n  - **** `JsToolUsed`\n  -  JsTool `JsToolUsed`\n  -  JsTool \n  -  JsTool \n  -  JsTool \n-  JsTool `CallStart``CallEnd` 1  JsTool\n\n\n\n-  JsTool  import \n-  JsTool  `console.log`  `JsTool.log` \n-  JsTool  `JsTool.set(key, value)`  `JsTool.get(key)`\n\n-  JsTool  lodash `_`\n-  JsTool  id  `the-only-art-board-wrap`  div  div  canvas  svg \n- js\n-  JsTool \n\n- `ReturnStart``ReturnEnd` `JsTool.log` \n-  JsTool \n  \n\n`ResultStart``ResultEnd`",roleIconDict={user:"pi pi-user",assistant:"pi pi-face-smile",system:"pi pi-desktop",tool:"pi pi-hammer"},AppToolTestView=defineComponent({setup(){const e=reactive(TemplateJsTool);onMounted(()=>{window.JsTool=e}),onUnmounted(()=>{window.JsTool=void 0});const t=f=>e.runCode(f),r=async f=>{const p=d.newMessage??"";return p.includes("JsToolUsed")?{run:!0,nextMessage:`ReturnStart${t(p)}ReturnEnd`}:{run:!1}},o=async(f=!1,p=2)=>{const m=R.cloneDeep(d.messages);m.forEach(_=>{_.role=="tool"&&(_.role="user")}),f||d.messages.push({role:"user",content:a.taskInput});let y=null;await (a,c,d,m,{stream:!0,...l},async _=>{y=await r()}),d.messages.push({role:"assistant",content:d.newMessage??""}),d.newMessage="",a.taskInput="",save$1("chatData",d),y!=null&&y.run&&p>0&&(d.messages.push({role:"tool",content:y.nextMessage}),save$1("chatData",d),await o(!0,p-1))},n=useToast(),a=reactive({ipAndCountryCode:{},taskInput:"",processing:!1,lastRecordId:null,result:{},_lastResultError:null}),s=reactive({batchMode:!1,batchConfig:{},batchState:{}}),u=reactive({template:null,taskMask:null,reqMask:null,resMask:null}),i=reactive({functionSetting:L[0],savedSettings:[]}),c=reactive({selectedSupplier:A$1[0],apiKeyDict:{},supplierModelsDict:{},selectedModelDict:{}}),d=reactive({title:"",systemPrompt:"",messages:[],newMessage:""}),l=reactive({temperature:1,top_p:1}),g=[{key:"temperature",label:"temperature",min:.01,max:2,step:.01,default:1,tip:" 0  2  0.8 0.2 top_p"},{key:"top_p",label:"top_p",min:.01,max:1,step:.01,default:1,tip:" top_p  token  0.1  10%  token  temperature"}];return onMounted(async()=>{const f=await load$2("templateForm");f!=null&&Object.assign(u,f);const p=await load$2("batchForm");p!=null&&Object.assign(s,p);const m=await load$2("savedSettings");m!=null&&(i.savedSettings=m);const y=await load$2("supplierForm");y!=null&&Object.assign(c,y);const _=await load$2("functionSetting");_!=null&&(i.functionSetting=_);const x=await load$2("taskInput");x!=null&&(a.taskInput=x);const E=await load$2("chatData");E!=null&&Object.assign(d,E);const C=await load$2("llmOptions");C!=null&&Object.assign(l,C);let D=await load$2("result");if(D!=null){if(R.isString(D))try{D=JSON.parse(D)}catch($){a._lastResultError=$}a.result=D}}),()=>[h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h("p",{},""),h("p",{},""),h("p",{},""),h("p",{},"")])}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h(ToolButton,{icon:"pi pi-sparkles",label:"",command:()=>{d.systemPrompt=,save$1("chatData",d)}})])}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v",id:"the-only-art-board-wrap"},[])}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>{var f,p,m,y;return h("div",{class:"stack-v max-w-640px mx-auto py-1rem"},[h("div",{class:"stack-h w-full"},[h(script$g,{name:"chatTitle",placeholder:"",class:"grow-1",modelValue:d.title,"onUpdate:modelValue":_=>{d.title=_,save$1("chatData",d)}}),h(ToolButton,{icon:"pi pi-sparkles",label:"",command:()=>{d.title=` ${new Date().toLocaleString()}`,save$1("chatData",d)}})]),h(script$e,{class:"w-full",placeholder:"",modelValue:d.systemPrompt,"onUpdate:modelValue":_=>{d.systemPrompt=_,save$1("chatData",d)}}),h("div",{class:["stack-v w-full max-h-80vh my-1rem p-1rem overflow-auto","p-panel"]},[(f=d.systemPrompt)!=null&&f.length?h(Bubble,{content:d.systemPrompt,messageRender:_=>textRenderEngine.process(_),key:d.systemPrompt,loading:!1,placement:"end",avatarProps:{icon:roleIconDict.system},onClick:()=>{console.log(d)}},{header:()=>h("div",{class:"stack-h"},["system"])}):null,(p=d.systemPrompt)!=null&&p.length?h(script$d,{severity:"secondary",size:"small",class:"max-w-80% my-1rem mx-auto -outline-width-0!",pt:{text:{class:"-fw-400!"}}},{default:()=>[""]}):null,d.messages.map(_=>[h(Bubble,{content:_.content,messageRender:x=>textRenderEngine.process(x),loading:!1,placement:["user","system"].includes(_.role)?"end":"start",avatarProps:{icon:roleIconDict[_.role]}},{header:()=>h("div",{class:"stack-h"},[R.camelCase(_.role)]),footer:()=>h("div",{class:"stack-h"},[h(ToolButton,{size:"small",icon:"pi pi-copy",command:()=>{var x,E;clipboard.copy(_.content),n.add({severity:"info",summary:"",detail:`${(x=_.content)==null?void 0:x.length} 
${_.content.slice(0,20)}${((E=_.content)==null?void 0:E.length)<=20?"":"..."}`,life:2e3})}}),_.content.includes("CallStart")&&_.content.includes("CallEnd")?h(ToolButton,{size:"small",icon:"pi pi-play",command:()=>{t(_.content)}}):null])})]),(m=d.newMessage)!=null&&m.length?h(script$d,{severity:"secondary",size:"small",class:"max-w-80% my-1rem mx-auto -outline-width-0!",pt:{text:{class:"-fw-400!"}}},{default:()=>[""]}):null,(y=d.newMessage)!=null&&y.length?h(Bubble,{content:d.newMessage,messageRender:_=>textRenderEngine.process(_),key:d.newMessage,loading:!1,placement:"start",avatarProps:{icon:roleIconDict.assistant},onClick:()=>{console.log(d)}},{header:()=>h("div",{class:"stack-h"},["assistant"]),footer:()=>h("div",{class:"stack-h"},[h(ToolButton,{size:"small",icon:"pi pi-copy",command:()=>{const _=d.newMessage??"";clipboard.copy(_),n.add({severity:"info",summary:"",detail:`${_==null?void 0:_.length} 
${_.slice(0,20)}${(_==null?void 0:_.length)<=20?"":"..."}`,life:2e3})}})])}):null]),[h(script$e,{class:"w-full",placeholder:"",modelValue:a.taskInput,"onUpdate:modelValue":_=>{a.taskInput=_,save$1("taskInput",_)}}),h("div",{class:"stack-h"},[h(ToolButton,{size:"small",icon:"pi pi-send",label:"",class:"ml-auto",command:()=>{a.taskInput.trim()!==""&&o()}}),h(ToolButton,{size:"small",icon:"pi pi-copy",label:"",command:()=>{var _,x;clipboard.copy(a.taskInput),n.add({severity:"info",summary:"",detail:`${(_=a.taskInput)==null?void 0:_.length} 
${a.taskInput.slice(0,20)}${((x=a.taskInput)==null?void 0:x.length)<=20?"":"..."}`,life:2e3})}}),h(ToolButton,{size:"small",icon:"pi pi-trash",label:"",command:()=>{a.taskInput=""}}),h(ToolButton,{size:"small",icon:"pi pi-send",label:"",class:"ml-auto",command:async()=>{d.messages=[],d.newMessage="",save$1("chatData",d)}})]),h("div",{class:"grid grid-cols-2 gap-4 w-full"},[g.map((_,x)=>h("div",{class:"stack-v col-span-2 lg-col-span-1 gap-4!"},[h(script$f,{variant:"on",class:"w-full"},{default:()=>[h(script$g,{id:`${_.key}Input`,fluid:!0,key:`[${x}]${_.key}`,modelValue:l[_.key],"onUpdate:modelValue":E=>{l[_.key]=Number(E),save$1("llmOptions",l)}}),h("label",{for:`${_.key}Input`},_.label)]}),h(script$j,{class:"w-96% mx-auto",modelValue:l[_.key],"onUpdate:modelValue":E=>{l[_.key]=Number(E),save$1("llmOptions",l)},min:_.min,max:_.max,step:_.step,title:_.tip})]))])]])}}),h("div",{class:"grid grid-cols-2 gap-4"},[h(script$3,{header:"JsTool ",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h(ToolButton,{icon:"pi pi-copy",label:"",command:()=>{var f;clipboard.copy(`ReturnStart${e.last()}ReturnEnd`),n.add({severity:"info",summary:"",detail:` ${(f=`${e.last()}`)==null?void 0:f.length} `,life:2e3})}}),JSON.stringify(e.history(),null,2)])}),h(script$3,{header:"JsTool ",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[JSON.stringify(e.__KV__,null,2)])})]),h(AppFileView,{class:"w-full"})]}}),NoteEditor=defineComponent({name:"NoteEditor",props:["note","idx"],emits:["modifyNoteContent","deleteNote"],setup(e,{emit:t}){var c,d;const r=resolveDirective("tooltip"),o=ref(),n=l=>{o.value.toggle(l)},a=ref(!1),s=ref((c=e==null?void 0:e.note)==null?void 0:c.title),u=ref((d=e==null?void 0:e.note)==null?void 0:d.content),i=ref([{label:"",icon:"pi pi-pencil",command:()=>{a.value=!0}},{label:"",icon:"pi pi-trash",command:()=>{var l;t("deleteNote",{id:(l=e==null?void 0:e.note)==null?void 0:l.id})}}]);return()=>{var l,g,f;return h(script$3,{key:`note[${e==null?void 0:e.idx}][${(l=e==null?void 0:e.note)==null?void 0:l.id}]`,header:`[${(g=e==null?void 0:e.note)==null?void 0:g.id}] ${((f=e==null?void 0:e.note)==null?void 0:f.title)??""}`},{default:()=>{var p;return h("div",{},[a.value?null:h("pre",{},(p=e==null?void 0:e.note)==null?void 0:p.content),a.value?h("div",{class:"my-3 flex flex-col flex-wrap gap-2 flex-content-around"},[h(script$g,{fluid:!0,modelValue:s.value,"onUpdate:modelValue":m=>{s.value=m}}),h(script$e,{fluid:!0,rows:4,modelValue:u.value,"onUpdate:modelValue":m=>{u.value=m}})]):null,a.value?h("div",{class:"mt-3 flex flex-row flex-wrap gap-2 flex-content-around"},[h(script$4,{class:"ml-auto",label:"",severity:"secondary",size:"small",onClick:()=>{var m;t("modifyNoteContent",{shadow:{id:(m=e==null?void 0:e.note)==null?void 0:m.id},content:u.value,title:s.value,callback:y=>{y===0&&(a.value=!1)}})}}),h(script$4,{label:"",severity:"secondary",size:"small",onClick:()=>{a.value=!1}})]):null])},icons:()=>{var p;return[withDirectives(h(script$4,{icon:"pi pi-pencil",severity:"secondary",rounded:!0,text:!0,onClick:()=>{a.value=!0}}),[[r,{value:"",showDelay:250,hideDelay:500},"top",{top:!0}]]),withDirectives(h(script$4,{icon:"pi pi-trash",severity:"secondary",rounded:!0,text:!0,onClick:()=>{var m;t("deleteNote",{id:(m=e==null?void 0:e.note)==null?void 0:m.id})}}),[[r,{value:"",showDelay:250,hideDelay:500},"top",{top:!0}]]),withDirectives(h(script$4,{icon:"pi pi-cog",severity:"secondary",rounded:!0,text:!0,onClick:n}),[[r,{value:"",showDelay:250,hideDelay:500},"top",{top:!0}]]),h(script$k,{ref:o,id:`menu-of-note[${e==null?void 0:e.idx}][${(p=e==null?void 0:e.note)==null?void 0:p.id}]`,model:i.value,popup:!0})]}})}}}),useNotesStore=defineStore("notesStore",{state:()=>({notes:[]}),getters:{count:e=>e.notes.length,maxId:e=>{var t;return((t=R.maxBy(e.notes,"id"))==null?void 0:t.id)??0}},actions:{addNote(e){e.id=this.maxId+1,e.timestamp=Date.now(),this.notes.unshift(e)},addNoteByContent(e,t){const r={content:e,title:t,id:this.maxId+1,timestamp:Date.now()};this.notes.unshift(r)},removeNote(e){R.remove(this.notes,e)},modifyNoteContent(e,t,r,o){console.log({shadow:e,title:r,content:t});const n=this.notes.find(a=>R.isMatch(a,e));if(n){const a=this.notes.indexOf(n),s={...R.cloneDeep(n),content:t,title:r};this.notes.splice(a,1,s),o==null||o(0)}else o==null||o(-1)}},persist:{serializer:{deserialize:lib$1.parse,serialize:lib$1.stringify}}}),AppNotesView=defineComponent({name:"AppNotesView",setup(){const e=useToast(),t=resolveDirective("tooltip"),r=useNotesStore(),{addNote:o,removeNote:n,modifyNoteContent:a}=r,{notes:s,count:u}=storeToRefs(r);return()=>h(script$3,{header:` ${u.value} `,toggleable:!0,class:"my-3"},{default:()=>[h("div",{class:["flex flex-row flex-items-center flex-wrap gap-2 flex-content-around flex-justify-around"]},[withDirectives(h(script$4,{label:"",onClick:()=>{o({content:""})}}),[[t,{value:"",showDelay:250,hideDelay:500},"top",{top:!0}]])]),h(script$l,{value:s.value,dataKey:"id",paginator:!0,rows:20},{empty:()=>h("div",{class:"my-3"},[""]),list:i=>i.items.map((c,d)=>h(NoteEditor,{class:"my-3",note:c,idx:d,key:`note[${d}][${c.id}]`,onDeleteNote:l=>{n(l)},onModifyNoteContent:({shadow:l,content:g,title:f,callback:p})=>{console.log({shadow:l,content:g,title:f,callback:p}),a(l,g,f,m=>{m===0||e.add({severity:"error",summary:"",detail:`${m}
${JSON.stringify(l)}`,life:3e3}),p==null||p(m)})}}))})]})}}),ddb$1=new Dexie("My-Demo-KDB");ddb$1.version(1).stores({kvs:"++id, &key, value",entries:"++id, &key"});const db$1=ddb$1,load$1=async e=>{var r;const t=(r=await db$1.kvs.get({key:e}))==null?void 0:r.value;return t==null?null:lib$1.parse(t)},KDBView=defineComponent({name:"KDBView",setup(){const e=useToast(),t=reactive({input:"",processing:!1,textChunks:[]});return onMounted(async()=>{const r=await load$1("demoData");r!=null&&Object.assign(t,r),e.add({severity:"success",summary:"",detail:"You are welcome.",life:3e3})}),()=>[h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h("div",{class:"stack-h"},[]),h("div",{class:"stack-h"},[]),h("div",{class:"stack-h"},[])])}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h("div",{class:"stack-h"},[]),h("div",{class:"stack-h"},[]),h("div",{class:"stack-h"},[])])}),h(script$3,{header:"/",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h("div",{class:"stack-h"},[]),h("div",{class:"stack-h"},[]),h("div",{class:"stack-h"},[])])}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h("div",{class:"stack-h"},[]),h("div",{class:"stack-h"},[]),h("div",{class:"stack-h"},[])])}),h(script$3,{header:"/",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h("div",{class:"stack-h"},[]),h("div",{class:"stack-h"},[]),h("div",{class:"stack-h"},[])])})]}}),ddb=new Dexie("DB-of-WordFormationDemo");ddb.version(1).stores({kvs:"++id, &key, value",entries:"++id, &key",versions:"++id, &key"});const db=ddb,load=async e=>{var r;const t=(r=await db.kvs.get({key:e}))==null?void 0:r.value;return t==null?null:lib$1.parse(t)},save=async(e,t)=>{const r=lib$1.stringify(t);await db.kvs.put({id:e,key:e,value:r})},theSystemPrompt=`
### 


### user 
user 
user 
- 
- 

### 
 json 
- \`name\`string
- \`desc\`string
- \`partNames\`string[]
- \`examples\`string[]5


### 
- 
- 
  - 
  - 
  - +

### 
1. 
2. 
3. 
4. 
5. 

### 
jsonmd
json
- \`word\`string
- \`analyze\`string
- \`parts\`string[]
- \`cateSystemIsGood\`boolean
- \`newCateNeeded\`boolean
- \`newCate\`Category
  - \`name\`
  - \`desc\`
  - \`partNames\`
  - \`examples\`
- \`modCateNeeded\`boolean
- \`modCate\`Category
  - \`oldName\`
  - \`name\`
  - \`desc\`
  - \`partNames\`
  - \`examples\`
- \`delCateNeeded\`boolean
- \`delCateName\`string
- \`cate\`string
`.trim(),messagesTemplate=[{role:N.User,content:"==[]=="},{role:N.User,content:"<%=  %>",isTemplate:!0,args:[""]},{role:N.User,content:"==[]=="},{role:N.User,content:"<%= word %>",isTemplate:!0,args:["word"]},{role:N.User,content:"==[]=="}];function makeMessagesByTemplate(e,t){return e.map(r=>{if(r.isTemplate){const o=R.template(r.content);return{role:r.role,content:o(t)}}else return{role:r.role,content:r.content}})}const badJSONParser=e=>{const t=e.trim().replace(/^```[^\n]*|```$/g,"").trim();try{return JSON.parse(t)}catch(r){try{return JSON.parse(t.slice(1))}catch(o){return console.error({error1:r,error2:o}),t}}},genInitialOutput=()=>({cates:[]}),updateCatesWrapper=(e,t)=>{const r=R.cloneDeep(t??genInitialOutput()),{newCateNeeded:o,newCate:n,modCateNeeded:a,modCate:s,delCateNeeded:u,delCateName:i}=e;let c=!1;if(o&&(r.cates.push(n),c=!0),a){const{oldName:d}=s,l=r.cates.findIndex(g=>g.name===d);l>=0&&(r.cates[l]=s,c=!0)}if(u){const d=r.cates.findIndex(l=>l.name===i);d>=0&&(r.cates.splice(d,1),c=!0)}if(r.cateVersion=r.cateVersion??0,c){const d=r.cateVersion+1;r.cateVersion=d}return r},updateCatesWrapperByString=(e,t)=>updateCatesWrapper(badJSONParser(e),t);class O{constructor(t){this.loadFromDict(t),this._api=new OpenAI({apiKey:this.apiKey,baseURL:this.baseURL,dangerouslyAllowBrowser:!0})}loadFromDict(t){this.baseURL=(t==null?void 0:t.baseURL)??(t==null?void 0:t.baseUrl)??"https://api.openai.com/v1",this.apiKey=(t==null?void 0:t.apiKey)??"",this.defaultModel=(t==null?void 0:t.defaultModel)??"deepseek-chat",this.modelsURL=(t==null?void 0:t.modelsURL)??(t==null?void 0:t.modelsUrl)??"/models"}setAPIKey(t){this.apiKey=t,this._api.apiKey=t}setBaseURL(t){this.baseURL=t,this._api.baseURL=t}setModelsUrl(t){this.modelsURL=t}async listModels(){const t=await fetch(`${this.baseURL}${this.modelsURL}`,{headers:{Authorization:`Bearer ${this.apiKey}`}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}async createChat__(t,r){return this._api.chat.completions.create(t,r)}async fetchChatResponse(t,r){return await fetch(`${this.baseURL}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`,...(r==null?void 0:r.headers)??{}},body:JSON.stringify(t)})}async createChat(t,r){const o=await this.fetchChatResponse(t,r);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return o.json()}async*createChatStream(t,r){var o;try{const n=await this.fetchChatResponse(t,r);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=n.body.getReader(),s=new TextDecoder("utf-8");let u="";for(;;){const{done:i,value:c}=await a.read();if(i)break;const d=s.decode(c,{stream:!0});u+=d;const l=u.split(`
`);u=l.pop()??"";for(const g of l)if((o=g.trim())!=null&&o.length&&g.trim()!=": keep-alive")try{const f=g.trim().slice(5).trim();if(f=="[DONE]"){yield{done:!0};continue}yield JSON.parse(f)}catch(f){console.error("Error parsing JSON:",f,g)}}}catch(n){throw console.error("Error streaming LLM JSON data:",n),n}}async*chatStream(t,r=void 0,o=[],n={},a=!1){var s,u;for await(const i of this.createChatStream({model:this.defaultModel,messages:[...r!=null&&r.length?[{role:"system",content:r}]:[],...o??[],...a?[]:[{role:"user",content:t}]],temperature:.6,stream:!0,...n??{}})){const c=(u=(s=i==null?void 0:i.choices)==null?void 0:s[0])==null?void 0:u.delta;if(c!=null&&(yield c),i.done){yield{done:!0};break}}}async chat(t,r=void 0,o=[],n={}){var a;const s=await this.createChat({model:this.defaultModel,messages:[...r!=null&&r.length?[{role:"system",content:r}]:[],...o??[],{role:"user",content:t}],temperature:.6,...n??{}}),{choices:u=[]}=s;return(a=u==null?void 0:u[0])==null?void 0:a.message}async*chatWithLifeCycle(t,r,o,n,a){const{chunkProcessor:s,resultProcessor:u,onStart:i,onBeforeUpdate:c,onAfterUpdate:d,onDone:l,onEnd:g,onCancel:f,onErrorInUpdate:p,onError:m,shouldContinue:y}=a??{};let _="initialization",x=R.cloneDeep(o),E,C=-1;_="beforeStart";const D=await(i==null?void 0:i({result:x}));_="afterStart",x=(D==null?void 0:D.result)??x;try{_="beforeLoop";for await(let B of this.chatStream("",t,r,n,!0))try{if(C+=1,B==null)continue;_=`beforeBeforeUpdate_${C}`;const T=await(c==null?void 0:c({result:x,chunk:B,idx:C}));x=(T==null?void 0:T.result)??x,B=(T==null?void 0:T.chunk)??B,_=`beforeChunkProcessor_${C}`,E=await(s==null?void 0:s(x,B)),yield{result:x,chunk:B,processedChunk:E},_=`beforeAfterUpdate_${C}`;const F=await(d==null?void 0:d({result:x,chunk:B,processedChunk:E,idx:C}));if(x=(F==null?void 0:F.result)??x,B=(F==null?void 0:F.chunk)??B,E=(F==null?void 0:F.processedChunk)??E,_=`afterAfterUpdate_${C}`,B!=null&&B.done){_=`beforeDone_${C}`;const I=await(l==null?void 0:l({result:x,chunk:B,processedChunk:E}));x=(I==null?void 0:I.result)??x,B=(I==null?void 0:I.chunk)??B,E=(I==null?void 0:I.processedChunk)??E,_=`afterDone_${C}`;break}if(y!=null&&!await y({result:x,chunk:B,processedChunk:E,idx:C})){_=`beforeCancel_${C}`,await(f==null?void 0:f({result:x,chunk:B,processedChunk:E,idx:C})),_=`afterCancel_${C}`;break}}catch(T){if(await(p==null?void 0:p({error:T,result:x,chunk:B,processedChunk:E,idx:C,state:_})))continue;throw T}_="afterLoop",_="beforeFinalResult";const $=await(u==null?void 0:u(x));return _="beforeEnd",await(g==null?void 0:g({finalResult:$,result:x,processedChunk:E,idx:C})),_="afterEnd",$}catch($){if(!await(m==null?void 0:m({error:$,result:x,processedChunk:E,idx:C,state:_})))throw console.error("Stream processing error:",$),new Error(`Chat stream failed: ${$.message}`)}}}const A=[{name:"DeepSeek",type:"ChatSupplier",desc:"DeepSeek",docUrl:"https://platform.deepseek.com/docs",baseUrl:"https://api.deepseek.com/v1",defaultModel:"deepseek-chat",chatUrl:"/chat/completions",modelsUrl:"/models"},{name:"",type:"ChatSupplier",desc:"",docUrl:"https://help.aliyun.com/zh/model-studio/user-guide/multi-round-conversation?spm=a2c4g.11186623.help-menu-2400256.d_1_0_0_4.1b54b0a8Obvgrf",baseUrl:"https://dashscope.aliyuncs.com/compatible-mode/v1",defaultModel:"deepseek-v3",chatUrl:"/chat/completions",modelsUrl:"/models"},{name:"",type:"ChatSupplier",desc:"",docUrl:"https://doc.zhizengzeng.com/",baseUrl:"https://api.zhizengzeng.com/v1",defaultModel:"deepseek-chat",chatUrl:"/chat/completions",modelsUrl:"/models"},{name:"",type:"ChatSupplier",desc:"",docUrl:"https://docs.siliconflow.cn/",baseUrl:"https://api.siliconflow.cn/v1",defaultModel:"deepseek-ai/DeepSeek-V3",chatUrl:"/chat/completions",modelsUrl:"/models"},{name:"ZhiPu",type:"ChatSupplier",desc:"",docUrl:"https://open.bigmodel.cn/dev/api",baseUrl:"https://open.bigmodel.cn/api/paas/v4",defaultModel:"glm-4",chatUrl:"/chat/completions",modelsUrl:"/models",models:[{id:"glm-4"},{id:"glm-4-air"},{id:"glm-4-flash"},{id:"glm-3-turbo"}]},{name:"Moonshot",type:"ChatSupplier",desc:"Moonshot",docUrl:"https://platform.moonshot.cn/docs/api-reference",baseUrl:"https://api.moonshot.cn/v1",defaultModel:"moonshot-v1-8k",chatUrl:"/chat/completions",modelsUrl:"/models",balanceUrl:"/users/me/balance",countTokenUrl:"/tokenizers/estimate-token-count"},{name:"OpenAI",type:"ChatSupplier",desc:"OpenAI",docUrl:"https://platform.openai.com/docs/api-reference/chat",baseUrl:"https://api.openai.com/v1",defaultModel:"gpt-3.5-turbo",chatUrl:"/chat/completions",modelsUrl:"/models",notes:`
    https://cookbook.openai.com/examples/how_to_count_tokens_with_tiktoken
    `.trim()}],WordFormationDemo=defineComponent({name:"WordFormationDemo",setup(){const e=useToast(),t=reactive({input:"",processing:!1,thinking:"",output:"",catesText:"",cates:[],cateVersion:0});onMounted(async()=>{const a=await load("demoData");a!=null&&Object.assign(t,a),t.processing=!1,e.add({severity:"success",summary:"",detail:"You are welcome.",life:3e3})});const r=reactive({selectedSupplier:A[0],apiKeyDict:{},supplierModelsDict:{},selectedModelDict:{}});onMounted(async()=>{const a=await load$2("supplierForm");a!=null&&Object.assign(r,a)});async function o(){var f,p,m,y,_;t.processing=!0,t.thinking="",t.output="";const a=[],s=[],u=makeMessagesByTemplate(messagesTemplate,{:t.cates.map(x=>({...x,examples:void 0})).map(x=>JSON.stringify(x)).join(`
`),word:t.input}),i={},c={baseURL:(f=r==null?void 0:r.selectedSupplier)==null?void 0:f.baseUrl,apiKey:r==null?void 0:r.apiKeyDict[(p=r==null?void 0:r.selectedSupplier)==null?void 0:p.name],defaultModel:(_=(y=r==null?void 0:r.selectedModelDict)==null?void 0:y[(m=r==null?void 0:r.selectedSupplier)==null?void 0:m.name])==null?void 0:_.name},d=new O(c),l={chunkProcessor:async(x,E)=>(E.reasoning_content&&(a.push(E.reasoning_content),t.thinking=a.join("")),E.content&&(s.push(E.content),t.output=s.join("")),E),resultProcessor:async x=>x},g=d.chatWithLifeCycle(theSystemPrompt,[{role:"user",content:u.map(x=>x.content).join(`


`)}],i,{max_tokens:2e3,temperature:1},l);for await(const x of g);t.processing=!1}const n=async()=>{const a=updateCatesWrapperByString(t.output,t);t.cates=a.cates,t.cateVersion=a.cateVersion??0,await save("demoData",t)};return()=>[h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h("div",{class:"stack-h"},[`${t.cateVersion}`]),h("div",{class:"stack-v"},[t.cates.map((a,s)=>h("div",{key:`[${s}]${a==null?void 0:a.name}`},[h("div",{},[`[${s}] ${a==null?void 0:a.name}`," ",h("span",{class:"cursor-pointer",onClick:async()=>{t.cates.splice(s,1),await save("demoData",t)}},"[]")]),h("div",{},[JSON.stringify(a)])]))])])}),h(script$3,{header:"",toggleable:!0,class:"my-1.5rem! col"},{default:()=>h("div",{class:"stack-v"},[h(script$e,{class:"w-full",placeholder:"",modelValue:t.input,"onUpdate:modelValue":a=>{t.input=a,save("demoData",t)},disabled:t.processing}),h("div",{class:"stack-h"},[h(ToolButton,{label:"",icon:"pi pi-play",class:"mr-1.5rem",onClick:async()=>{await o()}})]),h("pre",{class:"w-full max-h-50vh p-panel p-1rem overflow-auto"},t.thinking),h("pre",{class:"w-full max-h-50vh p-panel p-1rem overflow-auto"},t.output),h("div",{class:"stack-h"},[h(ToolButton,{label:"",icon:"pi pi-play",class:"mr-1.5rem",onClick:async()=>{await n()}})]),h("div",{class:"stack-h"},[])])})]}}),routes=[{path:"/:pathMatch(.*)*",name:"404",component:NotFoundView},{path:"/",name:"app-root",component:AppView,children:[{path:"agent",name:"app-agent",component:AppRootView},{path:"func-test",name:"app-func-test",component:AppFuncTestView},{path:"chat-test",name:"app-chat-test",component:AppChatTestView},{path:"tool-test",name:"app-tool-test",component:AppToolTestView},{path:"notes",name:"app-notes",component:AppNotesView},{path:"kdb",name:"app-kdb",component:KDBView},{path:"wf",name:"app-wf",component:WordFormationDemo},{path:"config",name:"app-config",component:AppConfigView},{path:"suppliers",name:"app-suppliers",component:AppNotesView}]}],router=createRouter({history:createWebHashHistory(),routes}),suspectProtoRx=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,suspectConstructorRx=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,JsonSigRx=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){warnKeyDropped(e);return}return t}function warnKeyDropped(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function destr(e,t={}){if(typeof e!="string")return e;const r=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const o=r.toLowerCase();if(o==="true")return!0;if(o==="false")return!1;if(o==="undefined")return;if(o==="null")return null;if(o==="nan")return Number.NaN;if(o==="infinity")return Number.POSITIVE_INFINITY;if(o==="-infinity")return Number.NEGATIVE_INFINITY}if(!JsonSigRx.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(suspectProtoRx.test(e)||suspectConstructorRx.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,jsonParseTransform)}return JSON.parse(e)}catch(o){if(t.strict)throw o;return e}}function get(e,t){if(e==null)return;let r=e;for(let o=0;o<t.length;o++){if(r==null||r[t[o]]==null)return;r=r[t[o]]}return r}function set(e,t,r){if(r.length===0)return t;const o=r[0];return r.length>1&&(t=set(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,o)?Number.isInteger(Number(r[1]))?[]:{}:e[o],t,Array.prototype.slice.call(r,1))),Number.isInteger(Number(o))&&Array.isArray(e)?e.slice()[o]:Object.assign({},e,{[o]:t})}function unset(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const r={};for(const o in e)r[o]=e[o];return delete r[t[0]],r}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const r={};for(const o in e)r[o]=e[o];return r}return set(e,unset(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function deepPickUnsafe(e,t){return t.map(r=>r.split(".")).map(r=>[r,get(e,r)]).filter(r=>r[1]!==void 0).reduce((r,o)=>set(r,o[1],o[0]),{})}function deepOmitUnsafe(e,t){return t.map(r=>r.split(".")).reduce((r,o)=>unset(r,o),e)}function hydrateStore(e,{storage:t,serializer:r,key:o,debug:n,pick:a,omit:s,beforeHydrate:u,afterHydrate:i},c,d=!0){try{d&&(u==null||u(c));const l=t.getItem(o);if(l){const g=r.deserialize(l),f=a?deepPickUnsafe(g,a):g,p=s?deepOmitUnsafe(f,s):f;e.$patch(p)}d&&(i==null||i(c))}catch(l){n&&console.error("[pinia-plugin-persistedstate]",l)}}function persistState(e,{storage:t,serializer:r,key:o,debug:n,pick:a,omit:s}){try{const u=a?deepPickUnsafe(e,a):e,i=s?deepOmitUnsafe(u,s):u,c=r.serialize(i);t.setItem(o,c)}catch(u){n&&console.error("[pinia-plugin-persistedstate]",u)}}function createPersistence(e,t,r){const{pinia:o,store:n,options:{persist:a=r}}=e;if(!a)return;if(!(n.$id in o.state.value)){const i=o._s.get(n.$id.replace("__hot:",""));i&&Promise.resolve().then(()=>i.$persist());return}const u=(Array.isArray(a)?a:a===!0?[{}]:[a]).map(t);n.$hydrate=({runHooks:i=!0}={})=>{u.forEach(c=>{hydrateStore(n,c,e,i)})},n.$persist=()=>{u.forEach(i=>{persistState(n.$state,i)})},u.forEach(i=>{hydrateStore(n,i,e),n.$subscribe((c,d)=>persistState(d,i),{detached:!0})})}function createPersistedState(e={}){return function(t){createPersistence(t,r=>({key:(e.key?e.key:o=>o)(r.key??t.store.$id),debug:r.debug??e.debug??!1,serializer:r.serializer??e.serializer??{serialize:o=>JSON.stringify(o),deserialize:o=>destr(o)},storage:r.storage??e.storage??window.localStorage,beforeHydrate:r.beforeHydrate,afterHydrate:r.afterHydrate,pick:r.pick,omit:r.omit}),e.auto??!1)}}var src_default=createPersistedState();const store=createPinia();store.use(src_default);const i18n=createI18n({legacy:!1,locale:"zh",fallbackLocale:"en",messages:{en:{message:{hello:"hello world"}},zh:{message:{hello:""}}}}),app=createApp(App);app.use(PrimeVue,{ripple:!0,theme:{preset:IndigoThemePreset,options:{prefix:"p",darkModeSelector:`.${darkModeClassName}`,cssLayer:!1}}});app.use(router);app.use(store);app.use(ToastService);app.use(DialogService);app.use(ConfirmationService);app.use(i18n);app.directive("tooltip",Tooltip);app.mount("#app");
